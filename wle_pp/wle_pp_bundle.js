(()=>{var so=Object.create;var K=Object.defineProperty;var ro=Object.getOwnPropertyDescriptor;var ao=Object.getOwnPropertyNames;var lo=Object.getPrototypeOf,uo=Object.prototype.hasOwnProperty;var w=(e,t)=>()=>(e&&(t=e(e=0)),t);var S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),G=(e,t)=>{for(var i in t)K(e,i,{get:t[i],enumerable:!0})},Ht=(e,t,i,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ao(t))!uo.call(e,n)&&n!==i&&K(e,n,{get:()=>t[n],enumerable:!(o=ro(t,n))||o.enumerable});return e};var ht=(e,t,i)=>(i=e!=null?so(lo(e)):{},Ht(t||!e||!e.__esModule?K(i,"default",{value:e,enumerable:!0}):i,e)),Q=e=>Ht(K({},"__esModule",{value:!0}),e);var Ut=S(()=>{PP={}});var $=S(J=>{(function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var r=this||t;return r._counter=1e3,r._html5AudioPool=[],r.html5PoolSize=10,r._codecs={},r._howls=[],r._muted=!1,r._volume=1,r._canPlayEvent="canplaythrough",r._navigator=typeof window<"u"&&window.navigator?window.navigator:null,r.masterGain=null,r.noAudio=!1,r.usingWebAudio=!0,r.autoSuspend=!0,r.ctx=null,r.autoUnlock=!0,r._setup(),r},volume:function(r){var u=this||t;if(r=parseFloat(r),u.ctx||h(),typeof r<"u"&&r>=0&&r<=1){if(u._volume=r,u._muted)return u;u.usingWebAudio&&u.masterGain.gain.setValueAtTime(r,t.ctx.currentTime);for(var c=0;c<u._howls.length;c++)if(!u._howls[c]._webAudio)for(var p=u._howls[c]._getSoundIds(),_=0;_<p.length;_++){var g=u._howls[c]._soundById(p[_]);g&&g._node&&(g._node.volume=g._volume*r)}return u}return u._volume},mute:function(r){var u=this||t;u.ctx||h(),u._muted=r,u.usingWebAudio&&u.masterGain.gain.setValueAtTime(r?0:u._volume,t.ctx.currentTime);for(var c=0;c<u._howls.length;c++)if(!u._howls[c]._webAudio)for(var p=u._howls[c]._getSoundIds(),_=0;_<p.length;_++){var g=u._howls[c]._soundById(p[_]);g&&g._node&&(g._node.muted=r?!0:g._muted)}return u},stop:function(){for(var r=this||t,u=0;u<r._howls.length;u++)r._howls[u].stop();return r},unload:function(){for(var r=this||t,u=r._howls.length-1;u>=0;u--)r._howls[u].unload();return r.usingWebAudio&&r.ctx&&typeof r.ctx.close<"u"&&(r.ctx.close(),r.ctx=null,h()),r},codecs:function(r){return(this||t)._codecs[r.replace(/^x-/,"")]},_setup:function(){var r=this||t;if(r.state=r.ctx&&r.ctx.state||"suspended",r._autoSuspend(),!r.usingWebAudio)if(typeof Audio<"u")try{var u=new Audio;typeof u.oncanplaythrough>"u"&&(r._canPlayEvent="canplay")}catch{r.noAudio=!0}else r.noAudio=!0;try{var u=new Audio;u.muted&&(r.noAudio=!0)}catch{}return r.noAudio||r._setupCodecs(),r},_setupCodecs:function(){var r=this||t,u=null;try{u=typeof Audio<"u"?new Audio:null}catch{return r}if(!u||typeof u.canPlayType!="function")return r;var c=u.canPlayType("audio/mpeg;").replace(/^no$/,""),p=r._navigator?r._navigator.userAgent:"",_=p.match(/OPR\/([0-6].)/g),g=_&&parseInt(_[0].split("/")[1],10)<33,d=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,C=p.match(/Version\/(.*?) /),T=d&&C&&parseInt(C[1],10)<15;return r._codecs={mp3:!!(!g&&(c||u.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!c,opus:!!u.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!u.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(u.canPlayType('audio/wav; codecs="1"')||u.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!u.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!u.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(u.canPlayType("audio/x-m4a;")||u.canPlayType("audio/m4a;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(u.canPlayType("audio/x-m4b;")||u.canPlayType("audio/m4b;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(u.canPlayType("audio/x-mp4;")||u.canPlayType("audio/mp4;")||u.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!T&&u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!T&&u.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!u.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(u.canPlayType("audio/x-flac;")||u.canPlayType("audio/flac;")).replace(/^no$/,"")},r},_unlockAudio:function(){var r=this||t;if(!(r._audioUnlocked||!r.ctx)){r._audioUnlocked=!1,r.autoUnlock=!1,!r._mobileUnloaded&&r.ctx.sampleRate!==44100&&(r._mobileUnloaded=!0,r.unload()),r._scratchBuffer=r.ctx.createBuffer(1,1,22050);var u=function(c){for(;r._html5AudioPool.length<r.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,r._releaseHtml5Audio(p)}catch{r.noAudio=!0;break}for(var _=0;_<r._howls.length;_++)if(!r._howls[_]._webAudio)for(var g=r._howls[_]._getSoundIds(),d=0;d<g.length;d++){var C=r._howls[_]._soundById(g[d]);C&&C._node&&!C._node._unlocked&&(C._node._unlocked=!0,C._node.load())}r._autoResume();var T=r.ctx.createBufferSource();T.buffer=r._scratchBuffer,T.connect(r.ctx.destination),typeof T.start>"u"?T.noteOn(0):T.start(0),typeof r.ctx.resume=="function"&&r.ctx.resume(),T.onended=function(){T.disconnect(0),r._audioUnlocked=!0,document.removeEventListener("touchstart",u,!0),document.removeEventListener("touchend",u,!0),document.removeEventListener("click",u,!0),document.removeEventListener("keydown",u,!0);for(var b=0;b<r._howls.length;b++)r._howls[b]._emit("unlock")}};return document.addEventListener("touchstart",u,!0),document.addEventListener("touchend",u,!0),document.addEventListener("click",u,!0),document.addEventListener("keydown",u,!0),r}},_obtainHtml5Audio:function(){var r=this||t;if(r._html5AudioPool.length)return r._html5AudioPool.pop();var u=new Audio().play();return u&&typeof Promise<"u"&&(u instanceof Promise||typeof u.then=="function")&&u.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(r){var u=this||t;return r._unlocked&&u._html5AudioPool.push(r),u},_autoSuspend:function(){var r=this;if(!(!r.autoSuspend||!r.ctx||typeof r.ctx.suspend>"u"||!t.usingWebAudio)){for(var u=0;u<r._howls.length;u++)if(r._howls[u]._webAudio){for(var c=0;c<r._howls[u]._sounds.length;c++)if(!r._howls[u]._sounds[c]._paused)return r}return r._suspendTimer&&clearTimeout(r._suspendTimer),r._suspendTimer=setTimeout(function(){if(!!r.autoSuspend){r._suspendTimer=null,r.state="suspending";var p=function(){r.state="suspended",r._resumeAfterSuspend&&(delete r._resumeAfterSuspend,r._autoResume())};r.ctx.suspend().then(p,p)}},3e4),r}},_autoResume:function(){var r=this;if(!(!r.ctx||typeof r.ctx.resume>"u"||!t.usingWebAudio))return r.state==="running"&&r.ctx.state!=="interrupted"&&r._suspendTimer?(clearTimeout(r._suspendTimer),r._suspendTimer=null):r.state==="suspended"||r.state==="running"&&r.ctx.state==="interrupted"?(r.ctx.resume().then(function(){r.state="running";for(var u=0;u<r._howls.length;u++)r._howls[u]._emit("resume")}),r._suspendTimer&&(clearTimeout(r._suspendTimer),r._suspendTimer=null)):r.state==="suspending"&&(r._resumeAfterSuspend=!0),r}};var t=new e,i=function(r){var u=this;if(!r.src||r.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}u.init(r)};i.prototype={init:function(r){var u=this;return t.ctx||h(),u._autoplay=r.autoplay||!1,u._format=typeof r.format!="string"?r.format:[r.format],u._html5=r.html5||!1,u._muted=r.mute||!1,u._loop=r.loop||!1,u._pool=r.pool||5,u._preload=typeof r.preload=="boolean"||r.preload==="metadata"?r.preload:!0,u._rate=r.rate||1,u._sprite=r.sprite||{},u._src=typeof r.src!="string"?r.src:[r.src],u._volume=r.volume!==void 0?r.volume:1,u._xhr={method:r.xhr&&r.xhr.method?r.xhr.method:"GET",headers:r.xhr&&r.xhr.headers?r.xhr.headers:null,withCredentials:r.xhr&&r.xhr.withCredentials?r.xhr.withCredentials:!1},u._duration=0,u._state="unloaded",u._sounds=[],u._endTimers={},u._queue=[],u._playLock=!1,u._onend=r.onend?[{fn:r.onend}]:[],u._onfade=r.onfade?[{fn:r.onfade}]:[],u._onload=r.onload?[{fn:r.onload}]:[],u._onloaderror=r.onloaderror?[{fn:r.onloaderror}]:[],u._onplayerror=r.onplayerror?[{fn:r.onplayerror}]:[],u._onpause=r.onpause?[{fn:r.onpause}]:[],u._onplay=r.onplay?[{fn:r.onplay}]:[],u._onstop=r.onstop?[{fn:r.onstop}]:[],u._onmute=r.onmute?[{fn:r.onmute}]:[],u._onvolume=r.onvolume?[{fn:r.onvolume}]:[],u._onrate=r.onrate?[{fn:r.onrate}]:[],u._onseek=r.onseek?[{fn:r.onseek}]:[],u._onunlock=r.onunlock?[{fn:r.onunlock}]:[],u._onresume=[],u._webAudio=t.usingWebAudio&&!u._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(u),u._autoplay&&u._queue.push({event:"play",action:function(){u.play()}}),u._preload&&u._preload!=="none"&&u.load(),u},load:function(){var r=this,u=null;if(t.noAudio){r._emit("loaderror",null,"No audio support.");return}typeof r._src=="string"&&(r._src=[r._src]);for(var c=0;c<r._src.length;c++){var p,_;if(r._format&&r._format[c])p=r._format[c];else{if(_=r._src[c],typeof _!="string"){r._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(_),p||(p=/\.([^.]+)$/.exec(_.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&t.codecs(p)){u=r._src[c];break}}if(!u){r._emit("loaderror",null,"No codec support for selected audio sources.");return}return r._src=u,r._state="loading",window.location.protocol==="https:"&&u.slice(0,5)==="http:"&&(r._html5=!0,r._webAudio=!1),new o(r),r._webAudio&&s(r),r},play:function(r,u){var c=this,p=null;if(typeof r=="number")p=r,r=null;else{if(typeof r=="string"&&c._state==="loaded"&&!c._sprite[r])return null;if(typeof r>"u"&&(r="__default",!c._playLock)){for(var _=0,g=0;g<c._sounds.length;g++)c._sounds[g]._paused&&!c._sounds[g]._ended&&(_++,p=c._sounds[g]._id);_===1?r=null:p=null}}var d=p?c._soundById(p):c._inactiveSound();if(!d)return null;if(p&&!r&&(r=d._sprite||"__default"),c._state!=="loaded"){d._sprite=r,d._ended=!1;var C=d._id;return c._queue.push({event:"play",action:function(){c.play(C)}}),C}if(p&&!d._paused)return u||c._loadQueue("play"),d._id;c._webAudio&&t._autoResume();var T=Math.max(0,d._seek>0?d._seek:c._sprite[r][0]/1e3),b=Math.max(0,(c._sprite[r][0]+c._sprite[r][1])/1e3-T),v=b*1e3/Math.abs(d._rate),B=c._sprite[r][0]/1e3,A=(c._sprite[r][0]+c._sprite[r][1])/1e3;d._sprite=r,d._ended=!1;var O=function(){d._paused=!1,d._seek=T,d._start=B,d._stop=A,d._loop=!!(d._loop||c._sprite[r][2])};if(T>=A){c._ended(d);return}var V=d._node;if(c._webAudio){var W=function(){c._playLock=!1,O(),c._refreshBuffer(d);var E=d._muted||c._muted?0:d._volume;V.gain.setValueAtTime(E,t.ctx.currentTime),d._playStart=t.ctx.currentTime,typeof V.bufferSource.start>"u"?d._loop?V.bufferSource.noteGrainOn(0,T,86400):V.bufferSource.noteGrainOn(0,T,b):d._loop?V.bufferSource.start(0,T,86400):V.bufferSource.start(0,T,b),v!==1/0&&(c._endTimers[d._id]=setTimeout(c._ended.bind(c,d),v)),u||setTimeout(function(){c._emit("play",d._id),c._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?W():(c._playLock=!0,c.once("resume",W),c._clearTimer(d._id))}else{var I=function(){V.currentTime=T,V.muted=d._muted||c._muted||t._muted||V.muted,V.volume=d._volume*t.volume(),V.playbackRate=d._rate;try{var E=V.play();if(E&&typeof Promise<"u"&&(E instanceof Promise||typeof E.then=="function")?(c._playLock=!0,O(),E.then(function(){c._playLock=!1,V._unlocked=!0,u?c._loadQueue():c._emit("play",d._id)}).catch(function(){c._playLock=!1,c._emit("playerror",d._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),d._ended=!0,d._paused=!0})):u||(c._playLock=!1,O(),c._emit("play",d._id)),V.playbackRate=d._rate,V.paused){c._emit("playerror",d._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}r!=="__default"||d._loop?c._endTimers[d._id]=setTimeout(c._ended.bind(c,d),v):(c._endTimers[d._id]=function(){c._ended(d),V.removeEventListener("ended",c._endTimers[d._id],!1)},V.addEventListener("ended",c._endTimers[d._id],!1))}catch(L){c._emit("playerror",d._id,L)}};V.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(V.src=c._src,V.load());var j=window&&window.ejecta||!V.readyState&&t._navigator.isCocoonJS;if(V.readyState>=3||j)I();else{c._playLock=!0,c._state="loading";var k=function(){c._state="loaded",I(),V.removeEventListener(t._canPlayEvent,k,!1)};V.addEventListener(t._canPlayEvent,k,!1),c._clearTimer(d._id)}}return d._id},pause:function(r){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"pause",action:function(){u.pause(r)}}),u;for(var c=u._getSoundIds(r),p=0;p<c.length;p++){u._clearTimer(c[p]);var _=u._soundById(c[p]);if(_&&!_._paused&&(_._seek=u.seek(c[p]),_._rateSeek=0,_._paused=!0,u._stopFade(c[p]),_._node))if(u._webAudio){if(!_._node.bufferSource)continue;typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),u._cleanBuffer(_._node)}else(!isNaN(_._node.duration)||_._node.duration===1/0)&&_._node.pause();arguments[1]||u._emit("pause",_?_._id:null)}return u},stop:function(r,u){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"stop",action:function(){c.stop(r)}}),c;for(var p=c._getSoundIds(r),_=0;_<p.length;_++){c._clearTimer(p[_]);var g=c._soundById(p[_]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,c._stopFade(p[_]),g._node&&(c._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),c._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&c._clearSound(g._node))),u||c._emit("stop",g._id))}return c},mute:function(r,u){var c=this;if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"mute",action:function(){c.mute(r,u)}}),c;if(typeof u>"u")if(typeof r=="boolean")c._muted=r;else return c._muted;for(var p=c._getSoundIds(u),_=0;_<p.length;_++){var g=c._soundById(p[_]);g&&(g._muted=r,g._interval&&c._stopFade(g._id),c._webAudio&&g._node?g._node.gain.setValueAtTime(r?0:g._volume,t.ctx.currentTime):g._node&&(g._node.muted=t._muted?!0:r),c._emit("mute",g._id))}return c},volume:function(){var r=this,u=arguments,c,p;if(u.length===0)return r._volume;if(u.length===1||u.length===2&&typeof u[1]>"u"){var _=r._getSoundIds(),g=_.indexOf(u[0]);g>=0?p=parseInt(u[0],10):c=parseFloat(u[0])}else u.length>=2&&(c=parseFloat(u[0]),p=parseInt(u[1],10));var d;if(typeof c<"u"&&c>=0&&c<=1){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,u)}}),r;typeof p>"u"&&(r._volume=c),p=r._getSoundIds(p);for(var C=0;C<p.length;C++)d=r._soundById(p[C]),d&&(d._volume=c,u[2]||r._stopFade(p[C]),r._webAudio&&d._node&&!d._muted?d._node.gain.setValueAtTime(c,t.ctx.currentTime):d._node&&!d._muted&&(d._node.volume=c*t.volume()),r._emit("volume",d._id))}else return d=p?r._soundById(p):r._sounds[0],d?d._volume:0;return r},fade:function(r,u,c,p){var _=this;if(_._state!=="loaded"||_._playLock)return _._queue.push({event:"fade",action:function(){_.fade(r,u,c,p)}}),_;r=Math.min(Math.max(0,parseFloat(r)),1),u=Math.min(Math.max(0,parseFloat(u)),1),c=parseFloat(c),_.volume(r,p);for(var g=_._getSoundIds(p),d=0;d<g.length;d++){var C=_._soundById(g[d]);if(C){if(p||_._stopFade(g[d]),_._webAudio&&!C._muted){var T=t.ctx.currentTime,b=T+c/1e3;C._volume=r,C._node.gain.setValueAtTime(r,T),C._node.gain.linearRampToValueAtTime(u,b)}_._startFadeInterval(C,r,u,c,g[d],typeof p>"u")}}return _},_startFadeInterval:function(r,u,c,p,_,g){var d=this,C=u,T=c-u,b=Math.abs(T/.01),v=Math.max(4,b>0?p/b:p),B=Date.now();r._fadeTo=c,r._interval=setInterval(function(){var A=(Date.now()-B)/p;B=Date.now(),C+=T*A,C=Math.round(C*100)/100,T<0?C=Math.max(c,C):C=Math.min(c,C),d._webAudio?r._volume=C:d.volume(C,r._id,!0),g&&(d._volume=C),(c<u&&C<=c||c>u&&C>=c)&&(clearInterval(r._interval),r._interval=null,r._fadeTo=null,d.volume(c,r._id),d._emit("fade",r._id))},v)},_stopFade:function(r){var u=this,c=u._soundById(r);return c&&c._interval&&(u._webAudio&&c._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(c._interval),c._interval=null,u.volume(c._fadeTo,r),c._fadeTo=null,u._emit("fade",r)),u},loop:function(){var r=this,u=arguments,c,p,_;if(u.length===0)return r._loop;if(u.length===1)if(typeof u[0]=="boolean")c=u[0],r._loop=c;else return _=r._soundById(parseInt(u[0],10)),_?_._loop:!1;else u.length===2&&(c=u[0],p=parseInt(u[1],10));for(var g=r._getSoundIds(p),d=0;d<g.length;d++)_=r._soundById(g[d]),_&&(_._loop=c,r._webAudio&&_._node&&_._node.bufferSource&&(_._node.bufferSource.loop=c,c&&(_._node.bufferSource.loopStart=_._start||0,_._node.bufferSource.loopEnd=_._stop,r.playing(g[d])&&(r.pause(g[d],!0),r.play(g[d],!0)))));return r},rate:function(){var r=this,u=arguments,c,p;if(u.length===0)p=r._sounds[0]._id;else if(u.length===1){var _=r._getSoundIds(),g=_.indexOf(u[0]);g>=0?p=parseInt(u[0],10):c=parseFloat(u[0])}else u.length===2&&(c=parseFloat(u[0]),p=parseInt(u[1],10));var d;if(typeof c=="number"){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,u)}}),r;typeof p>"u"&&(r._rate=c),p=r._getSoundIds(p);for(var C=0;C<p.length;C++)if(d=r._soundById(p[C]),d){r.playing(p[C])&&(d._rateSeek=r.seek(p[C]),d._playStart=r._webAudio?t.ctx.currentTime:d._playStart),d._rate=c,r._webAudio&&d._node&&d._node.bufferSource?d._node.bufferSource.playbackRate.setValueAtTime(c,t.ctx.currentTime):d._node&&(d._node.playbackRate=c);var T=r.seek(p[C]),b=(r._sprite[d._sprite][0]+r._sprite[d._sprite][1])/1e3-T,v=b*1e3/Math.abs(d._rate);(r._endTimers[p[C]]||!d._paused)&&(r._clearTimer(p[C]),r._endTimers[p[C]]=setTimeout(r._ended.bind(r,d),v)),r._emit("rate",d._id)}}else return d=r._soundById(p),d?d._rate:r._rate;return r},seek:function(){var r=this,u=arguments,c,p;if(u.length===0)r._sounds.length&&(p=r._sounds[0]._id);else if(u.length===1){var _=r._getSoundIds(),g=_.indexOf(u[0]);g>=0?p=parseInt(u[0],10):r._sounds.length&&(p=r._sounds[0]._id,c=parseFloat(u[0]))}else u.length===2&&(c=parseFloat(u[0]),p=parseInt(u[1],10));if(typeof p>"u")return 0;if(typeof c=="number"&&(r._state!=="loaded"||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,u)}}),r;var d=r._soundById(p);if(d)if(typeof c=="number"&&c>=0){var C=r.playing(p);C&&r.pause(p,!0),d._seek=c,d._ended=!1,r._clearTimer(p),!r._webAudio&&d._node&&!isNaN(d._node.duration)&&(d._node.currentTime=c);var T=function(){C&&r.play(p,!0),r._emit("seek",p)};if(C&&!r._webAudio){var b=function(){r._playLock?setTimeout(b,0):T()};setTimeout(b,0)}else T()}else if(r._webAudio){var v=r.playing(p)?t.ctx.currentTime-d._playStart:0,B=d._rateSeek?d._rateSeek-d._seek:0;return d._seek+(B+v*Math.abs(d._rate))}else return d._node.currentTime;return r},playing:function(r){var u=this;if(typeof r=="number"){var c=u._soundById(r);return c?!c._paused:!1}for(var p=0;p<u._sounds.length;p++)if(!u._sounds[p]._paused)return!0;return!1},duration:function(r){var u=this,c=u._duration,p=u._soundById(r);return p&&(c=u._sprite[p._sprite][1]/1e3),c},state:function(){return this._state},unload:function(){for(var r=this,u=r._sounds,c=0;c<u.length;c++)u[c]._paused||r.stop(u[c]._id),r._webAudio||(r._clearSound(u[c]._node),u[c]._node.removeEventListener("error",u[c]._errorFn,!1),u[c]._node.removeEventListener(t._canPlayEvent,u[c]._loadFn,!1),u[c]._node.removeEventListener("ended",u[c]._endFn,!1),t._releaseHtml5Audio(u[c]._node)),delete u[c]._node,r._clearTimer(u[c]._id);var p=t._howls.indexOf(r);p>=0&&t._howls.splice(p,1);var _=!0;for(c=0;c<t._howls.length;c++)if(t._howls[c]._src===r._src||r._src.indexOf(t._howls[c]._src)>=0){_=!1;break}return n&&_&&delete n[r._src],t.noAudio=!1,r._state="unloaded",r._sounds=[],r=null,null},on:function(r,u,c,p){var _=this,g=_["_on"+r];return typeof u=="function"&&g.push(p?{id:c,fn:u,once:p}:{id:c,fn:u}),_},off:function(r,u,c){var p=this,_=p["_on"+r],g=0;if(typeof u=="number"&&(c=u,u=null),u||c)for(g=0;g<_.length;g++){var d=c===_[g].id;if(u===_[g].fn&&d||!u&&d){_.splice(g,1);break}}else if(r)p["_on"+r]=[];else{var C=Object.keys(p);for(g=0;g<C.length;g++)C[g].indexOf("_on")===0&&Array.isArray(p[C[g]])&&(p[C[g]]=[])}return p},once:function(r,u,c){var p=this;return p.on(r,u,c,1),p},_emit:function(r,u,c){for(var p=this,_=p["_on"+r],g=_.length-1;g>=0;g--)(!_[g].id||_[g].id===u||r==="load")&&(setTimeout(function(d){d.call(this,u,c)}.bind(p,_[g].fn),0),_[g].once&&p.off(r,_[g].fn,_[g].id));return p._loadQueue(r),p},_loadQueue:function(r){var u=this;if(u._queue.length>0){var c=u._queue[0];c.event===r&&(u._queue.shift(),u._loadQueue()),r||c.action()}return u},_ended:function(r){var u=this,c=r._sprite;if(!u._webAudio&&r._node&&!r._node.paused&&!r._node.ended&&r._node.currentTime<r._stop)return setTimeout(u._ended.bind(u,r),100),u;var p=!!(r._loop||u._sprite[c][2]);if(u._emit("end",r._id),!u._webAudio&&p&&u.stop(r._id,!0).play(r._id),u._webAudio&&p){u._emit("play",r._id),r._seek=r._start||0,r._rateSeek=0,r._playStart=t.ctx.currentTime;var _=(r._stop-r._start)*1e3/Math.abs(r._rate);u._endTimers[r._id]=setTimeout(u._ended.bind(u,r),_)}return u._webAudio&&!p&&(r._paused=!0,r._ended=!0,r._seek=r._start||0,r._rateSeek=0,u._clearTimer(r._id),u._cleanBuffer(r._node),t._autoSuspend()),!u._webAudio&&!p&&u.stop(r._id,!0),u},_clearTimer:function(r){var u=this;if(u._endTimers[r]){if(typeof u._endTimers[r]!="function")clearTimeout(u._endTimers[r]);else{var c=u._soundById(r);c&&c._node&&c._node.removeEventListener("ended",u._endTimers[r],!1)}delete u._endTimers[r]}return u},_soundById:function(r){for(var u=this,c=0;c<u._sounds.length;c++)if(r===u._sounds[c]._id)return u._sounds[c];return null},_inactiveSound:function(){var r=this;r._drain();for(var u=0;u<r._sounds.length;u++)if(r._sounds[u]._ended)return r._sounds[u].reset();return new o(r)},_drain:function(){var r=this,u=r._pool,c=0,p=0;if(!(r._sounds.length<u)){for(p=0;p<r._sounds.length;p++)r._sounds[p]._ended&&c++;for(p=r._sounds.length-1;p>=0;p--){if(c<=u)return;r._sounds[p]._ended&&(r._webAudio&&r._sounds[p]._node&&r._sounds[p]._node.disconnect(0),r._sounds.splice(p,1),c--)}}},_getSoundIds:function(r){var u=this;if(typeof r>"u"){for(var c=[],p=0;p<u._sounds.length;p++)c.push(u._sounds[p]._id);return c}else return[r]},_refreshBuffer:function(r){var u=this;return r._node.bufferSource=t.ctx.createBufferSource(),r._node.bufferSource.buffer=n[u._src],r._panner?r._node.bufferSource.connect(r._panner):r._node.bufferSource.connect(r._node),r._node.bufferSource.loop=r._loop,r._loop&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop||0),r._node.bufferSource.playbackRate.setValueAtTime(r._rate,t.ctx.currentTime),u},_cleanBuffer:function(r){var u=this,c=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&r.bufferSource&&(r.bufferSource.onended=null,r.bufferSource.disconnect(0),c))try{r.bufferSource.buffer=t._scratchBuffer}catch{}return r.bufferSource=null,u},_clearSound:function(r){var u=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);u||(r.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var o=function(r){this._parent=r,this.init()};o.prototype={init:function(){var r=this,u=r._parent;return r._muted=u._muted,r._loop=u._loop,r._volume=u._volume,r._rate=u._rate,r._seek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,u._sounds.push(r),r.create(),r},create:function(){var r=this,u=r._parent,c=t._muted||r._muted||r._parent._muted?0:r._volume;return u._webAudio?(r._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),r._node.gain.setValueAtTime(c,t.ctx.currentTime),r._node.paused=!0,r._node.connect(t.masterGain)):t.noAudio||(r._node=t._obtainHtml5Audio(),r._errorFn=r._errorListener.bind(r),r._node.addEventListener("error",r._errorFn,!1),r._loadFn=r._loadListener.bind(r),r._node.addEventListener(t._canPlayEvent,r._loadFn,!1),r._endFn=r._endListener.bind(r),r._node.addEventListener("ended",r._endFn,!1),r._node.src=u._src,r._node.preload=u._preload===!0?"auto":u._preload,r._node.volume=c*t.volume(),r._node.load()),r},reset:function(){var r=this,u=r._parent;return r._muted=u._muted,r._loop=u._loop,r._volume=u._volume,r._rate=u._rate,r._seek=0,r._rateSeek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++t._counter,r},_errorListener:function(){var r=this;r._parent._emit("loaderror",r._id,r._node.error?r._node.error.code:0),r._node.removeEventListener("error",r._errorFn,!1)},_loadListener:function(){var r=this,u=r._parent;u._duration=Math.ceil(r._node.duration*10)/10,Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue()),r._node.removeEventListener(t._canPlayEvent,r._loadFn,!1)},_endListener:function(){var r=this,u=r._parent;u._duration===1/0&&(u._duration=Math.ceil(r._node.duration*10)/10,u._sprite.__default[1]===1/0&&(u._sprite.__default[1]=u._duration*1e3),u._ended(r)),r._node.removeEventListener("ended",r._endFn,!1)}};var n={},s=function(r){var u=r._src;if(n[u]){r._duration=n[u].duration,m(r);return}if(/^data:[^;]+;base64,/.test(u)){for(var c=atob(u.split(",")[1]),p=new Uint8Array(c.length),_=0;_<c.length;++_)p[_]=c.charCodeAt(_);l(p.buffer,r)}else{var g=new XMLHttpRequest;g.open(r._xhr.method,u,!0),g.withCredentials=r._xhr.withCredentials,g.responseType="arraybuffer",r._xhr.headers&&Object.keys(r._xhr.headers).forEach(function(d){g.setRequestHeader(d,r._xhr.headers[d])}),g.onload=function(){var d=(g.status+"")[0];if(d!=="0"&&d!=="2"&&d!=="3"){r._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,r)},g.onerror=function(){r._webAudio&&(r._html5=!0,r._webAudio=!1,r._sounds=[],delete n[u],r.load())},a(g)}},a=function(r){try{r.send()}catch{r.onerror()}},l=function(r,u){var c=function(){u._emit("loaderror",null,"Decoding audio data failed.")},p=function(_){_&&u._sounds.length>0?(n[u._src]=_,m(u,_)):c()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(r).then(p).catch(c):t.ctx.decodeAudioData(r,p,c)},m=function(r,u){u&&!r._duration&&(r._duration=u.duration),Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue())},h=function(){if(!!t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var r=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),u=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),c=u?parseInt(u[1],10):null;if(r&&c&&c<9){var p=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!p&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:i}}),typeof J<"u"&&(J.Howler=t,J.Howl=i),typeof global<"u"?(global.HowlerGlobal=e,global.Howler=t,global.Howl=i,global.Sound=o):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=i,window.Sound=o)})();(function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var i=this;if(!i.ctx||!i.ctx.listener)return i;for(var o=i._howls.length-1;o>=0;o--)i._howls[o].stereo(t);return i},HowlerGlobal.prototype.pos=function(t,i,o){var n=this;if(!n.ctx||!n.ctx.listener)return n;if(i=typeof i!="number"?n._pos[1]:i,o=typeof o!="number"?n._pos[2]:o,typeof t=="number")n._pos=[t,i,o],typeof n.ctx.listener.positionX<"u"?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]);else return n._pos;return n},HowlerGlobal.prototype.orientation=function(t,i,o,n,s,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var m=l._orientation;if(i=typeof i!="number"?m[1]:i,o=typeof o!="number"?m[2]:o,n=typeof n!="number"?m[3]:n,s=typeof s!="number"?m[4]:s,a=typeof a!="number"?m[5]:a,typeof t=="number")l._orientation=[t,i,o,n,s,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(t,i,o,n,s,a);else return m;return l},Howl.prototype.init=function(t){return function(i){var o=this;return o._orientation=i.orientation||[1,0,0],o._stereo=i.stereo||null,o._pos=i.pos||null,o._pannerAttr={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:360,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:360,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:0,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:"inverse",maxDistance:typeof i.maxDistance<"u"?i.maxDistance:1e4,panningModel:typeof i.panningModel<"u"?i.panningModel:"HRTF",refDistance:typeof i.refDistance<"u"?i.refDistance:1,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:1},o._onstereo=i.onstereo?[{fn:i.onstereo}]:[],o._onpos=i.onpos?[{fn:i.onpos}]:[],o._onorientation=i.onorientation?[{fn:i.onorientation}]:[],t.call(this,i)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"stereo",action:function(){o.stereo(t,i)}}),o;var n=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof i>"u")if(typeof t=="number")o._stereo=t,o._pos=[t,0,0];else return o._stereo;for(var s=o._getSoundIds(i),a=0;a<s.length;a++){var l=o._soundById(s[a]);if(l)if(typeof t=="number")l._stereo=t,l._pos=[t,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,n),n==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(t,0,0):l._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),o._emit("stereo",l._id);else return l._stereo}return o},Howl.prototype.pos=function(t,i,o,n){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"pos",action:function(){s.pos(t,i,o,n)}}),s;if(i=typeof i!="number"?0:i,o=typeof o!="number"?-.5:o,typeof n>"u")if(typeof t=="number")s._pos=[t,i,o];else return s._pos;for(var a=s._getSoundIds(n),l=0;l<a.length;l++){var m=s._soundById(a[l]);if(m)if(typeof t=="number")m._pos=[t,i,o],m._node&&((!m._panner||m._panner.pan)&&e(m,"spatial"),typeof m._panner.positionX<"u"?(m._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):m._panner.setPosition(t,i,o)),s._emit("pos",m._id);else return m._pos}return s},Howl.prototype.orientation=function(t,i,o,n){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"orientation",action:function(){s.orientation(t,i,o,n)}}),s;if(i=typeof i!="number"?s._orientation[1]:i,o=typeof o!="number"?s._orientation[2]:o,typeof n>"u")if(typeof t=="number")s._orientation=[t,i,o];else return s._orientation;for(var a=s._getSoundIds(n),l=0;l<a.length;l++){var m=s._soundById(a[l]);if(m)if(typeof t=="number")m._orientation=[t,i,o],m._node&&(m._panner||(m._pos||(m._pos=s._pos||[0,0,-.5]),e(m,"spatial")),typeof m._panner.orientationX<"u"?(m._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),m._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),m._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):m._panner.setOrientation(t,i,o)),s._emit("orientation",m._id);else return m._orientation}return s},Howl.prototype.pannerAttr=function(){var t=this,i=arguments,o,n,s;if(!t._webAudio)return t;if(i.length===0)return t._pannerAttr;if(i.length===1)if(typeof i[0]=="object")o=i[0],typeof n>"u"&&(o.pannerAttr||(o.pannerAttr={coneInnerAngle:o.coneInnerAngle,coneOuterAngle:o.coneOuterAngle,coneOuterGain:o.coneOuterGain,distanceModel:o.distanceModel,maxDistance:o.maxDistance,refDistance:o.refDistance,rolloffFactor:o.rolloffFactor,panningModel:o.panningModel}),t._pannerAttr={coneInnerAngle:typeof o.pannerAttr.coneInnerAngle<"u"?o.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof o.pannerAttr.coneOuterAngle<"u"?o.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof o.pannerAttr.coneOuterGain<"u"?o.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof o.pannerAttr.distanceModel<"u"?o.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof o.pannerAttr.maxDistance<"u"?o.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof o.pannerAttr.refDistance<"u"?o.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof o.pannerAttr.rolloffFactor<"u"?o.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof o.pannerAttr.panningModel<"u"?o.pannerAttr.panningModel:t._panningModel});else return s=t._soundById(parseInt(i[0],10)),s?s._pannerAttr:t._pannerAttr;else i.length===2&&(o=i[0],n=parseInt(i[1],10));for(var a=t._getSoundIds(n),l=0;l<a.length;l++)if(s=t._soundById(a[l]),s){var m=s._pannerAttr;m={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:m.coneInnerAngle,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:m.coneOuterAngle,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:m.coneOuterGain,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:m.distanceModel,maxDistance:typeof o.maxDistance<"u"?o.maxDistance:m.maxDistance,refDistance:typeof o.refDistance<"u"?o.refDistance:m.refDistance,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:m.rolloffFactor,panningModel:typeof o.panningModel<"u"?o.panningModel:m.panningModel};var h=s._panner;h?(h.coneInnerAngle=m.coneInnerAngle,h.coneOuterAngle=m.coneOuterAngle,h.coneOuterGain=m.coneOuterGain,h.distanceModel=m.distanceModel,h.maxDistance=m.maxDistance,h.refDistance=m.refDistance,h.rolloffFactor=m.rolloffFactor,h.panningModel=m.panningModel):(s._pos||(s._pos=t._pos||[0,0,-.5]),e(s,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var i=this,o=i._parent;i._orientation=o._orientation,i._stereo=o._stereo,i._pos=o._pos,i._pannerAttr=o._pannerAttr,t.call(this),i._stereo?o.stereo(i._stereo):i._pos&&o.pos(i._pos[0],i._pos[1],i._pos[2],i._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var i=this,o=i._parent;return i._orientation=o._orientation,i._stereo=o._stereo,i._pos=o._pos,i._pannerAttr=o._pannerAttr,i._stereo?o.stereo(i._stereo):i._pos?o.pos(i._pos[0],i._pos[1],i._pos[2],i._id):i._panner&&(i._panner.disconnect(0),i._panner=void 0,o._refreshBuffer(i)),t.call(this)}}(Sound.prototype.reset);var e=function(t,i){i=i||"spatial",i==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()});var mo={};var pt,Gt=w(()=>{pt=ht($());WL.registerComponent("pp-audio-listener",{_mySpatial:{type:WL.Type.Bool,default:!0}},{init:function(){this._myOrigin=new Float32Array(3),this._myForward=new Float32Array(3),this._myUp=new Float32Array(3)},update:function(){!this._mySpatial||(this.object.pp_getPosition(this._myOrigin),this.object.pp_getForward(this._myForward),this.object.pp_getUp(this._myUp),pt.Howler.pos(this._myOrigin[0],this._myOrigin[1],this._myOrigin[2]),pt.Howler.orientation(this._myForward[0],this._myForward[1],this._myForward[2],this._myUp[0],this._myUp[1],this._myUp[2]))}})});var Qt=S(()=>{WL.registerComponent("pp-audio-manager",{},{init:function(){PP.myAudioManager=new PP.AudioManagerClass},start:function(){},update:function(e){}});PP.myAudioManager=null});var co={};var tt,zt=w(()=>{tt=ht($());PP.AudioManager=class{constructor(){this._myAudioSetupMap=new Map}createAudioPlayer(t){return this.getAudioSetup(t)!=null?new PP.AudioPlayer(this.getAudioSetup(t)):null}getAudioSetup(t){return this._myAudioSetupMap.get(t)}addAudioSetup(t,i,o=!0){this._myAudioSetupMap.set(t,i),o&&this.createAudioPlayer(t)}removeAudioSetup(t){this._myAudioSetupMap.delete(t)}setVolume(t){tt.Howler.volume(t)}setMute(t){tt.Howler.mute(t)}stop(){tt.Howler.stop()}}});var Xt=S(()=>{PP.AudioEvent={END:"end",STOP:"stop",LOAD:"load",LOAD_ERROR:"loaderror",PLAY:"play",PLAY_ERROR:"playerror",PAUSE:"pause",MUTE:"mute",VOLUME:"volume",RATE:"rate",SEEK:"seek",FADE:"fade",UNLOCK:"unlock"};PP.AudioPlayer=class{constructor(t){typeof t=="string"?this._myAudioSetup=new PP.AudioSetup(audioSetupOrAudioFile):this._myAudioSetup=t.clone(),this._myAudio=new Howl({src:[this._myAudioSetup.myAudioFilePath],loop:this._myAudioSetup.myLoop,volume:this._myAudioSetup.myVolume,autoplay:this._myAudioSetup.myAutoplay,rate:this._myAudioSetup.myRate,pool:this._myAudioSetup.myPool,preload:!0}),this._myAudio._pannerAttr.refDistance=this._myAudioSetup.myReferenceDistance,this._myLastAudioID=null,this._myCallbackMap=new Map;for(let i in PP.AudioEvent)this._myCallbackMap.set(PP.AudioEvent[i],new Map);this._addListeners()}play(){let t=this._myAudio.play();t!=null&&(this._myLastAudioID=t,this.updatePosition(this._myAudioSetup.myPosition,!0),this.updatePitch(this._myAudioSetup.myPitch,!0),this.updateVolume(this._myAudioSetup.myVolume,!0))}stop(){this._myAudio.stop()}pause(){this._myAudio.pause()}resume(){this._myAudio.play()}isPlaying(t=!1){let i=!1;return t?i=this._myAudio.playing(this._myLastAudioID):i=this._myAudio.playing(),i}isLoaded(){return this._myAudio.state()=="loaded"}fade(t,i,o,n=!1){this.setVolume(i),n?this._myAudio.fade(t,i,o*1e3,this._myLastAudioID):this._myAudio.fade(t,i,o*1e3)}updatePosition(t,i=!1){this.setPosition(t),this._myAudioSetup.mySpatial&&t&&(i?this._myAudio.pos(t[0],t[1],t[2],this._myLastAudioID):this._myAudio.pos(t[0],t[1],t[2]))}updatePitch(t,i=!1){this.updateRate(t,i)}updateRate(t,i=!1){this.setRate(t),t!=null&&(i?this._myAudio.rate(t,this._myLastAudioID):this._myAudio.rate(t))}updateVolume(t,i=!1){this.setVolume(t),t!=null&&(i?this._myAudio.volume(t,this._myLastAudioID):this._myAudio.volume(t))}setSpatial(t){this._myAudioSetup.mySpatial=t}setPosition(t){this._myAudioSetup.myPosition=t}setPitch(t){this._myAudioSetup.myPitch=t}setRate(t){this._myAudioSetup.myRate=t}setVolume(t){this._myAudioSetup.myVolume=t}getDuration(){return this._myAudio.duration()}getVolume(){return this._myAudioSetup.myVolume}getPitch(){return this._myAudioSetup.myPitch}getRate(){return this._myAudioSetup.myRate}registerAudioEventListener(t,i,o){this._myCallbackMap.get(t).set(i,o)}unregisterAudioEventListener(t,i){this._myCallbackMap.get(t).delete(i)}_addListeners(){for(let t in PP.AudioEvent){let i=PP.AudioEvent[t];this._myAudio.on(i,function(o){let n=this._myCallbackMap.get(i);for(let s of n.values())s(o)}.bind(this))}}}});var Yt=S(()=>{PP.AudioSetup=class{constructor(t=null){this.myAudioFilePath=t?t.slice(0):null,this.myLoop=!1,this.myAutoplay=!1,this.myVolume=1,this._myRate=1,this.myPool=5,this.myPosition=null,this.mySpatial=!0,this.myReferenceDistance=1}clone(){let t=new PP.AudioSetup;return t.myAudioFilePath=this.myAudioFilePath.slice(0),t.myLoop=this.myLoop,t.myAutoplay=this.myAutoplay,t.myVolume=this.myVolume,t.myPitch=this.myPitch,t.myRate=this.myRate,t.myPool=this.myPool,t.myPosition=this.myPosition,t.mySpatial=this.mySpatial,t.myReferenceDistance=this.myReferenceDistance,t}get myPitch(){return this._myRate}get myRate(){return this._myRate}set myPitch(t){this._myRate=t}set myRate(t){this._myRate=t}}});var yo={};var Zt,Kt=w(()=>{Zt=ht($());WL.registerComponent("pp-mute-all",{},{init:function(){},start:function(){Zt.Howler.mute(!0)},update:function(e){}})});var Jt=S(()=>{Number.prototype.get=function(){return this.valueOf()};Object.defineProperty(Number.prototype,"get",{enumerable:!1});PP.NumberOverValue=class{constructor(t,i=null,o=0,n=0,s=PP.EasingFunction.linear,a=null){i==null&&(i=t),this._myStartNumber=t,this._myEndNumber=i,this._myStartInterpolationValue=o,this._myEndInterpolationValue=n,this._myEasingFunction=s,this._myRoundingFunction=a}get(t){let i=this._myEasingFunction(Math.pp_mapToRange(t,this._myStartInterpolationValue,this._myEndInterpolationValue,0,1)),o=Math.pp_lerp(this._myStartNumber,this._myEndNumber,i);return this._myRoundingFunction&&(o=this._myRoundingFunction(o,this._myStartNumber,this._myEndNumber)),o}getAverage(t){return this.get(t)}getRange(t){let i=this.get(t);return[i,i]}getMax(t){return this.get(t)}getMin(t){return this.get(t)}isInside(t,i){return this.get(i)==t}isInsideAngleRange(t,i){return this.isInsideAngleRangeDegrees(t,i)}isInsideAngleRangeDegrees(t,i){let o=this.get(i),n=Math.pp_angleClampDegrees(t),s=Math.pp_angleClampDegrees(o);return n==s}isInsideAngleRangeRadians(t,i){let o=this.get(i),n=Math.pp_angleClampRadians(t),s=Math.pp_angleClampRadians(o);return n==s}};PP.IntOverValue=class extends PP.NumberOverValue{constructor(t,i,o,n,s=PP.EasingFunction.linear,a=null){a==null&&(a=function(l,m,h){let r=null;return m<=h?r=Math.floor(l):r=Math.ceil(l),r}),super(t,i,o,n,s,a)}};PP.NumberRangeOverValue=class{constructor(t,i=null,o=0,n=0,s=PP.EasingFunction.linear,a=null){i==null&&(i=t),this._myStartNumberOverValue=new PP.NumberOverValue(t[0],i[0],o,n,s,a),this._myEndNumberOverValue=new PP.NumberOverValue(t[1],i[1],o,n,s,a),this._myRoundingFunction=a}get(t){let i=this._myStartNumberOverValue.get(t),o=this._myEndNumberOverValue.get(t),n=null;return this._myRoundingFunction?n=Math.pp_randomInt(i,o):n=Math.pp_random(i,o),n}getAverage(t){let i=this._myStartNumberOverValue.get(t),o=this._myEndNumberOverValue.get(t),n=(i+o)/2;return this._myRoundingFunction&&(n=this._myRoundingFunction(n,i,o)),n}getRange(t){let i=this._myStartNumberOverValue.get(t),o=this._myEndNumberOverValue.get(t);return[i,o]}getMax(t){let i=this._myStartNumberOverValue.get(t),o=this._myEndNumberOverValue.get(t);return Math.max(i,o)}getMin(t){let i=this._myStartNumberOverValue.get(t),o=this._myEndNumberOverValue.get(t);return Math.min(i,o)}isInside(t,i){let o=this._myStartNumberOverValue.get(i),n=this._myEndNumberOverValue.get(i),s=Math.min(o,n),a=Math.max(o,n);return t>=s&&t<=a}isInsideAngleRange(t,i){return this.isInsideAngleRangeDegrees(t,i)}isInsideAngleRangeDegrees(t,i){let o=this._myStartNumberOverValue.get(i),n=this._myEndNumberOverValue.get(i);return Math.pp_isInsideAngleRangeDegrees(t,o,n)}isInsideAngleRangeRadians(t,i){let o=this._myStartNumberOverValue.get(i),n=this._myEndNumberOverValue.get(i);return Math.pp_isInsideAngleRangeRadians(t,o,n)}};PP.IntRangeOverValue=class extends PP.NumberRangeOverValue{constructor(t,i,o,n,s=PP.EasingFunction.linear,a=null){a==null&&(a=function(l,m,h){let r=null;return m<=h?r=Math.floor(l):r=Math.ceil(l),r}),super(t,i,o,n,s,a)}}});var $t=S(()=>{PP.ObjectPoolManager=class{constructor(){this._myPoolMap=new Map}addPool(t,i,o=new PP.ObjectPoolParams){if(this._myPoolMap.has(t))console.error("Pool already created with this ID");else{let n=new PP.ObjectPool(i,o);this._myPoolMap.set(t,n)}}increasePool(t,i){let o=this._myPoolMap.get(t);o&&o.increase(i)}increasePoolPercentage(t,i){let o=this._myPoolMap.get(t);o&&o.increasePercentage(i)}getPool(t){return this._myPoolMap.get(t)}getObject(t){return this._myPoolMap.get(t).get()}releaseObject(t,i){this._myPoolMap.get(t).release(i)}};PP.ObjectPoolParams=class{constructor(){this.myInitialPoolSize=0,this.myAmountToAddWhenEmpty=1,this.myPercentageToAddWhenEmpty=.5,this.myCloneParams=void 0,this.myCloneFunctionName=void 0,this.mySetActiveFunctionName=void 0,this.myEqualsFunctionName=void 0,this.myEnableDebugLog=!0}};PP.ObjectPool=class{constructor(t,i){this._myObjectPoolParams=i,this._myPrototype=this._clone(t),this._myAvailableObjects=[],this._myBusyObjects=[],this._addToPool(i.myInitialPoolSize,!1)}get(){let t=this._myAvailableObjects.shift();if(t==null){let i=Math.ceil(this._myBusyObjects.length*this._myObjectPoolParams.myPercentageToAddWhenEmpty);i+=this._myObjectPoolParams.myAmountToAddWhenEmpty,this._addToPool(i,this._myObjectPoolParams.myEnableDebugLog),t=this._myAvailableObjects.shift()}return t!=null&&this._myBusyObjects.push(t),t}release(t){let i=this._myBusyObjects.pp_remove(this._equals.bind(this,t));i&&(this._setActive(i,!1),this._myAvailableObjects.push(i))}increase(t){this._addToPool(t,!1)}increasePercentage(t){let i=Math.ceil((this._myBusyObjects.length+this._myAvailableObjects.length)*t);this._addToPool(i,!1)}_addToPool(t,i){if(!(t<=0)){for(let o=0;o<t;o++)this._myAvailableObjects.push(this._clone(this._myPrototype));i&&console.warn("Added new elements to the pool:",t)}}_clone(t){let i=null;return this._myObjectPoolParams.myCloneFunctionName!=null?i=t[this._myObjectPoolParams.myCloneFunctionName](this._myObjectPoolParams.myCloneParams):t.pp_clone!=null?i=t.pp_clone(this._myObjectPoolParams.myCloneParams):t.clone!=null&&(i=t.clone(this._myObjectPoolParams.myCloneParams)),i==null?console.error("Object not cloneable, pool will return null"):this._setActive(i,!1),i}_setActive(t,i){this._myObjectPoolParams.mySetActiveFunctionName!=null?t[this._myObjectPoolParams.mySetActiveFunctionName](i):t.pp_setActive!=null?t.pp_setActive(i):t.setActive!=null&&t.setActive(i)}_equals(t,i){let o=!1;return this._myObjectPoolParams.myEqualsFunctionName!=null?o=t[this._myObjectPoolParams.myEqualsFunctionName](i):t.pp_equals!=null?o=t.pp_equals(i):t.equals!=null&&(o=t.equals(i)),o}}});var te=S(()=>{PP.PhysXCollisionCollector=class{constructor(t,i=!1){this._myPhysX=t,this._myIsTrigger=i,this._myCollisions=[],this._myCollisionsStart=[],this._myCollisionsEnd=[],this._myUpdateActive=!1,this._myCollisionsStartToProcess=[],this._myCollisionsEndToProcess=[],this._myCollisionCallbackID=null,this._myIsActive=!1,this.setActive(!0),this._myDebugActive=!1,this._myTriggerDesyncFixDelay=new PP.Timer(.1),this._myCollisionCallbacks=new Map,this._myCollisionStartCallbacks=new Map,this._myCollisionEndCallbacks=new Map}getPhysX(){return this._myPhysX}getCollisions(){return this._myCollisions.pp_clone()}getCollisionsStart(){return this._myCollisionsStart.pp_clone()}getCollisionsEnd(){return this._myCollisionsEnd.pp_clone()}setActive(t){this._myIsActive!=t&&(this._myIsActive=t,this._myCollisions=[],this._myCollisionsStart=[],this._myCollisionsEnd=[],this._myUpdateActive=!1,this._myCollisionsStartToProcess=[],this._myCollisionsEndToProcess=[],this._myIsActive?this._myCollisionCallbackID=this._myPhysX.onCollision(this._onCollision.bind(this)):this._myCollisionCallbackID!=null&&(this._myPhysX.removeCollisionCallback(this._myCollisionCallbackID),this._myCollisionCallbackID=null))}setUpdateActive(t){this._myUpdateActive=t}update(t){!this._myIsActive||(this._myUpdateActive=!0,this._myCollisionsStart=this._myCollisionsStartToProcess,this._myCollisionsStartToProcess=[],this._myCollisionsEnd=this._myCollisionsEndToProcess,this._myCollisionsEndToProcess=[],this._myIsTrigger&&this._triggerDesyncFix(t))}destroy(){this._myCollisionCallbackID!=null&&(this._myPhysX.removeCollisionCallback(this._myCollisionCallbackID),this._myCollisionCallbackID=null)}setDebugActive(t){this._myDebugActive=t}registerCollisionEventListener(t,i){this._myCollisionCallbacks.set(t,i)}unregisterCollisionEventListener(t){this._myCollisionCallbacks.delete(t)}registerCollisionStartEventListener(t,i){this._myCollisionStartCallbacks.set(t,i)}unregisterCollisionStartEventListener(t){this._myCollisionStartCallbacks.delete(t)}registerCollisionEndEventListener(t,i){this._myCollisionEndCallbacks.set(t,i)}unregisterCollisionEndEventListener(t){this._myCollisionEndCallbacks.delete(t)}_onCollision(t,i){t==WL.CollisionEventType.Touch||t==WL.CollisionEventType.TriggerTouch?this._onCollisionStart(i):(t==WL.CollisionEventType.TouchLost||t==WL.CollisionEventType.TriggerTouchLost)&&this._onCollisionEnd(i),this._myCollisionCallbacks.size>0&&this._myCollisionCallbacks.forEach(function(o){o(this._myPhysX,i,t)})}_onCollisionStart(t){if(this._myDebugActive){let i=!1;for(let o of this._myCollisions)if(o.pp_equals(t.object)){i=!0;break}i&&console.error("Collision Start on object already collected")}this._myCollisions.push(t.object),this._myUpdateActive&&(this._myCollisionsStartToProcess.push(t.object),this._myCollisionsEndToProcess.pp_removeAll(function(i){return i.pp_equals(t.object)})),this._myDebugActive&&console.log("Collision Start -",this._myCollisions.length),this._myCollisionStartCallbacks.size>0&&this._myCollisionStartCallbacks.forEach(function(i){i(this._myPhysX,t,type)})}_onCollisionEnd(t){if(this._myDebugActive){let i=!1;for(let o of this._myCollisions)if(o.pp_equals(t.object)){i=!0;break}i||console.error("Collision End on object not collected")}this._myCollisions.pp_removeAll(function(i){return i.pp_equals(t.object)}),this._myUpdateActive&&(this._myCollisionsEndToProcess.push(t.object),this._myCollisionsStartToProcess.pp_removeAll(function(i){return i.pp_equals(t.object)})),this._myDebugActive&&console.log("Collision End -",this._myCollisions.length),this._myCollisionEndCallbacks.size>0&&this._myCollisionEndCallbacks.forEach(function(i){i(this._myPhysX,t,type)})}_triggerDesyncFix(t){if(this._myTriggerDesyncFixDelay.update(t),this._myTriggerDesyncFixDelay.isDone()){this._myTriggerDesyncFixDelay.start();let i=this._myCollisions.pp_findAll(function(o){let n=o.pp_getComponent("physx");return n==null||!n.active});if(i.length>0)for(let o of i){let n=o.pp_getComponent("physx");n?this._onCollisionEnd(n):console.error("NO PHYSX, HOW?")}}}}});var ee=S(()=>{PP.SaveManager=class{constructor(){this._mySaveCache=new Map,this._myCommitSavesDelayTimer=new PP.Timer(0,!1),this._myDelaySavesCommit=!0,this._myIDsToCommit=[],this._myCacheDefaultValueOnFail=!0,WL.xrSession&&this._onXRSessionStart(WL.xrSession),WL.onXRSessionStart.push(this._onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this._onXRSessionEnd.bind(this)),this._myClearCallbacks=new Map,this._myDeleteCallbacks=new Map,this._myDeleteIDCallbacks=new Map,this._mySaveCallbacks=new Map,this._mySaveValueChangedCallbacks=new Map,this._mySaveIDCallbacks=new Map,this._mySaveValueChangedIDCallbacks=new Map,this._myCommitSaveCallbacks=new Map,this._myCommitSaveIDCallbacks=new Map,this._myCommitSavesCallbacks=new Map,this._myLoadCallbacks=new Map,this._myLoadIDCallbacks=new Map}setCommitSavesDelay(t){this._myCommitSavesDelayTimer.start(t)}setDelaySavesCommit(t){this._myDelaySavesCommit=t}setCacheDefaultValueOnFail(t){this._myCacheDefaultValueOnFail=t}update(t){this._myCommitSavesDelayTimer.isRunning()&&(this._myCommitSavesDelayTimer.update(t),this._myCommitSavesDelayTimer.isDone()&&this.commitSaves())}save(t,i,o=null){let n=!1;if(this._mySaveCache.has(t)&&(n=this._mySaveCache.get(t)===i),!n)if(this._mySaveCache.set(t,i),this._myDelaySavesCommit&&o==null||o!=null&&o)this._myIDsToCommit.pp_pushUnique(t),this._myCommitSavesDelayTimer.isRunning()||this._myCommitSavesDelayTimer.start();else{let s=this._commitSave(t,!1);if(this._myCommitSavesCallbacks.size>0){let a=!1;this._myCommitSavesCallbacks.forEach(function(l){l(a,s)})}}if(this._mySaveCallbacks.size>0&&this._mySaveCallbacks.forEach(function(s){s(t,i)}),this._mySaveIDCallbacks.size>0){let s=this._mySaveIDCallbacks.get(t);s?.forEach(function(a){a(t,i)})}if(!n&&(this._mySaveValueChangedCallbacks.size>0&&this._mySaveValueChangedCallbacks.forEach(function(s){s(t,i)}),this._mySaveValueChangedIDCallbacks.size>0)){let s=this._mySaveValueChangedIDCallbacks.get(t);s?.forEach(function(a){a(t,i)})}}commitSaves(){if(this._myIDsToCommit.length>0){let t=!1;for(let i of this._myIDsToCommit)if(this._mySaveCache.has(i)){let o=this._commitSave(i,!0);t=t||o}if(this._myIDsToCommit=[],this._myCommitSavesCallbacks.size>0){let i=!0;this._myCommitSavesCallbacks.forEach(function(o){o(i,t)})}}}has(t){return this._mySaveCache.has(t)||PP.SaveUtils.has(t)}delete(t){if(this._mySaveCache.delete(t),PP.SaveUtils.delete(t),this._myDeleteCallbacks.size>0&&this._myDeleteCallbacks.forEach(function(i){i(t)}),this._myDeleteIDCallbacks.size>0){let i=this._myDeleteIDCallbacks.get(t);i?.forEach(function(o){o(t)})}}clear(){this._mySaveCache.clear(),PP.SaveUtils.clear(),this._myClearCallbacks.size>0&&this._myClearCallbacks.forEach(function(t){t()})}load(t,i=null){return this._load(t,i,"load")}loadString(t,i=null){return this._load(t,i,"loadString")}loadNumber(t,i=null){return this._load(t,i,"loadNumber")}loadBool(t,i=null){return this._load(t,i,"loadBool")}getCommitSavesDelay(){return this._myCommitSavesDelayTimer.getDuration()}isDelaySavesCommit(){return this._myDelaySavesCommit}isCacheDefaultValueOnFail(){return this._myCacheDefaultValueOnFail}_commitSave(t,i){let o=this._mySaveCache.get(t),n=!1;try{PP.SaveUtils.save(t,o)}catch{n=!0}if(this._myCommitSaveCallbacks.size>0&&this._myCommitSaveCallbacks.forEach(function(s){s(t,o,i,n)}),this._myCommitSaveIDCallbacks.size>0){let s=this._myCommitSaveIDCallbacks.get(t);s?.forEach(function(a){a(t,o,i,n)})}return n}_load(t,i,o){let n=null,s=!1,a=!1;if(this._mySaveCache.has(t))n=this._mySaveCache.get(t),n==null&&i!=null&&(n=i,this._myCacheDefaultValueOnFail&&this._mySaveCache.set(t,n)),a=!0;else{let l=null;try{l=PP.SaveUtils[o](t,null)}catch{l=null,s=!0}l==null?n=i:n=l,l!=null||this._myCacheDefaultValueOnFail?this._mySaveCache.set(t,n):this._mySaveCache.set(t,null)}if(this._myLoadCallbacks.size>0&&this._myLoadCallbacks.forEach(function(l){l(t,n,a,s)}),this._myLoadIDCallbacks.size>0){let l=this._myLoadIDCallbacks.get(t);l?.forEach(function(m){m(t,n,a,s)})}return n}_onXRSessionStart(t){t.addEventListener("visibilitychange",function(i){i.session.visibilityState!="visible"&&this._onXRSessionInterrupt()}.bind(this))}_onXRSessionEnd(){this._onXRSessionInterrupt()}_onXRSessionInterrupt(){this.commitSaves()}registerClearEventListener(t,i){this._myClearCallbacks.set(t,i)}unregisterClearEventListener(t){this._myClearCallbacks.delete(t)}registerDeleteEventListener(t,i){this._myDeleteCallbacks.set(t,i)}unregisterDeleteEventListener(t){this._myDeleteCallbacks.delete(t)}registerDeleteIDEventListener(t,i,o){let n=this._myDeleteIDCallbacks.get(t);n==null&&(this._myDeleteIDCallbacks.set(t,new Map),n=this._myDeleteIDCallbacks.get(t)),n.set(i,o)}unregisterDeleteIDEventListener(t,i){let o=this._myDeleteIDCallbacks.get(t);o!=null&&(o.delete(i),o.size<=0&&this._myDeleteIDCallbacks.delete(t))}registerSaveEventListener(t,i){this._mySaveCallbacks.set(t,i)}unregisterSaveEventListener(t){this._mySaveCallbacks.delete(t)}registerSaveIDEventListener(t,i,o){let n=this._mySaveIDCallbacks.get(t);n==null&&(this._mySaveIDCallbacks.set(t,new Map),n=this._mySaveIDCallbacks.get(t)),n.set(i,o)}unregisterSaveIDEventListener(t,i){let o=this._mySaveIDCallbacks.get(t);o!=null&&(o.delete(i),o.size<=0&&this._mySaveIDCallbacks.delete(t))}registerSaveValueChangedEventListener(t,i){this._mySaveValueChangedCallbacks.set(t,i)}unregisterSaveValueChangedEventListener(t){this._mySaveValueChangedCallbacks.delete(t)}registerSaveValueChangedIDEventListener(t,i,o){let n=this._mySaveValueChangedIDCallbacks.get(t);n==null&&(this._mySaveValueChangedIDCallbacks.set(t,new Map),n=this._mySaveValueChangedIDCallbacks.get(t)),n.set(i,o)}unregisterSaveValueChangedIDEventListener(t,i){let o=this._mySaveValueChangedIDCallbacks.get(t);o!=null&&(o.delete(i),o.size<=0&&this._mySaveValueChangedIDCallbacks.delete(t))}registerCommitSavesEventListener(t,i){this._myCommitSavesCallbacks.set(t,i)}unregisterCommitSavesEventListener(t){this._myCommitSavesCallbacks.delete(t)}registerCommitSaveEventListener(t,i){this._myCommitSaveCallbacks.set(t,i)}unregisterCommitSaveEventListener(t){this._myCommitSaveCallbacks.delete(t)}registerCommitSaveIDEventListener(t,i,o){let n=this._myCommitSaveIDCallbacks.get(t);n==null&&(this._myCommitSaveIDCallbacks.set(t,new Map),n=this._myCommitSaveIDCallbacks.get(t)),n.set(i,o)}unregisterCommitSaveIDEventListener(t,i){let o=this._myCommitSaveIDCallbacks.get(t);o!=null&&(o.delete(i),o.size<=0&&this._myCommitSaveIDCallbacks.delete(t))}registerLoadEventListener(t,i){this._myLoadCallbacks.set(t,i)}unregisterLoadEventListener(t){this._myLoadCallbacks.delete(t)}registerLoadIDEventListener(t,i,o){let n=this._myLoadIDCallbacks.get(t);n==null&&(this._myLoadIDCallbacks.set(t,new Map),n=this._myLoadIDCallbacks.get(t)),n.set(i,o)}unregisterLoadIDEventListener(t,i){let o=this._myLoadIDCallbacks.get(t);o!=null&&(o.delete(i),o.size<=0&&this._myLoadIDCallbacks.delete(t))}}});var ie=S(()=>{PP.Timer=class{constructor(t,i=!0){this._myDuration=t,this._myOnEndCallbacks=new Map,this._myIsDone=!1,this._myStarted=!1,i?this.start():this.reset()}start(t=null){this.reset(t),this._myStarted=!0}reset(t=null){t!=null&&(this._myDuration=Math.max(0,t)),this._myTimer=this._myDuration,this._myIsDone=!1,this._myStarted=!1}update(t){this.isRunning()&&(this._myTimer=Math.max(0,this._myTimer-t),this._myTimer==0&&this._done())}isDone(){return this._myIsDone}isStarted(){return this._myStarted}isRunning(){return this.isStarted()&&!this.isDone()}getDuration(){return this._myDuration}setDuration(t){this._myDuration=Math.max(0,t)}getTimer(){return this._myTimer}getPercentage(){let t=1;return this._myTimer>0&&(t=(this._myDuration-this._myTimer)/this._myDuration),Math.pp_clamp(t,0,1)}onEnd(t,i=null){this._myOnEndCallbacks.set(i,t)}unregisterOnEnd(t=null){this._myOnEndCallbacks.delete(t)}_done(){if(this._myTimer=0,this._myIsDone=!0,this._myOnEndCallbacks.size>0)for(let t of this._myOnEndCallbacks.values())t()}}});var oe=S(()=>{WL.registerComponent("pp-clear-console-on-session",{},{init:function(){},start:function(){this._myFirstTime=!0,WL.onXRSessionStart.push(function(){this._myFirstTime&&(this._myFirstTime=!1,console.clear())}.bind(this))},update:function(e){}})});var ne=S(()=>{WL.registerComponent("pp-player-height",{_myEyesHeight:{type:WL.Type.Float,default:1.65}},{start:function(){let e=this.object.pp_getPositionLocal();this.object.setPositionLocal([e[0],this._myEyesHeight,e[2]]),WL.xrSession&&this._onXRSessionStart(WL.xrSession),WL.onXRSessionStart.push(this._onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this._onXRSessionEnd.bind(this))},_onXRSessionStart:function(){if(this.active){let e=this.object.pp_getPositionLocal();PP.XRUtils.isReferenceSpaceLocalFloor()?this.object.setPositionLocal([e[0],0,e[2]]):this.object.setPositionLocal([e[0],this._myEyesHeight,e[2]])}},_onXRSessionEnd:function(){if(this.active){let e=this.object.pp_getPositionLocal();this.object.setPositionLocal([e[0],this._myEyesHeight,e[2]])}}})});var se=S(()=>{WL.registerComponent("pp-set-hand-transform",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_myFixForward:{type:WL.Type.Bool,default:!0}},{init:function(){this._myHandPose=new PP.HandPose(PP.InputUtils.getHandednessByIndex(this._myHandedness),this._myFixForward)},start:function(){this._myHandPose.start()},update:function(e){this._myHandPose.update(e),this.object.pp_setTransformLocalQuat(this._myHandPose.getTransformQuat())}})});var re=S(()=>{WL.registerComponent("pp-set-head-transform",{_myFixForward:{type:WL.Type.Bool,default:!0}},{init:function(){this._myHeadPose=new PP.HeadPose(this._myFixForward)},start:function(){this._myHeadPose.start()},update:function(e){this._myHeadPose.update(e),this.object.pp_setTransformLocalQuat(this._myHeadPose.getTransformQuat())}})});var ae=S(()=>{WL.registerComponent("pp-set-hierarchy-active",{_myHierarchyActive:{type:WL.Type.Bool,default:!0},_mySetActiveOn:{type:WL.Type.Enum,values:["init","start","first_update"],default:"init"}},{init:function(){this.active&&this._mySetActiveOn==0&&this.object.pp_setActiveHierarchy(this._myHierarchyActive)},start:function(){this._mySetActiveOn==1&&this.object.pp_setActiveHierarchy(this._myHierarchyActive),this._myFirst=!0},update:function(e){this._mySetActiveOn==2&&this._myFirst&&(this._myFirst=!1,this.object.pp_setActiveHierarchy(this._myHierarchyActive))}})});var le=S(()=>{PP.StateData=class{constructor(t,i){this.myID=t,this.myObject=i}};PP.TransitionData=class{constructor(t,i,o,n,s){this.myID=t,this.myFromState=i,this.myToState=o,this.myObject=n,this.mySkipStateFunction=s}};PP.PendingPerform=class{constructor(t,...i){this.myID=t,this.myArgs=i}};PP.PerformType={IMMEDIATE:0,DELAYED:1};PP.PerformDelayedType={QUEUE:0,KEEP_FIRST:1,KEEP_LAST:2};PP.SkipStateFunction={NONE:0,END:1,START:2,BOTH:3};PP.FSM=class{constructor(t=PP.PerformType.IMMEDIATE,i=PP.PerformDelayedType.QUEUE){this._myCurrentStateData=null,this._myStateMap=new Map,this._myTransitionMap=new Map,this._myDebugLogActive=!1,this._myDebugShowDelayedInfo=!1,this._myDebugLogName="FSM",this._myPerformType=t,this._myPerformDelayedType=i,this._myPendingPerforms=[],this._myInitCallbacks=new Map,this._myInitIDCallbacks=new Map,this._myTransitionCallbacks=new Map,this._myTransitionIDCallbacks=[]}addState(t,i=null){let o=null;!i||typeof i=="function"?(o={},typeof i=="function"?o.update=i:o.update=null,o.clone=function(){let s={};return s.update=this.update,s.clone=this.clone,s}):o=i;let n=new PP.StateData(t,o);this._myStateMap.set(t,n),this._myTransitionMap.set(t,new Map)}addTransition(t,i,o,n=null,s=PP.SkipStateFunction.NONE){let a=null;if(!n||typeof n=="function"?(a={},typeof n=="function"?a.perform=n:a.perform=null,a.clone=function(){let l={};return l.perform=this.perform,l.clone=this.clone,l}):a=n,this.hasState(t)&&this.hasState(i)){let l=this._getTransitionMapFromState(t),m=new PP.TransitionData(o,this.getState(t),this.getState(i),a,s);l.set(o,m)}else!this.hasState(t)&&!this.hasState(i)?console.error("Can't add transition:",o,"- from state not found:",t,"- to state not found:",i):this.hasState(t)?this.hasState(i)||console.error("Can't add transition:",o,"- to state not found:",i):console.error("Can't add transition:",o,"- from state not found:",t)}init(t,i=null,...o){let n=i;if(i&&typeof i=="function"&&(n={},n.performInit=i),this.hasState(t)){let s=this._myStateMap.get(t);if(this._myDebugLogActive&&console.log(this._myDebugLogName,"- Init:",t),n&&n.performInit?n.performInit(this,s,...o):s.myObject&&s.myObject.init&&s.myObject.init(this,s,...o),this._myCurrentStateData=s,this._myInitCallbacks.size>0&&this._myInitCallbacks.forEach(function(a){a(this,s,n,...o)}.bind(this)),this._myInitIDCallbacks.size>0){let a=this._myInitIDCallbacks.get(t);a?.forEach(function(l){l(this,s,n,...o)}.bind(this))}}else this._myDebugLogActive&&console.warn(this._myDebugLogName,"- Init state not found:",t)}update(t,...i){if(this._myPendingPerforms.length>0){for(let o=0;o<this._myPendingPerforms.length;o++)this._perform(this._myPendingPerforms[o].myID,PP.PerformType.DELAYED,...this._myPendingPerforms[o].myArgs);this._myPendingPerforms=[]}this._myCurrentStateData&&this._myCurrentStateData.myObject&&this._myCurrentStateData.myObject.update&&this._myCurrentStateData.myObject.update(t,this,...i)}perform(t,...i){this._myPerformType==PP.PerformType.DELAYED?this.performDelayed(t,...i):this.performImmediate(t,...i)}performDelayed(t,...i){let o=!1;switch(this._myPerformDelayedType){case PP.PerformDelayedType.QUEUE:this._myPendingPerforms.push(new PP.PendingPerform(t,...i)),o=!0;break;case PP.PerformDelayedType.KEEP_FIRST:this.hasPendingPerforms()||(this._myPendingPerforms.push(new PP.PendingPerform(t,...i)),o=!0);break;case PP.PerformDelayedType.KEEP_LAST:this.resetPendingPerforms(),this._myPendingPerforms.push(new PP.PendingPerform(t,...i)),o=!0;break}return o}performImmediate(t,...i){return this._perform(t,PP.PerformType.IMMEDIATE,...i)}canPerform(t){return this.hasTransitionFromState(this._myCurrentStateData.myID,t)}canGoTo(t,i=null){return this.hasTransitionFromStateToState(this._myCurrentStateData.myID,t,i)}isInState(t){return this._myCurrentStateData!=null&&this._myCurrentStateData.myID==t}hasBeenInit(){return this._myCurrentStateData!=null}reset(){this.resetState(),this.resetPendingPerforms()}resetState(){this._myCurrentStateData=null}resetPendingPerforms(){this._myPendingPerforms=[]}getCurrentState(){return this._myCurrentStateData}getCurrentTransitions(){return this.getTransitionsFromState(this._myCurrentStateData.myID)}getCurrentTransitionsToState(t){return this.getTransitionsFromStateToState(this._myCurrentStateData.myID,t)}getState(t){return this._myStateMap.get(t)}getStates(){return this._myStateMap.values()}getTransitions(){let t=[];for(let i of this._myTransitionMap.values())for(let o of i.values())t.push(o);return t}getTransitionsFromState(t){let i=this._getTransitionMapFromState(t);return Array.from(i.values())}getTransitionsFromStateToState(t,i){let o=this._getTransitionMapFromState(t),n=[];for(let s of o.values())s.myToState.myID==i&&n.push(s);return n}removeState(t){if(this.hasState(t)){this._myStateMap.delete(t),this._myTransitionMap.delete(t);for(let i of this._myTransitionMap.values()){let o=[];for(let[n,s]of i.entries())s.myToState.myID==t&&o.push(n);for(let n of o)i.delete(n)}return!0}return!1}removeTransitionFromState(t,i){let o=this._getTransitionMapFromState(t);return o?o.delete(i):!1}hasState(t){return this._myStateMap.has(t)}hasTransitionFromState(t,i){return this.getTransitionsFromState(t).findIndex(function(s){return s.myID==i})>=0}hasTransitionFromStateToState(t,i,o=null){let n=this.getTransitionsFromStateToState(t,i),s=!1;return o?s=n.findIndex(function(l){return l.myID==o})>=0:s=n.length>0,s}setPerformType(t){this._myPerformType=t}getPerformType(){return this._myPerformType}setPerformDelayedType(t){this._myPerformDelayedType=t}getPerformDelayedType(){return this._myPerformDelayedType}hasPendingPerforms(){return this._myPendingPerforms.length>0}getPendingPerforms(){return this._myPendingPerforms.slice(0)}clone(t=!1){if(!this.isCloneable(t))return null;let i=new PP.FSM;i._myDebugLogActive=this._myDebugLogActive,i._myDebugShowDelayedInfo=this._myDebugShowDelayedInfo,i._myDebugLogName=this._myDebugLogName.slice(0),i._myPerformType=this._myPerformType,i._myPerformDelayedType=this._myPerformDelayedType,i._myPendingPerforms=this._myPendingPerforms.slice(0);for(let o of this._myStateMap.entries()){let n=null;t?n=new PP.StateData(o[1].myID,o[1].myObject.clone()):n=new PP.StateData(o[1].myID,o[1].myObject),i._myStateMap.set(n.myID,n)}for(let o of this._myTransitionMap.entries()){let n=new Map;i._myTransitionMap.set(o[0],n);for(let s of o[1].entries()){let a=null,l=i.getState(s[1].myFromState.myID),m=i.getState(s[1].myToState.myID);t?a=new PP.TransitionData(s[1].myID,l,m,s[1].myObject.clone(),s[1].mySkipStateFunction):a=new PP.TransitionData(s[1].myID,l,m,s[1].myObject,s[1].mySkipStateFunction),n.set(a.myID,a)}}return this._myCurrentStateData&&(i._myCurrentStateData=i.getState(this._myCurrentStateData.myID)),i}isCloneable(t=!1){if(!t)return!0;let i=!0;for(let o of this._myStateMap.entries())i=i&&o[1].myObject.clone!=null;for(let o of this._myTransitionMap.entries())for(let n of o[1].entries())i=i&&n[1].myObject.clone!=null;return i}setDebugLogActive(t,i=null,o=!1){this._myDebugLogActive=t,this._myDebugShowDelayedInfo=o,i&&(this._myDebugLogName="FSM: ".concat(i))}registerInitEventListener(t,i){this._myInitCallbacks.set(t,i)}unregisterInitEventListener(t){this._myInitCallbacks.delete(t)}registerInitIDEventListener(t,i,o){let n=this._myInitIDCallbacks.get(t);n==null&&(this._myInitIDCallbacks.set(t,new Map),n=this._myInitIDCallbacks.get(t)),n.set(i,o)}unregisterInitIDEventListener(t,i){let o=this._myInitIDCallbacks.get(t);o!=null&&(o.delete(i),o.size<=0&&this._myInitIDCallbacks.delete(t))}registerTransitionEventListener(t,i){this._myTransitionCallbacks.set(t,i)}unregisterTransitionEventListener(t){this._myTransitionCallbacks.delete(t)}registerTransitionIDEventListener(t,i,o,n,s){let a=null;for(let l of this._myTransitionIDCallbacks)if(l[0]==t&&l[1]==i&&l[2]==o){a=l[3];break}if(a==null){let l=[];l[0]=t,l[1]=i,l[2]=o,l[3]=new Map,a=l[3],this._myTransitionIDCallbacks.push(l)}a.set(n,s)}unregisterTransitionIDEventListener(t,i,o,n){let s=null;for(let a of this._myTransitionIDCallbacks)if(a[0]==t&&a[1]==i&&a[2]==o){s=a[3];break}s!=null&&(s.delete(n),s.size<=0&&this._myTransitionIDCallbacks.pp_remove(a=>a[0]==t&&a[1]==i&&a[2]==o))}_perform(t,i,...o){if(this._myCurrentStateData){if(this.canPerform(t)){let s=this._myTransitionMap.get(this._myCurrentStateData.myID).get(t),a=this._myCurrentStateData,l=this._myStateMap.get(s.myToState.myID);if(this._myDebugLogActive){let m=[this._myDebugLogName,"- From:",a.myID,"- To:",l.myID,"- With:",t];this._myDebugShowDelayedInfo&&m.push(i==PP.PerformType.DELAYED?"- Delayed":"- Immediate"),console.log(...m)}if(s.mySkipStateFunction!=PP.SkipStateFunction.END&&s.mySkipStateFunction!=PP.SkipStateFunction.BOTH&&a.myObject&&a.myObject.end&&a.myObject.end(this,s,...o),s.myObject&&s.myObject.perform&&s.myObject.perform(this,s,...o),s.mySkipStateFunction!=PP.SkipStateFunction.START&&s.mySkipStateFunction!=PP.SkipStateFunction.BOTH&&l.myObject&&l.myObject.start&&l.myObject.start(this,s,...o),this._myCurrentStateData=s.myToState,this._myTransitionCallbacks.size>0&&this._myTransitionCallbacks.forEach(function(m){m(this,a,l,s,i,...o)}.bind(this)),this._myTransitionIDCallbacks.length>0){let m=[];for(let h of this._myTransitionIDCallbacks)(h[0]==null||h[0]==a.myID)&&(h[1]==null||h[1]==l.myID)&&(h[2]==null||h[2]==s.myID)&&m.push(h[3]);for(let h of this.transitionIDMaps)h.forEach(function(r){r(this,a,l,s,i,...o)}.bind(this))}return!0}else if(this._myDebugLogActive){let n=[this._myDebugLogName,"- No Transition:",t,"- From:",this._myCurrentStateData.myID];this._myDebugShowDelayedInfo&&n.push(i==PP.PerformType.DELAYED?"- Delayed":"- Immediate"),console.warn(...n)}}else if(this._myDebugLogActive){let n=[this._myDebugLogName,"- FSM not initialized yet"];this._myDebugShowDelayedInfo&&n.push(i==PP.PerformType.DELAYED?"- Delayed":"- Immediate"),console.warn(...n)}return!1}_getTransitionMapFromState(t){return this._myTransitionMap.get(t)}}});var ue=S(()=>{PP.State=class{update(t,i,...o){}init(t,i,...o){}start(t,i,...o){}end(t,i,...o){}}});var me=S(()=>{PP.Transition=class{performInit(t,i,...o){}perform(t,i,...o){}}});var ce=S(()=>{PP.TimerState=class extends PP.State{constructor(t=0,i=null,...o){super(),this._myTransitionToPerformOnEnd=i,this._myTransitionArgs=o,this._myTimer=new PP.Timer(t,!1)}setDuration(t){this._myTimer.setDuration(t)}setTransitionToPerformOnEnd(t,...i){this._myTransitionToPerformOnEnd=t,this._myTransitionArgs=i}onEnd(t,i=null){this._myTimer.onEnd(t,i)}unregisterOnEnd(t=null){this._myTimer.unregisterOnEnd(t)}update(t,i){this._myTimer.update(t),this._myTimer.isDone()&&this._myTransitionToPerformOnEnd!=null&&i.perform(this._myTransitionToPerformOnEnd,...this._myTransitionArgs)}start(t,i,o=null,n=null,...s){this._myTimer.start(o),n!=null&&(this._myTransitionToPerformOnEnd=n,this._myTransitionArgs=s)}}});var ye=S(()=>{PP.CAUtils={_myDummyServer:null,_myUseDummyServerOnSDKMissing:!1,_myUseDummyServerOnError:!1,setUseDummyServerOnSDKMissing:function(e){PP.CAUtils._myUseDummyServerOnSDKMissing=e},setUseDummyServerOnError:function(e){PP.CAUtils._myUseDummyServerOnError=e},setDummyServer:function(e){PP.CAUtils._myDummyServer=e},isUseDummyServerOnSDKMissing:function(){return PP.CAUtils._myUseDummyServerOnSDKMissing},isUseDummyServerOnError:function(){return PP.CAUtils._myUseDummyServerOnError},getDummyServer:function(){return PP.CAUtils._myDummyServer},isSDKAvailable:function(){return"casdk"in window},getLeaderboard:function(e,t,i,o,n,s,a=null){if(PP.CAUtils.isSDKAvailable())i?PP.CAUtils.getUser(function(l){let m=l.displayName;casdk.getLeaderboard(e,t,i,o).then(function(h){if(h.leaderboard){let r=!1;for(let u of h.leaderboard)if(u.displayName==m&&u.score!=0){r=!0;break}if(r)n&&n(h.leaderboard);else if(PP.CAUtils._myUseDummyServerOnError&&a==null||a!=null&&a)PP.CAUtils.getLeaderboardDummy(e,t,i,o,n,s);else if(s){let u={};u.reason="Searching for around player but the user has not submitted a score yet",u.type=PP.CAUtils.ErrorType.USER_HAS_NO_SCORE,s(u,h)}}else if(PP.CAUtils._myUseDummyServerOnError&&a==null||a!=null&&a)PP.CAUtils.getLeaderboardDummy(e,t,i,o,n,s);else if(s){let r={};r.reason="Get leaderboard failed",r.type=PP.CAUtils.ErrorType.GET_LEADERBOARD_FAILED,s(r,h)}})},function(){if(PP.CAUtils._myUseDummyServerOnError&&a==null||a!=null&&a)PP.CAUtils.getLeaderboardDummy(e,t,i,o,n,s);else if(s){let l={};l.reason="Searching for around player but the user can't be retrieved",l.type=PP.CAUtils.ErrorType.GET_USER_FAILED,s(l,result)}},!1):casdk.getLeaderboard(e,t,i,o).then(function(l){if(l.leaderboard)n&&n(l.leaderboard);else if(PP.CAUtils._myUseDummyServerOnError&&a==null||a!=null&&a)PP.CAUtils.getLeaderboardDummy(e,t,i,o,n,s);else if(s){let m={};m.reason="Get leaderboard failed",m.type=PP.CAUtils.ErrorType.GET_LEADERBOARD_FAILED,s(m,l)}});else if(PP.CAUtils._myUseDummyServerOnSDKMissing&&a==null||a!=null&&a)PP.CAUtils.getLeaderboardDummy(e,t,i,o,n,s);else if(s){let l={};l.reason="Construct Arcade SDK missing",l.type=PP.CAUtils.ErrorType.CA_SDK_MISSING,s(l,null)}},getLeaderboardDummy(e,t,i,o,n,s){if(PP.CAUtils._myDummyServer)PP.CAUtils._myDummyServer.getLeaderboard(e,t,i,o,n,s);else if(s){let a={};a.reason="Dummy server not initialized",a.type=PP.CAUtils.ErrorType.DUMMY_NOT_INITIALIZED,s(a)}},submitScore:function(e,t,i,o,n=null){if(PP.CAUtils.isSDKAvailable())casdk.submitScore(e,t).then(function(s){if(s.error){if(PP.CAUtils._myUseDummyServerOnError&&n==null||n!=null&&n)PP.CAUtils.submitScoreDummy(e,t,i,o);else if(o){let a={};a.reason="Submit score failed",a.type=PP.CAUtils.ErrorType.SUBMIT_SCORE_FAILED,o(a,s)}}else i()});else if(PP.CAUtils._myUseDummyServerOnSDKMissing&&n==null||n!=null&&n)PP.CAUtils.submitScoreDummy(e,t,i,o);else if(o){let s={};s.reason="Construct Arcade SDK missing",s.type=PP.CAUtils.ErrorType.CA_SDK_MISSING,o(s,null)}},submitScoreDummy(e,t,i,o){if(PP.CAUtils._myDummyServer)PP.CAUtils._myDummyServer.submitScore(e,t,i,o);else if(o){let n={};n.reason="Dummy server not initialized",n.type=PP.CAUtils.ErrorType.DUMMY_NOT_INITIALIZED,o(n)}},getUser:function(e,t,i=null){if(PP.CAUtils.isSDKAvailable())casdk.getUser().then(function(o){if(o.user)e&&e(o.user);else if(PP.CAUtils._myUseDummyServerOnError&&i==null||i!=null&&i)PP.CAUtils.getUserDummy(e,t);else if(t){let n={};n.reason="Get user failed",n.type=PP.CAUtils.ErrorType.GET_USER_FAILED,t(n,o)}});else if(PP.CAUtils._myUseDummyServerOnSDKMissing&&i==null||i!=null&&i)PP.CAUtils.getUserDummy(e,t);else if(t){let o={};o.reason="Construct Arcade SDK missing",o.type=PP.CAUtils.ErrorType.CA_SDK_MISSING,t(o,null)}},getUserDummy(e,t){if(PP.CAUtils._myDummyServer)PP.CAUtils._myDummyServer.getUser(e,t);else if(t){let i={};i.reason="Dummy server not initialized",i.type=PP.CAUtils.ErrorType.DUMMY_NOT_INITIALIZED,t(i)}},ErrorType:{DUMMY_NOT_INITIALIZED:0,CA_SDK_MISSING:1,SUBMIT_SCORE_FAILED:2,GET_LEADERBOARD_FAILED:3,GET_USER_FAILED:4,USER_HAS_NO_SCORE:5}};PP.CADummyServer=class{constructor(){}getLeaderboard(t,i,o,n,s,a){let l=null;for(o?l=[{rank:7,displayName:"Player 1",score:1e6},{rank:8,displayName:"Player 2",score:1e6},{rank:9,displayName:"Player 3",score:9e5},{rank:10,displayName:"Player 4",score:8e5},{rank:11111,displayName:"Player 5",score:7e7},{rank:22222,displayName:"VeryLongName_06",score:6e5},{rank:33333,displayName:"Player 7",score:5e5},{rank:44444,displayName:"Player 8",score:4e5},{rank:55555,displayName:"Player 9",score:3e5},{rank:66666,displayName:"Player 10",score:2e5}]:l=[{rank:0,displayName:"Player 1",score:1e6},{rank:1,displayName:"Player 2",score:1e6},{rank:2,displayName:"Player 3",score:9e5},{rank:3,displayName:"Player 4",score:8e5},{rank:4,displayName:"Player 5",score:7e5},{rank:5,displayName:"Player 6",score:6e5},{rank:6,displayName:"Player 7",score:5e5},{rank:7,displayName:"Player 8",score:4e5},{rank:8,displayName:"Player 9",score:3e5},{rank:9,displayName:"Player 10",score:2e5}];l.length>n;)l.pop();s&&s(l)}submitScore(t,i,o,n){o&&o()}getUser(t,i){let o={};o.displayName="Jonathan",t&&t(o)}}});var he=S(()=>{PP.ColorUtils={rgbToHsv:function(e){let t=e.pp_clone(),i=e[0],o=e[1],n=e[2];var s=Math.max(i,o,n),a=Math.min(i,o,n),l=s-a,m,h=s===0?0:l/s,r=s;switch(s){case a:m=0;break;case i:m=o-n+l*(o<n?6:0),m/=6*l;break;case o:m=n-i+l*2,m/=6*l;break;case n:m=i-o+l*4,m/=6*l;break}return t[0]=m,t[1]=h,t[2]=r,t},hsvToRgb:function(e){let t=e.pp_clone(),i=e[0],o=e[1],n=e[2],s,a,l,m,h,r,u,c;switch(m=Math.floor(i*6),h=i*6-m,r=n*(1-o),u=n*(1-h*o),c=n*(1-(1-h)*o),m%6){case 0:s=n,a=c,l=r;break;case 1:s=u,a=n,l=r;break;case 2:s=r,a=n,l=c;break;case 3:s=r,a=u,l=n;break;case 4:s=c,a=r,l=n;break;case 5:s=n,a=r,l=u;break}return t[0]=s,t[1]=a,t[2]=l,t},rgbCodeToHuman(e){return PP.ColorUtils.color1To255(e)},rgbHumanToCode(e){return PP.ColorUtils.color255To1(e)},hsvCodeToHuman(e){return PP.ColorUtils.color1To255(e)},hsvHumanToCode(e){return PP.ColorUtils.color255To1(e)},color255To1(e){let t=e.pp_clone();for(let i=0;i<t.length;i++)t[i]/=255,t[i]=Math.pp_clamp(t[i],0,1);return t},color1To255(e){let t=e.pp_clone();for(let i=0;i<t.length;i++)t[i]=Math.round(t[i]*255),t[i]=Math.pp_clamp(t[i],0,255);return t}}});var pe=S(()=>{PP.MeshUtils={createPlaneMesh:function(){let e=4,t=WL.Mesh.VERTEX_FLOAT_SIZE,i=new Float32Array(e*t),o=new Uint32Array(e+2);for(let s=0;s<4;++s)i[s*t+WL.Mesh.POS.X]=-1+(s&1)*2,i[s*t+WL.Mesh.POS.Y]=-1+((s&2)>>1)*2,i[s*t+WL.Mesh.POS.Z]=0,i[s*t+WL.Mesh.TEXCOORD.U]=s&1,i[s*t+WL.Mesh.TEXCOORD.V]=(s&2)>>1,i[s*t+WL.Mesh.NORMAL.X]=0,i[s*t+WL.Mesh.NORMAL.Y]=0,i[s*t+WL.Mesh.NORMAL.Z]=1;return o[0]=0,o[1]=1,o[2]=2,o[3]=2,o[4]=1,o[5]=3,new WL.Mesh({indexData:o,indexType:WL.MeshIndexType.UnsignedInt,vertexData:i})},setAlpha:function(e,t){let i=e.pp_getComponentsHierarchy("mesh");for(let o of i){if(o.material.color!=null){let n=o.material.color;n[3]=t,o.material.color=n}if(o.material.diffuseColor!=null){let n=o.material.diffuseColor;n[3]=t,o.material.diffuseColor=n}if(o.material.ambientColor!=null){let n=o.material.ambientColor;n[3]=t,o.material.ambientColor=n}}},setMaterial:function(e,t,i=!1){let o=e.pp_getComponentsHierarchy("mesh");for(let n of o)i?n.material=t.clone():n.material=t},setClonedMaterials:function(e){let t=e.pp_getComponentsHierarchy("mesh");for(let i of t)i.material=i.material.clone()},setSpecularColor:function(e,t){let i=e.pp_getComponentsHierarchy("mesh");for(let o of i)o.material.specularColor!=null&&(o.material.specularColor=t)},setFogColor:function(e,t){let i=e.pp_getComponentsHierarchy("mesh");for(let o of i)o.material.fogColor!=null&&(o.material.fogColor=t)}}});var de=S(()=>{PP.SaveUtils={save:function(e,t){t!=null&&localStorage.setItem(e,t)},has:function(e){return PP.SaveUtils.loadString(e,null)!=null},delete:function(e){return localStorage.removeItem(e)},clear:function(){return localStorage.clear()},load:function(e,t=null){return PP.SaveUtils.loadString(e,t)},loadString:function(e,t=null){let i=localStorage.getItem(e);return i==null&&(i=t),i},loadNumber:function(e,t=null){let i=PP.SaveUtils.loadString(e);return i!=null?Number(i):t},loadBool:function(e,t=null){let i=PP.SaveUtils.loadString(e);return i=="true"?!0:i=="false"?!1:t}}});var _e=S(()=>{PP.TextUtils={setClonedMaterials:function(e){let t=e.pp_getComponentsHierarchy("text");for(let i of t)i.material=i.material.clone()}}});var ge=S(()=>{PP.XRUtils={isDeviceEmulated:function(){return"CustomWebXRPolyfill"in window},isXRSessionActive:function(){return WL.xrSession!=null},isReferenceSpaceLocalFloor:function(){return!["local","viewer"].includes(WebXR.refSpace)}}});var fe=S(()=>{WL.registerComponent("pp-debug-axes",{},{init:function(){},start:function(){this._myDebugAxes=new PP.DebugAxes},update:function(e){this._myDebugAxes.setTransform(this.object.transformWorld)}})});var Pe=S(()=>{PP.DebugAxes=class{constructor(t=!0){this._myDebugRight=new PP.DebugLine,this._myDebugRight.setColor([1,0,0,1]),this._myDebugUp=new PP.DebugLine,this._myDebugUp.setColor([0,1,0,1]),this._myDebugForward=new PP.DebugLine,this._myDebugForward.setColor([0,0,1,1]),this._myTransform=PP.mat4_create(),this._myAxesLength=.1,this._myPositionOffset=[0,0,0],this._myVisible=!0,this._myDirty=!1,this._myAutoRefresh=t,this._myDebugRight.setVisible(this._myVisible),this._myDebugUp.setVisible(this._myVisible),this._myDebugForward.setVisible(this._myVisible),this._myDebugRight.setAutoRefresh(!1),this._myDebugUp.setAutoRefresh(!1),this._myDebugForward.setAutoRefresh(!1)}setVisible(t){this._myVisible=t,this._myDebugRight.setVisible(t),this._myDebugUp.setVisible(t),this._myDebugForward.setVisible(t)}setAutoRefresh(t){this._myAutoRefresh=t,this._myDebugRight.setAutoRefresh(t),this._myDebugUp.setAutoRefresh(t),this._myDebugForward.setAutoRefresh(t)}setTransform(t){t.length==8?t.quat2_toMatrix(this._myTransform):this._myTransform.mat4_copy(t),this._markDirty()}setAxesLength(t){this._myAxesLength=t,this._markDirty()}setPositionOffset(t){this._myPositionOffset.vec3_copy(t),this._markDirty()}update(t){this._myDirty&&(this._refreshAxes(t),this._myDebugForward.update(t),this._myDebugUp.update(t),this._myDebugRight.update(t),this._myDirty=!1)}_refreshAxes(t){let i=this._myTransform.mat4_getAxes(),o=this._myTransform.mat4_getPosition();o.vec3_add(this._myPositionOffset,o),this._myDebugRight.setStartDirectionLength(o,i[0],this._myAxesLength),this._myDebugUp.setStartDirectionLength(o,i[1],this._myAxesLength),this._myDebugForward.setStartDirectionLength(o,i[2],this._myAxesLength)}_markDirty(){this._myDirty=!0,this._myAutoRefresh&&(this._refreshAxes(0),this._myDebugForward._refreshLine(0),this._myDebugUp._refreshLine(0),this._myDebugRight._refreshLine(0))}}});var Ce=S(()=>{WL.registerComponent("pp-debug-data",{_myCubeMesh:{type:WL.Type.Mesh},_myFlatMaterial:{type:WL.Type.Material}},{init:function(){PP.myDebugData.myRootObject=WL.scene.addObject(null),PP.myDebugData.myCubeMesh=this._myCubeMesh,PP.myDebugData.myFlatMaterial=this._myFlatMaterial}});PP.myDebugData={myRootObject:null,myCubeMesh:null,myFlatMaterial:null}});var Te=S(()=>{PP.DebugLine=class{constructor(t=!0){this._myLineRootObject=null,this._myLineObject=null,this._myStartPosition=[0,0,0],this._myDirection=[0,0,1],this._myLength=0,this._myThickness=.005,this._myColor=[.7,.7,.7,1],this._myVisible=!0,this._myDirty=!1,this._myAutoRefresh=t,this._buildLine()}setVisible(t){this._myVisible!=t&&(this._myVisible=t,this._myLineRootObject.pp_setActiveHierarchy(t))}setAutoRefresh(t){this._myAutoRefresh=t}setStartEnd(t,i){let o=[];i.vec3_sub(t,o);let n=o.vec3_length();o.vec3_normalize(o),this.setStartDirectionLength(t,o,n)}setStartDirectionLength(t,i,o){this._myStartPosition.vec3_copy(t),this._myDirection.vec3_copy(i),this._myLength=o,this._markDirty()}setColor(t){this._myColor.vec4_copy(t),this._markDirty()}setThickness(t){this._myThickness=t,this._markDirty()}update(t){this._myDirty&&(this._refreshLine(t),this._myDirty=!1)}_refreshLine(t){this._myLineRootObject.setTranslationWorld(this._myStartPosition),this._myLineObject.resetTranslationRotation(),this._myLineObject.resetScaling(),this._myLineObject.scale([this._myThickness/2,this._myThickness/2,this._myLength/2]);let i=this._myLineObject.pp_getForward(),o=i.vec3_angleRadians(this._myDirection);if(o>1e-4){let s=[];i.vec3_cross(i,this._myDirection,s),s.vec3_normalize(s);let a=[];a.quat_fromAxis(s,o),a.quat_mul(this._myLineObject.transformWorld,a),a.quat_normalize(a),this._myLineObject.rotateObject(a)}i=this._myLineObject.pp_getForward();let n=this._myLineObject.pp_getPosition();i.vec3_scale(this._myLength/2,i),i.vec3_add(n,n),this._myLineObject.setTranslationWorld(n),this._myLineMesh.material.color=this._myColor}_buildLine(){this._myLineRootObject=WL.scene.addObject(PP.myDebugData.myRootObject),this._myLineObject=WL.scene.addObject(this._myLineRootObject),this._myLineObject.scale([.01,.01,.01]),this._myLineMesh=this._myLineObject.addComponent("mesh"),this._myLineMesh.mesh=PP.myDebugData.myCubeMesh,this._myLineMesh.material=PP.myDebugData.myFlatMaterial.clone()}_markDirty(){this._myDirty=!0,this._myAutoRefresh&&this._refreshLine(0)}}});var Se=S(()=>{WL.registerComponent("pp-grabbable",{_myThrowLinearVelocityMultiplier:{type:WL.Type.Float,default:1},_myThrowAngularVelocityMultiplier:{type:WL.Type.Float,default:1},_myKinematicValueOnRelease:{type:WL.Type.Enum,values:["true","false","keep"],default:"false"}},{init:function(){this._myIsGrabbed=!1,this._myGrabber=null,this._myGrabCallbacks=new Map,this._myThrowCallbacks=new Map,this._myReleaseCallbacks=new Map},start:function(){this._myOldParent=this.object.parent,this._myPhysX=this.object.pp_getComponent("physx"),this._myOldKinematicValue=null},onDeactivate:function(){this.release()},grab:function(e){this.isGrabbed()||(this._myOldKinematicValue=this._myPhysX.kinematic),this.release(),this._myPhysX.kinematic=!0,this._myOldParent=this.object.parent,this.object.pp_setParent(e),this._myIsGrabbed=!0,this._myGrabCallbacks.forEach(function(t){t(e,this)}.bind(this))},throw:function(e,t){if(this._myIsGrabbed){let i=this._myGrabber;this._release(),this._myPhysX.linearVelocity=e.vec3_scale(this._myThrowLinearVelocityMultiplier),this._myPhysX.angularVelocity=t.vec3_scale(this._myThrowAngularVelocityMultiplier),this._myThrowCallbacks.forEach(function(o){o(i,this)}.bind(this)),this._myReleaseCallbacks.forEach(function(o){o(i,this,!0)}.bind(this))}},release(){if(this._myIsGrabbed){let e=this._myGrabber;this._release(),this._myReleaseCallbacks.forEach(function(t){t(e,this,!1)}.bind(this))}},getLinearVelocity(){let e=PP.vec3_create();return this._myPhysX.linearVelocity.vec3_clone(e),e},getAngularVelocity(){return this.getAngularVelocityDegrees()},getAngularVelocityDegrees(){let e=PP.vec3_create();return this._myPhysX.angularVelocity.vec3_toDegrees(e),e},getAngularVelocityRadians(){let e=PP.vec3_create();return this._myPhysX.angularVelocity.vec3_clone(e),e},isGrabbed(){return this._myIsGrabbed},getGrabber(){return this._myGrabber},registerGrabEventListener(e,t){this._myGrabCallbacks.set(e,t)},unregisterGrabEventListener(e){this._myGrabCallbacks.delete(e)},registerThrowEventListener(e,t){this._myThrowCallbacks.set(e,t)},unregisterThrowEventListener(e){this._myThrowCallbacks.delete(e)},registerReleaseEventListener(e,t){this._myReleaseCallbacks.set(e,t)},unregisterReleaseEventListener(e){this._myReleaseCallbacks.delete(e)},_release(){this.object.pp_setParent(this._myOldParent),this._myIsGrabbed=!1,this._myGrabber=null,this._myKinematicValueOnRelease==0?this._myPhysX.kinematic=!0:this._myKinematicValueOnRelease==1?this._myPhysX.kinematic=!1:this._myOldKinematicValue!=null&&(this._myPhysX.kinematic=this._myOldKinematicValue),this._myPhysX.kinematic&&(this._myPhysX.linearVelocity=[0,0,0],this._myPhysX.angularVelocity=[0,0,0])}})});var be=S(()=>{WL.registerComponent("pp-grabber-hand",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_myGrabButton:{type:WL.Type.Enum,values:["select","squeeze","both","both_exclusive"],default:"squeeze"},_mySnapOnPivot:{type:WL.Type.Bool,default:!1},_myMaxNumberOfObjects:{type:WL.Type.Int,default:1},_myThrowVelocitySource:{type:WL.Type.Enum,values:["hand","grabbable"],default:"hand"},_myThrowLinearVelocityMultiplier:{type:WL.Type.Float,default:1},_myThrowMaxLinearSpeed:{type:WL.Type.Float,default:15},_myThrowAngularVelocityMultiplier:{type:WL.Type.Float,default:.5},_myThrowMaxAngularSpeed:{type:WL.Type.Float,default:1080},_myThrowLinearVelocityBoost:{type:WL.Type.Float,default:1.75},_myThrowLinearVelocityBoostMinSpeedThreshold:{type:WL.Type.Float,default:.6},_myThrowLinearVelocityBoostMaxSpeedThreshold:{type:WL.Type.Float,default:2.5}},{init:function(){this._myHandPose=new PP.HandPose(PP.InputUtils.getHandednessByIndex(this._myHandedness)),this._myGrabbables=[],this._myGamepad=null,this._myActiveGrabButton=null,this._myLinearVelocityHistorySize=5,this._myLinearVelocityHistorySpeedAverageSamplesFromStart=1,this._myLinearVelocityHistoryDirectionAverageSamplesFromStart=3,this._myLinearVelocityHistoryDirectionAverageSkipFromStart=0,this._myHandLinearVelocityHistory=new Array(this._myLinearVelocityHistorySize),this._myHandLinearVelocityHistory.fill([0,0,0]),this._myAngularVelocityHistorySize=1,this._myHandAngularVelocityHistory=new Array(this._myAngularVelocityHistorySize),this._myHandAngularVelocityHistory.fill([0,0,0]),this._myThrowMaxAngularSpeedRadians=Math.pp_toRadians(this._myThrowMaxAngularSpeed),this._myGrabCallbacks=new Map,this._myThrowCallbacks=new Map,this._myDebugActive=!1},start:function(){if(this._myHandedness==PP.HandednessIndex.LEFT?this._myGamepad=PP.myLeftGamepad:this._myGamepad=PP.myRightGamepad,this._myPhysX=this.object.pp_getComponent("physx"),this._myCollisionsCollector=new PP.PhysXCollisionCollector(this._myPhysX,!0),this._myHandPose.start(),this._myDebugActive){this._myDebugLines=[];for(let e=0;e<this._myLinearVelocityHistorySize;e++){let t=new PP.DebugLine;t.setVisible(!1),this._myDebugLines.push(t)}}},update:function(e){this._myCollisionsCollector.update(e),this._myHandPose.update(e),this._myGrabbables.length>0&&(this._updateLinearVelocityHistory(),this._updateAngularVelocityHistory())},grab:function(e=null){this._grab(e)},throw:function(e=null){this._throw(e)},registerGrabEventListener(e,t){this._myGrabCallbacks.set(e,t)},unregisterGrabEventListener(e){this._myGrabCallbacks.delete(e)},registerThrowEventListener(e,t){this._myThrowCallbacks.set(e,t)},unregisterThrowEventListener(e){this._myThrowCallbacks.delete(e)},onActivate(){this._myGrabButton==0?(this._myGamepad.registerButtonEventListener(PP.ButtonType.SELECT,PP.ButtonEvent.PRESS_START,this,this._grab.bind(this,PP.ButtonType.SELECT)),this._myGamepad.registerButtonEventListener(PP.ButtonType.SELECT,PP.ButtonEvent.PRESS_END,this,this._throw.bind(this,PP.ButtonType.SELECT))):this._myGrabButton==1?(this._myGamepad.registerButtonEventListener(PP.ButtonType.SQUEEZE,PP.ButtonEvent.PRESS_START,this,this._grab.bind(this,PP.ButtonType.SQUEEZE)),this._myGamepad.registerButtonEventListener(PP.ButtonType.SQUEEZE,PP.ButtonEvent.PRESS_END,this,this._throw.bind(this,PP.ButtonType.SQUEEZE))):(this._myGamepad.registerButtonEventListener(PP.ButtonType.SQUEEZE,PP.ButtonEvent.PRESS_START,this,this._grab.bind(this,PP.ButtonType.SQUEEZE)),this._myGamepad.registerButtonEventListener(PP.ButtonType.SQUEEZE,PP.ButtonEvent.PRESS_END,this,this._throw.bind(this,PP.ButtonType.SQUEEZE)),this._myGamepad.registerButtonEventListener(PP.ButtonType.SELECT,PP.ButtonEvent.PRESS_START,this,this._grab.bind(this,PP.ButtonType.SELECT)),this._myGamepad.registerButtonEventListener(PP.ButtonType.SELECT,PP.ButtonEvent.PRESS_END,this,this._throw.bind(this,PP.ButtonType.SELECT)))},onDeactivate(){this._myGrabButton==0?(this._myGamepad.unregisterButtonEventListener(PP.ButtonType.SELECT,PP.ButtonEvent.PRESS_START,this),this._myGamepad.unregisterButtonEventListener(PP.ButtonType.SELECT,PP.ButtonEvent.PRESS_END,this)):this._myGrabButton==1?(this._myGamepad.unregisterButtonEventListener(PP.ButtonType.SQUEEZE,PP.ButtonEvent.PRESS_START,this),this._myGamepad.unregisterButtonEventListener(PP.ButtonType.SQUEEZE,PP.ButtonEvent.PRESS_END,this)):(this._myGamepad.unregisterButtonEventListener(PP.ButtonType.SQUEEZE,PP.ButtonEvent.PRESS_START,this),this._myGamepad.unregisterButtonEventListener(PP.ButtonType.SQUEEZE,PP.ButtonEvent.PRESS_END,this),this._myGamepad.unregisterButtonEventListener(PP.ButtonType.SELECT,PP.ButtonEvent.PRESS_START,this),this._myGamepad.unregisterButtonEventListener(PP.ButtonType.SELECT,PP.ButtonEvent.PRESS_END,this))},_grab:function(e){if(!(this._myGrabbables.length>=this._myMaxNumberOfObjects)&&(this._myGrabButton==2||this._myActiveGrabButton==null||this._myActiveGrabButton==e||e==null)){let t=[],i=this._myCollisionsCollector.getCollisions();for(let o=0;o<i.length;o++){let n=i[o].getComponent("pp-grabbable");n&&n.active&&t.push(n)}for(let o of t){if(!this._isAlreadyGrabbed(o)){let n=new PP.GrabberHandGrabbableData(o,this._myThrowVelocitySource==1,this._myLinearVelocityHistorySize,this._myAngularVelocityHistorySize);this._myGrabbables.push(n),o.grab(this.object),o.registerReleaseEventListener(this,this._onRelease.bind(this)),this._mySnapOnPivot&&o.object.resetTranslation(),this._myGrabCallbacks.forEach(function(s){s(this,o)}.bind(this))}if(this._myGrabbables.length>=this._myMaxNumberOfObjects)break}this._myGrabbables.length>0&&this._myActiveGrabButton==null&&(this._myActiveGrabButton=e)}},_throw:function(e){if(this._myGrabButton==2||this._myActiveGrabButton==null||this._myActiveGrabButton==e||e==null){if(this._myGrabbables.length>0){let t=null,i=null;this._myThrowVelocitySource==0&&(t=this._computeReleaseLinearVelocity(this._myHandLinearVelocityHistory),i=this._computeReleaseAngularVelocity(this._myHandAngularVelocityHistory));for(let o of this._myGrabbables){let n=o.getGrabbable();n.unregisterReleaseEventListener(this),this._myThrowVelocitySource==1&&(t=this._computeReleaseLinearVelocity(o.getLinearVelocityHistory()),i=this._computeReleaseAngularVelocity(o.getAngularVelocityHistory())),n.throw(t,i),this._myThrowCallbacks.forEach(function(s){s(this,n)}.bind(this))}this._myGrabbables=[]}this._myActiveGrabButton=null}},_onRelease(e,t){t.unregisterReleaseEventListener(this),this._myGrabbables.pp_remove(i=>i.getGrabbable()==t),this._myGrabbables.length<=0&&(this._myActiveGrabButton=null)},_updateLinearVelocityHistory(){this._myHandLinearVelocityHistory.unshift(this._myHandPose.getLinearVelocity()),this._myHandLinearVelocityHistory.pop();for(let e of this._myGrabbables)e.updateLinearVelocityHistory()},_updateAngularVelocityHistory(){this._myHandAngularVelocityHistory.unshift(this._myHandPose.getAngularVelocityRadians()),this._myHandAngularVelocityHistory.pop();for(let e of this._myGrabbables)e.updateAngularVelocityHistory()},_computeReleaseLinearVelocity(e){let t=e[0].vec3_length();for(let l=1;l<this._myLinearVelocityHistorySpeedAverageSamplesFromStart;l++)t+=e[l].vec3_length();t/=this._myLinearVelocityHistorySpeedAverageSamplesFromStart;let i=Math.pp_mapToRange(t,this._myThrowLinearVelocityBoostMinSpeedThreshold,this._myThrowLinearVelocityBoostMaxSpeedThreshold,0,1);i=PP.EasingFunction.easeIn(i),t+=t*(i*this._myThrowLinearVelocityBoost),t*=this._myThrowLinearVelocityMultiplier,t=Math.pp_clamp(t,0,this._myThrowMaxLinearSpeed),this._myDebugActive&&this._debugDirectionLines(e);let n=this._myLinearVelocityHistoryDirectionAverageSamplesFromStart,s=this._myLinearVelocityHistoryDirectionAverageSkipFromStart+this._myLinearVelocityHistoryDirectionAverageSamplesFromStart,a=[0,0,0];for(let l=this._myLinearVelocityHistoryDirectionAverageSkipFromStart;l<s;l++){let m=e[l];m.vec3_scale(n,m),a.vec3_add(m,a),n--}return a.vec3_normalize(a),a.vec3_scale(t,a),a},_computeReleaseAngularVelocity(e){let t=e[0],i=t.vec3_length();i=Math.pp_clamp(i*this._myThrowAngularVelocityMultiplier,0,this._myThrowMaxAngularSpeedRadians);let o=t;return o.vec3_normalize(o),o.vec3_scale(i,o),o},_debugDirectionLines(e){for(let t=this._myLinearVelocityHistoryDirectionAverageSkipFromStart+this._myLinearVelocityHistoryDirectionAverageSamplesFromStart;t>this._myLinearVelocityHistoryDirectionAverageSkipFromStart;t--){let i=t-this._myLinearVelocityHistoryDirectionAverageSkipFromStart,o=t-this._myLinearVelocityHistoryDirectionAverageSkipFromStart,n=[0,0,0];for(let a=this._myLinearVelocityHistoryDirectionAverageSkipFromStart;a<o;a++){let l=e[a].pp_clone();l.vec3_scale(i,l),n.vec3_add(l,n),i--}n.vec3_normalize(n),this._myDebugLines[t-1].setStartDirectionLength(this.object.pp_getPosition(),n,.2);let s=1/t;this._myDebugLines[t-1].setColor([s,s,s,1]),this._myDebugLines[t-1].setVisible(!0)}},_isAlreadyGrabbed(e){return this._myGrabbables.pp_find(i=>i.getGrabbable()==e)!=null}});PP.GrabberHandGrabbableData=class{constructor(t,i,o,n){this._myGrabbable=t,this._myUseGrabbableAsVelocitySource=i,this._myUseGrabbableAsVelocitySource&&(this._myLinearVelocityHistory=new Array(o),this._myLinearVelocityHistory.fill([0,0,0]),this._myAngularVelocityHistory=new Array(n),this._myAngularVelocityHistory.fill([0,0,0]))}getGrabbable(){return this._myGrabbable}getLinearVelocityHistory(){return this._myLinearVelocityHistory}getAngularVelocityHistory(){return this._myAngularVelocityHistory}updateLinearVelocityHistory(){this._myUseGrabbableAsVelocitySource&&(this._myLinearVelocityHistory.unshift(this._myGrabbable.getLinearVelocity()),this._myLinearVelocityHistory.pop())}updateAngularVelocityHistory(){this._myUseGrabbableAsVelocitySource&&(this._myAngularVelocityHistory.unshift(this._myGrabbable.getAngularVelocityRadians()),this._myAngularVelocityHistory.pop())}}});var xe=S(()=>{WL.registerComponent("pp-finger-cursor",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_myEnableMultipleClicks:{type:WL.Type.Bool,default:!0},_myCollisionGroup:{type:WL.Type.Int,default:1},_myCursorMesh:{type:WL.Type.Mesh,default:null},_myCursorMaterial:{type:WL.Type.Material,default:null},_myCursorSize:{type:WL.Type.Float,default:.0125}},{init:function(){this._myLastTarget=null,this._myReferenceSpace=null,this._myHandInputSource=null,this._myHandednessString=["left","right"][this._myHandedness],this._myDoubleClickTimer=0,this._myTripleClickTimer=0,this._myMultipleClickObject=null,this._myMultipleClickDelay=.3},start:function(){this._myCursorObject=WL.scene.addObject(this.object.parent),this._myCursorObject.scale([this._myCursorSize,this._myCursorSize,this._myCursorSize]),this._myCursorMesh&&(this._myCursorMeshComponent=this._myCursorObject.addComponent("mesh"),this._myCursorMeshComponent.mesh=this._myCursorMesh,this._myCursorMeshComponent.material=this._myCursorMaterial.clone()),this._myCollisionComponent=this._myCursorObject.addComponent("collision"),this._myCollisionComponent.collider=0,this._myCollisionComponent.group=1<<this._myCollisionGroup,this._myCollisionComponent.extents=[this._myCursorSize,this._myCursorSize,this._myCursorSize],WL.xrSession&&this._onXRSessionStart(WL.xrSession),WL.onXRSessionStart.push(this._onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this._onXRSessionEnd.bind(this))},update:function(e){if(this._myDoubleClickTimer>0&&(this._myDoubleClickTimer-=e),this._myTripleClickTimer>0&&(this._myTripleClickTimer-=e),this._updateHand(),this._myHandInputSource){let t=this._myCollisionComponent.queryOverlaps(),i=null;for(let o=0;o<t.length;++o){let s=t[o].object.getComponent("cursor-target");if(s&&(i==null||!s.isSurface)&&(i=s,!s.isSurface))break}i?i.equals(this._myLastTarget)||(this._targetTouchEnd(),this._myLastTarget=i,this._targetTouchStart()):this._targetTouchEnd()}else this._targetTouchEnd()},_targetTouchStart:function(){this._myLastTarget.onHover(this._myLastTarget.object,this),this._myLastTarget.onDown(this._myLastTarget.object,this)},_targetTouchEnd:function(){this._myLastTarget&&(this._myEnableMultipleClicks&&this._myTripleClickTimer>0&&this._myMultipleClickObject&&this._myMultipleClickObject.equals(this._myLastTarget.object)?(this._myLastTarget.onTripleClick(this._myLastTarget.object,this),this._myTripleClickTimer=0):this._myEnableMultipleClicks&&this._myDoubleClickTimer>0&&this._myMultipleClickObject&&this._myMultipleClickObject.equals(this._myLastTarget.object)?(this._myLastTarget.onDoubleClick(this._myLastTarget.object,this),this._myTripleClickTimer=this._myMultipleClickDelay,this._myDoubleClickTimer=0):(this._myLastTarget.onClick(this._myLastTarget.object,this),this._myTripleClickTimer=0,this._myDoubleClickTimer=this._myMultipleClickDelay,this._myMultipleClickObject=this._myLastTarget.object),this._myLastTarget.onUp(this._myLastTarget.object,this),this._myLastTarget.onUnhover(this._myLastTarget.object,this),this._myLastTarget=null)},setActive:function(e){this._myCursorObject.pp_setActiveHierarchy(e),this.active=e},_updateHand(){if(this._myHandInputSource=PP.InputUtils.getInputSource(this._myHandednessString,PP.InputSourceType.HAND),this._myHandInputSource){let e=Module.webxr_frame.getJointPose(this._myHandInputSource.hand.get("index-finger-tip"),this._myReferenceSpace);e&&(this._myCursorObject.resetTransform(),this._myCursorObject.transformLocal.set([e.transform.orientation.x,e.transform.orientation.y,e.transform.orientation.z,e.transform.orientation.w]),this._myCursorObject.translate([e.transform.position.x,e.transform.position.y,e.transform.position.z]),this._myCursorObject.scale([this._myCursorSize,this._myCursorSize,this._myCursorSize]))}},_onXRSessionStart:function(e){e.requestReferenceSpace(WebXR.refSpace).then(function(t){this._myReferenceSpace=t}.bind(this))},_onXRSessionEnd:function(e){this._myReferenceSpace=null}})});var ve=S(()=>{PP.HandPose=class{constructor(t,i=!0,o=!1){this._myInputSource=null,this._myHandedness=t,this._myFixForward=i,this._myForceEmulatedVelocities=o,this._myReferenceSpace=null,this._myPosition=[0,0,0],this._myRotation=[0,0,0,1],this._myPrevPosition=[0,0,0],this._myPrevRotation=[0,0,0,1],this._myLinearVelocity=[0,0,0],this._myAngularVelocity=[0,0,0],this._myIsValid=!1,this._myIsLinearVelocityEmulated=!0,this._myIsAngularVelocityEmulated=!0,this._myOutAxes=[PP.vec3_create(),PP.vec3_create(),PP.vec3_create()],this._myOutRotationQuat=PP.quat_create(),this._myOutRotationRadians=PP.vec3_create(),this._myOutPrevRotationRadians=PP.vec3_create()}getReferenceSpace(){return this._myReferenceSpace}getInputSource(){return this._myInputSource}getPosition(){return this._myPosition}getRotation(){return this.getRotationDegrees()}getRotationDegrees(){return this.getRotationQuat().quat_toDegrees()}getRotationRadians(){return this.getRotationQuat().quat_toRadians()}getRotationQuat(){let t=this._myRotation;return this._myFixForward&&(this._myOutRotationQuat.pp_copy(this._myRotation),t=this._myOutRotationQuat,t.quat_rotateAxisRadians(Math.PI,t.quat_getAxes(this._myOutAxes)[1],t)),t}getTransform(){return this.getTransformMatrix()}getTransformMatrix(){return PP.mat4_fromPositionRotationQuat(this._myPosition,this.getRotationQuat())}getTransformQuat(){return PP.quat2_fromPositionRotationQuat(this._myPosition,this.getRotationQuat())}getLinearVelocity(){return this._myLinearVelocity.pp_clone()}getAngularVelocity(){return this.getAngularVelocityDegrees()}getAngularVelocityDegrees(){return this._myAngularVelocity.vec3_toDegrees()}getAngularVelocityRadians(){return this._myAngularVelocity.pp_clone()}isValid(){return this._myIsValid}isLinearVelocityEmulated(){return this._myIsLinearVelocityEmulated}isAngularVelocityEmulated(){return this._myIsAngularVelocityEmulated}setFixForward(t){this._myFixForward=t}setForceEmulatedVelocities(t){this._myForceEmulatedVelocities=t}start(){WL.xrSession&&this._onXRSessionStart(!0,WL.xrSession),WL.onXRSessionStart.push(this._onXRSessionStart.bind(this,!1)),WL.onXRSessionEnd.push(this._onXRSessionEnd.bind(this))}update(t){this._myPrevPosition.vec3_copy(this._myPosition),this._myPrevRotation.quat_copy(this._myRotation);let i=Module.webxr_frame;if(i&&this._myInputSource){let o=null;try{o=i.getPose(this._myInputSource.gripSpace,this._myReferenceSpace)}catch{}o?(this._myPosition[0]=o.transform.position.x,this._myPosition[1]=o.transform.position.y,this._myPosition[2]=o.transform.position.z,this._myRotation[0]=o.transform.orientation.x,this._myRotation[1]=o.transform.orientation.y,this._myRotation[2]=o.transform.orientation.z,this._myRotation[3]=o.transform.orientation.w,o.linearVelocity&&!this._myForceEmulatedVelocities?(this._myLinearVelocity[0]=o.linearVelocity.x,this._myLinearVelocity[1]=o.linearVelocity.y,this._myLinearVelocity[2]=o.linearVelocity.z,this._myIsLinearVelocityEmulated=!1):(this._computeEmulatedLinearVelocity(t),this._myIsLinearVelocityEmulated=!0),o.angularVelocity&&!this._myForceEmulatedVelocities?(this._myAngularVelocity[0]=o.angularVelocity.x,this._myAngularVelocity[1]=o.angularVelocity.y,this._myAngularVelocity[2]=o.angularVelocity.z,this._myIsAngularVelocityEmulated=!1):(this._computeEmulatedAngularVelocity(t),this._myIsAngularVelocityEmulated=!0),this._myIsValid=!0):(this._myLinearVelocity[0]=0,this._myLinearVelocity[1]=0,this._myLinearVelocity[2]=0,this._myAngularVelocity[0]=0,this._myAngularVelocity[1]=0,this._myAngularVelocity[2]=0,this._myIsValid=!1,this._myIsLinearVelocityEmulated=!0,this._myIsAngularVelocityEmulated=!0)}else this._myLinearVelocity[0]=0,this._myLinearVelocity[1]=0,this._myLinearVelocity[2]=0,this._myAngularVelocity[0]=0,this._myAngularVelocity[1]=0,this._myAngularVelocity[2]=0,this._myIsValid=!1,this._myIsLinearVelocityEmulated=!0,this._myIsAngularVelocityEmulated=!0}_computeEmulatedLinearVelocity(t){t>0?(this._myPosition.vec3_sub(this._myPrevPosition,this._myLinearVelocity),this._myLinearVelocity.vec3_scale(1/t,this._myLinearVelocity)):(this._myLinearVelocity[0]=0,this._myLinearVelocity[1]=0,this._myLinearVelocity[2]=0)}_computeEmulatedAngularVelocity(t){if(t>0){let i=this._myRotation.quat_toRadians(this._myOutRotationRadians),o=this._myPrevRotation.quat_toRadians(this._myOutPrevRotationRadians);i.vec3_sub(o,this._myAngularVelocity),this._myAngularVelocity.vec3_scale(1/t,this._myAngularVelocity)}else this._myAngularVelocity[0]=0,this._myAngularVelocity[1]=0,this._myAngularVelocity[2]=0}_onXRSessionStart(t,i){if(i.requestReferenceSpace(WebXR.refSpace).then(function(o){this._myReferenceSpace=o}.bind(this)),i.addEventListener("inputsourceschange",function(o){if(o.removed)for(let n of o.removed)n==this._myInputSource&&(this._myInputSource=null);if(o.added)for(let n of o.added)n.handedness==this._myHandedness&&(this._myInputSource=n)}.bind(this)),t&&this._myInputSource==null&&i.inputSources)for(let o of i.inputSources)o.handedness==this._myHandedness&&(this._myInputSource=o)}_onXRSessionEnd(t){this._myReferenceSpace=null,this._myInputSource=null}}});var Be=S(()=>{PP.HeadPose=class{constructor(t=!0,i=!1){this._myFixForward=t,this._myForceEmulatedVelocities=i,this._myReferenceSpace=null,this._myPosition=[0,0,0],this._myRotation=[0,0,0,1],this._myPrevPosition=[0,0,0],this._myPrevRotation=[0,0,0,1],this._myLinearVelocity=[0,0,0],this._myAngularVelocity=[0,0,0],this._myIsValid=!1,this._myIsLinearVelocityEmulated=!0,this._myIsAngularVelocityEmulated=!0,this._myOutAxes=[PP.vec3_create(),PP.vec3_create(),PP.vec3_create()],this._myOutRotationQuat=PP.quat_create(),this._myOutRotationRadians=PP.vec3_create(),this._myOutPrevRotationRadians=PP.vec3_create()}getReferenceSpace(){return this._myReferenceSpace}getPosition(){return this._myPosition}getRotation(){return this.getRotationDegrees()}getRotationDegrees(){return this.getRotationQuat().quat_toDegrees()}getRotationRadians(){return this.getRotationQuat().quat_toRadians()}getRotationQuat(){let t=this._myRotation;return this._myFixForward&&(this._myOutRotationQuat.pp_copy(this._myRotation),t=this._myOutRotationQuat,t.quat_rotateAxisRadians(Math.PI,t.quat_getAxes(this._myOutAxes)[1],t)),t}getTransform(){return this.getTransformMatrix()}getTransformMatrix(){return PP.mat4_fromPositionRotationQuat(this._myPosition,this.getRotationQuat())}getTransformQuat(){return PP.quat2_fromPositionRotationQuat(this._myPosition,this.getRotationQuat())}getLinearVelocity(){return this._myLinearVelocity}getAngularVelocity(){return this.getAngularVelocityDegrees()}getAngularVelocityDegrees(){return this._myAngularVelocity.vec3_toDegrees()}getAngularVelocityRadians(){return this._myAngularVelocity}isValid(){return this._myIsValid}isLinearVelocityEmulated(){return this._myIsLinearVelocityEmulated}isAngularVelocityEmulated(){return this._myIsAngularVelocityEmulated}setFixForward(t){this._myFixForward=t}setForceEmulatedVelocities(t){this._myForceEmulatedVelocities=t}start(){WL.xrSession&&this._onXRSessionStart(WL.xrSession),WL.onXRSessionStart.push(this._onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this._onXRSessionEnd.bind(this))}update(t){this._myPrevPosition.vec3_copy(this._myPosition),this._myPrevRotation.quat_copy(this._myRotation);let i=Module.webxr_frame;if(i){let o=null;try{o=i.getViewerPose(this._myReferenceSpace)}catch{}o?(this._myPosition[0]=o.transform.position.x,this._myPosition[1]=o.transform.position.y,this._myPosition[2]=o.transform.position.z,this._myRotation[0]=o.transform.orientation.x,this._myRotation[1]=o.transform.orientation.y,this._myRotation[2]=o.transform.orientation.z,this._myRotation[3]=o.transform.orientation.w,o.linearVelocity&&!this._myForceEmulatedVelocities?(this._myLinearVelocity[0]=o.linearVelocity.x,this._myLinearVelocity[1]=o.linearVelocity.y,this._myLinearVelocity[2]=o.linearVelocity.z,this._myIsLinearVelocityEmulated=!1):(this._computeEmulatedLinearVelocity(t),this._myIsLinearVelocityEmulated=!0),o.angularVelocity&&!this._myForceEmulatedVelocities?(this._myAngularVelocity[0]=o.angularVelocity.x,this._myAngularVelocity[1]=o.angularVelocity.y,this._myAngularVelocity[2]=o.angularVelocity.z,this._myIsAngularVelocityEmulated=!1):(this._computeEmulatedAngularVelocity(t),this._myIsAngularVelocityEmulated=!0),this._myIsValid=!0):(this._myLinearVelocity[0]=0,this._myLinearVelocity[1]=0,this._myLinearVelocity[2]=0,this._myAngularVelocity[0]=0,this._myAngularVelocity[1]=0,this._myAngularVelocity[2]=0,this._myIsValid=!1,this._myIsLinearVelocityEmulated=!0,this._myIsAngularVelocityEmulated=!0)}else this._myLinearVelocity[0]=0,this._myLinearVelocity[1]=0,this._myLinearVelocity[2]=0,this._myAngularVelocity[0]=0,this._myAngularVelocity[1]=0,this._myAngularVelocity[2]=0,this._myIsValid=!1,this._myIsLinearVelocityEmulated=!0,this._myIsAngularVelocityEmulated=!0}_computeEmulatedLinearVelocity(t){t>0?(this._myPosition.vec3_sub(this._myPrevPosition,this._myLinearVelocity),this._myLinearVelocity.vec3_scale(1/t,this._myLinearVelocity)):(this._myLinearVelocity[0]=0,this._myLinearVelocity[1]=0,this._myLinearVelocity[2]=0)}_computeEmulatedAngularVelocity(t){if(t>0){let i=this._myRotation.quat_toRadians(this._myOutRotationRadians),o=this._myPrevRotation.quat_toRadians(this._myOutPrevRotationRadians);i.vec3_sub(o,this._myAngularVelocity),this._myAngularVelocity.vec3_scale(1/t,this._myAngularVelocity)}else this._myAngularVelocity[0]=0,this._myAngularVelocity[1]=0,this._myAngularVelocity[2]=0}_onXRSessionStart(t){t.requestReferenceSpace(WebXR.refSpace).then(function(i){this._myReferenceSpace=i}.bind(this))}_onXRSessionEnd(t){this._myReferenceSpace=null}}});var Me=S(()=>{PP.Handedness={LEFT:"left",RIGHT:"right"};PP.HandednessIndex={LEFT:0,RIGHT:1};PP.InputSourceType={GAMEPAD:0,HAND:1}});var Ae=S(()=>{PP.InputUtils={getHandednessByIndex:function(e){let t=null;switch(e){case PP.HandednessIndex.LEFT:t=PP.Handedness.LEFT;break;case PP.HandednessIndex.RIGHT:t=PP.Handedness.RIGHT;break}return t},getInputSource:function(e,t){let i=null;if(WL.xrSession&&WL.xrSession.inputSources)for(let o=0;o<WL.xrSession.inputSources.length;o++){let n=WL.xrSession.inputSources[o];if((!t||t==PP.InputSourceType.GAMEPAD&&!n.hand||t==PP.InputSourceType.HAND&&n.hand)&&n.handedness==e){i=n;break}}return i},getInputSourceType:function(e){let t=null,i=PP.InputUtils.getInputSource(e);return i&&(i.hand?t=PP.InputSourceType.HAND:t=PP.InputSourceType.GAMEPAD),t}}});var Ve=S(()=>{WL.registerComponent("pp-gamepad-animator",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_mySelect:{type:WL.Type.Object,default:null},_mySqueeze:{type:WL.Type.Object,default:null},_myThumbstick:{type:WL.Type.Object,default:null},_myBottomButton:{type:WL.Type.Object,default:null},_myTopButton:{type:WL.Type.Object,default:null}},{init:function(){this._myGamepad=null,this._myNormalDiffuseButtonColor=null,this._myNormalAmbientButtonColor=null,this._myIsTouchedDiffuseButtonColor=null,this._myIsTouchedAmbientButtonColor=null,this._myThumbstickInitialLocalForward=this._getLocalAxis(this._myThumbstick,[0,0,1]),this._myThumbstickForward=[0,0,1],this._mySelectForward=[0,0,1],this._myIsMeshEnabled=!1},start:function(){this._myHandedness==0?this._myGamepad=PP.myLeftGamepad:this._myGamepad=PP.myRightGamepad,this._mySelectMaterial=this._mySelect.getComponent("mesh").material.clone(),this._mySelect.getComponent("mesh").material=this._mySelectMaterial,this._mySelectPosition=new Float32Array(3),this._mySelect.getTranslationLocal(this._mySelectPosition),this._myNormalDiffuseButtonColor&&(this._mySelectMaterial.diffuseColor=this._myNormalDiffuseButtonColor,this._mySelectMaterial.ambientColor=this._myNormalAmbientButtonColor),this._mySqueezeMaterial=this._mySqueeze.getComponent("mesh").material.clone(),this._mySqueeze.getComponent("mesh").material=this._mySqueezeMaterial,this._mySqueezePosition=new Float32Array(3),this._mySqueeze.getTranslationLocal(this._mySqueezePosition),this._myNormalDiffuseButtonColor&&(this._mySqueezeMaterial.diffuseColor=this._myNormalDiffuseButtonColor,this._mySqueezeMaterial.ambientColor=this._myNormalAmbientButtonColor),this._myThumbstickMaterial=this._myThumbstick.getComponent("mesh").material.clone(),this._myThumbstick.getComponent("mesh").material=this._myThumbstickMaterial,this._myThumbstickPosition=new Float32Array(3),this._myThumbstick.getTranslationLocal(this._myThumbstickPosition),this._myNormalDiffuseButtonColor&&(this._myThumbstickMaterial.diffuseColor=this._myNormalDiffuseButtonColor,this._myThumbstickMaterial.ambientColor=this._myNormalAmbientButtonColor),this._myBottomButtonMaterial=this._myBottomButton.getComponent("mesh").material.clone(),this._myBottomButton.getComponent("mesh").material=this._myBottomButtonMaterial,this._myBottomButtonPosition=new Float32Array(3),this._myBottomButton.getTranslationLocal(this._myBottomButtonPosition),this._myNormalDiffuseButtonColor&&(this._myBottomButtonMaterial.diffuseColor=this._myNormalDiffuseButtonColor,this._myBottomButtonMaterial.ambientColor=this._myNormalAmbientButtonColor),this._myTopButtonMaterial=this._myTopButton.getComponent("mesh").material.clone(),this._myTopButton.getComponent("mesh").material=this._myTopButtonMaterial,this._myTopButtonPosition=new Float32Array(3),this._myTopButton.getTranslationLocal(this._myTopButtonPosition),this._myNormalDiffuseButtonColor&&(this._myTopButtonMaterial.diffuseColor=this._myNormalDiffuseButtonColor,this._myTopButtonMaterial.ambientColor=this._myNormalAmbientButtonColor),this._myGamepad.registerButtonEventListener(PP.ButtonType.THUMBSTICK,PP.ButtonEvent.PRESS_START,this,this._thumbstickPressedStart.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.THUMBSTICK,PP.ButtonEvent.PRESS_END,this,this._thumbstickPressedEnd.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.BOTTOM_BUTTON,PP.ButtonEvent.PRESS_START,this,this._bottomButtonPressedStart.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.BOTTOM_BUTTON,PP.ButtonEvent.PRESS_END,this,this._bottomButtonPressedEnd.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.TOP_BUTTON,PP.ButtonEvent.PRESS_START,this,this._topButtonPressedStart.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.TOP_BUTTON,PP.ButtonEvent.PRESS_END,this,this._topButtonPressedEnd.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.SELECT,PP.ButtonEvent.TOUCH_START,this,this._selectTouchedStart.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.SELECT,PP.ButtonEvent.TOUCH_END,this,this._selectTouchedEnd.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.SQUEEZE,PP.ButtonEvent.TOUCH_START,this,this._squeezeTouchedStart.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.SQUEEZE,PP.ButtonEvent.TOUCH_END,this,this._squeezeTouchedEnd.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.THUMBSTICK,PP.ButtonEvent.TOUCH_START,this,this._thumbstickTouchedStart.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.THUMBSTICK,PP.ButtonEvent.TOUCH_END,this,this._thumbstickTouchedEnd.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.BOTTOM_BUTTON,PP.ButtonEvent.TOUCH_START,this,this._bottomButtonTouchedStart.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.BOTTOM_BUTTON,PP.ButtonEvent.TOUCH_END,this,this._bottomButtonTouchedEnd.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.TOP_BUTTON,PP.ButtonEvent.TOUCH_START,this,this._topButtonTouchedStart.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.TOP_BUTTON,PP.ButtonEvent.TOUCH_END,this,this._topButtonTouchedEnd.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.SQUEEZE,PP.ButtonEvent.VALUE_CHANGED,this,this._squeezeValueChanged.bind(this)),this._myGamepad.registerButtonEventListener(PP.ButtonType.SELECT,PP.ButtonEvent.VALUE_CHANGED,this,this._selectValueChanged.bind(this)),this._myGamepad.registerAxesEventListener(PP.AxesEvent.AXES_CHANGED,this,this._axesValueChanged.bind(this)),this.object.pp_setScaleLocal([1e-5,1e-5,1e-5])},update:function(e){this._enableMeshInSession()},_thumbstickPressedStart:function(e,t){let i=PP.vec3_create();this._myThumbstickInitialLocalForward.vec3_scale(.0015,i),this._myThumbstick.translate(i)},_thumbstickPressedEnd:function(e,t){let i=PP.vec3_create();this._myThumbstickInitialLocalForward.vec3_scale(-.0015,i),this._myThumbstick.translate(i)},_bottomButtonPressedStart:function(e,t){this._translateLocalAxis(this._myBottomButton,[0,0,1],.002)},_bottomButtonPressedEnd:function(e,t){this._translateLocalAxis(this._myBottomButton,[0,0,1],-.002)},_topButtonPressedStart:function(e,t){this._translateLocalAxis(this._myTopButton,[0,0,1],.002)},_topButtonPressedEnd:function(e,t){this._translateLocalAxis(this._myTopButton,[0,0,1],-.002)},_selectTouchedStart:function(e,t){this._myNormalDiffuseButtonColor&&(this._mySelectMaterial.diffuseColor=this._myIsTouchedDiffuseButtonColor,this._mySelectMaterial.ambientColor=this._myIsTouchedAmbientButtonColor)},_selectTouchedEnd:function(e,t){this._myNormalDiffuseButtonColor&&(this._mySelectMaterial.diffuseColor=this._myNormalDiffuseButtonColor,this._mySelectMaterial.ambientColor=this._myNormalAmbientButtonColor)},_squeezeTouchedStart:function(e,t){this._myNormalDiffuseButtonColor&&(this._mySqueezeMaterial.diffuseColor=this._myIsTouchedDiffuseButtonColor,this._mySqueezeMaterial.ambientColor=this._myIsTouchedAmbientButtonColor)},_squeezeTouchedEnd:function(e,t){this._myNormalDiffuseButtonColor&&(this._mySqueezeMaterial.diffuseColor=this._myNormalDiffuseButtonColor,this._mySqueezeMaterial.ambientColor=this._myNormalAmbientButtonColor)},_thumbstickTouchedStart:function(e,t){this._myNormalDiffuseButtonColor&&(this._myThumbstickMaterial.diffuseColor=this._myIsTouchedDiffuseButtonColor,this._myThumbstickMaterial.ambientColor=this._myIsTouchedAmbientButtonColor)},_thumbstickTouchedEnd:function(e,t){this._myNormalDiffuseButtonColor&&(this._myThumbstickMaterial.diffuseColor=this._myNormalDiffuseButtonColor,this._myThumbstickMaterial.ambientColor=this._myNormalAmbientButtonColor)},_bottomButtonTouchedStart:function(e,t){this._myNormalDiffuseButtonColor&&(this._myBottomButtonMaterial.diffuseColor=this._myIsTouchedDiffuseButtonColor,this._myBottomButtonMaterial.ambientColor=this._myIsTouchedAmbientButtonColor)},_bottomButtonTouchedEnd:function(e,t){this._myNormalDiffuseButtonColor&&(this._myBottomButtonMaterial.diffuseColor=this._myNormalDiffuseButtonColor,this._myBottomButtonMaterial.ambientColor=this._myNormalAmbientButtonColor)},_topButtonTouchedStart:function(e,t){this._myNormalDiffuseButtonColor&&(this._myTopButtonMaterial.diffuseColor=this._myIsTouchedDiffuseButtonColor,this._myTopButtonMaterial.ambientColor=this._myIsTouchedAmbientButtonColor)},_topButtonTouchedEnd:function(e,t){this._myNormalDiffuseButtonColor&&(this._myTopButtonMaterial.diffuseColor=this._myNormalDiffuseButtonColor,this._myTopButtonMaterial.ambientColor=this._myNormalAmbientButtonColor)},_selectValueChanged:function(e,t){this._copyAlignRotation(this._mySelect,this._mySelectForward,[0,0,1]);let i=Math.pp_toRadians(15*e.myValue),o=[0,0,1];o.vec3_rotateAxisRadians(i,[1,0,0],o),o.vec3_normalize(o),this._copyAlignRotation(this._mySelect,[0,0,1],o),this._mySelectForward=o},_squeezeValueChanged:function(e,t){this._mySqueeze.setTranslationLocal(this._mySqueezePosition);let i=.0015;this._myHandedness==1&&(i*=-1),this._translateLocalAxis(this._mySqueeze,[1,0,0],i*e.myValue)},_axesValueChanged:function(e,t){this._copyAlignRotation(this._myThumbstick,this._myThumbstickForward,[0,0,1]);let i=new Float32Array(3);[0,0,1].vec3_add([e.myAxes[0],-e.myAxes[1],0],i),i.vec3_normalize(i),this._copyAlignRotation(this._myThumbstick,[0,0,1],i),this._myThumbstickForward=i},_copyAlignRotation:function(e,t,i){let o=new Float32Array(3);t.vec3_cross(i,o),o.vec3_normalize(o);let n=t.vec3_angleRadians(i);n>1e-4&&e.rotateAxisAngleRadObject(o,n)},_translateLocalAxis(e,t,i){let o=this._getLocalAxis(e,t);o.vec3_scale(i,o),e.translate(o)},_getLocalAxis(e,t){let i=PP.vec3_create();return t.vec3_transformQuat(e.transformLocal,i),i.vec3_normalize(i),i},_enableMeshInSession:function(){this._myIsMeshEnabled||WL.xrSession&&(this.object.pp_resetScaleLocal(),this._myIsMeshEnabled=!0)}})});var Le=S(()=>{WL.registerComponent("pp-gamepad-manager",{_myFixForward:{type:WL.Type.Bool,default:!0}},{init:function(){this._myGamepadManager=new PP.GamepadManager(this._myFixForward),PP.myLeftGamepad=this._myGamepadManager.getLeftGamepad(),PP.myRightGamepad=this._myGamepadManager.getRightGamepad(),PP.myGamepads=this._myGamepadManager.getGamepads()},start:function(){this._myGamepadManager.start()},update:function(e){this._myGamepadManager.update(e)}});PP.myLeftGamepad=null;PP.myRightGamepad=null;PP.myGamepads=null});var Re=S(()=>{PP.GamepadManager=class{constructor(t=!0,i=!1){this._myLeftGamepad=new PP.Gamepad(PP.Handedness.LEFT,t,i),this._myRightGamepad=new PP.Gamepad(PP.Handedness.RIGHT,t,i)}start(){this._myLeftGamepad.start(),this._myRightGamepad.start()}update(t){this._myLeftGamepad.update(t),this._myRightGamepad.update(t)}getLeftGamepad(){return this._myLeftGamepad}getRightGamepad(){return this._myRightGamepad}getGamepad(t){let i=null;switch(t){case PP.Handedness.LEFT:i=this._myLeftGamepad;break;case PP.Handedness.RIGHT:i=this._myRightGamepad;break;default:i=null}return i}getGamepads(){let t=[];return t[PP.Handedness.LEFT]=this._myLeftGamepad,t[PP.Handedness.RIGHT]=this._myRightGamepad,t}}});var De=S(()=>{PP.GamepadUtils={_mySimultaneousPressMaxDelay:.15,_mySimultaneousTouchMaxDelay:.15,setSimultaneousPressMaxDelay:function(e){PP.GamepadUtils._mySimultaneousPressMaxDelay=e},setSimultaneousTouchMaxDelay:function(e){PP.GamepadUtils._mySimultaneousTouchMaxDelay=e},getSimultaneousPressMaxDelay:function(){return PP.GamepadUtils._mySimultaneousPressMaxDelay},getSimultaneousTouchMaxDelay:function(){return PP.GamepadUtils._mySimultaneousTouchMaxDelay},isAnyButtonPressStart:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let n of i)if(n.length==1)for(let s in PP.ButtonType)n.push(PP.ButtonType[s]);let o=!1;for(let n of i){let s=n[0];for(let a=1;a<n.length;a++){let l=n[a];if(s.getButtonInfo(l).isPressStart(t)){o=!0;break}}if(o)break}return o},areButtonsPressStart:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let s of i)if(s.length==1)for(let a in PP.ButtonType)s.push(PP.ButtonType[a]);let o=!0,n=!1;for(let s of i){let a=s[0];for(let l=1;l<s.length;l++){let m=s[l],h=a.getButtonInfo(m);if(!(h.myIsPressed&&(t==null||h.myMultiplePressStartCount==t)&&h.myTimePressed<PP.GamepadUtils._mySimultaneousPressMaxDelay)){o=!1;break}h.isPressStart(t)&&(n=!0)}if(!o)break}return o&&n},isAnyButtonPressEnd:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let n of i)if(n.length==1)for(let s in PP.ButtonType)n.push(PP.ButtonType[s]);let o=!1;for(let n of i){let s=n[0];for(let a=1;a<n.length;a++){let l=n[a];if(s.getButtonInfo(l).isPressEnd(t)){o=!0;break}}if(o)break}return o},areButtonsPressEnd:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let s of i)if(s.length==1)for(let a in PP.ButtonType)s.push(PP.ButtonType[a]);let o=!0,n=!1;for(let s of i){let a=s[0];for(let l=1;l<s.length;l++){let m=s[l],h=a.getButtonInfo(m);if(!(!h.myIsPressed&&(t==null||h.myMultiplePressEndCount==t)&&h.myTimeNotPressed<PP.GamepadUtils._mySimultaneousPressMaxDelay)){o=!1;break}h.isPressEnd(t)&&(n=!0)}if(!o)break}return o&&n},isAnyButtonTouchStart:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let n of i)if(n.length==1)for(let s in PP.ButtonType)n.push(PP.ButtonType[s]);let o=!1;for(let n of i){let s=n[0];for(let a=1;a<n.length;a++){let l=n[a];if(s.getButtonInfo(l).isTouchStart(t)){o=!0;break}}if(o)break}return o},areButtonsTouchStart:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let s of i)if(s.length==1)for(let a in PP.ButtonType)s.push(PP.ButtonType[a]);let o=!0,n=!1;for(let s of i){let a=s[0];for(let l=1;l<s.length;l++){let m=s[l],h=a.getButtonInfo(m);if(!(h.myIsTouched&&(t==null||h.myMultipleTouchStartCount==t)&&h.myTimeTouched<PP.GamepadUtils._mySimultaneousTouchMaxDelay)){o=!1;break}h.isTouchStart(t)&&(n=!0)}if(!o)break}return o&&n},isAnyButtonTouchEnd:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let n of i)if(n.length==1)for(let s in PP.ButtonType)n.push(PP.ButtonType[s]);let o=!1;for(let n of i){let s=n[0];for(let a=1;a<n.length;a++){let l=n[a];if(s.getButtonInfo(l).isTouchEnd(t)){o=!0;break}}if(o)break}return o},areButtonsTouchEnd:function(...e){let t=null,i=e;isNaN(e[0])||(t=e[0],i=e.slice(1));for(let s of i)if(s.length==1)for(let a in PP.ButtonType)s.push(PP.ButtonType[a]);let o=!0,n=!1;for(let s of i){let a=s[0];for(let l=1;l<s.length;l++){let m=s[l],h=a.getButtonInfo(m);if(!(!h.myIsTouched&&(t==null||h.myMultipleTouchEndCount==t)&&h.myTimeNotTouched<PP.GamepadUtils._mySimultaneousTouchMaxDelay)){o=!1;break}h.isTouchEnd(t)&&(n=!0)}if(!o)break}return o&&n}}});var We=S(()=>{PP.ButtonType={SELECT:0,SQUEEZE:1,THUMBSTICK:3,BOTTOM_BUTTON:4,TOP_BUTTON:5};PP.ButtonEvent={PRESS_START:0,PRESS_END:1,PRESSED:2,NOT_PRESSED:3,TOUCH_START:4,TOUCH_END:5,TOUCHED:6,NOT_TOUCHED:7,VALUE_CHANGED:8,ALWAYS:9};PP.AxesEvent={X_CHANGED:0,Y_CHANGED:1,AXES_CHANGED:2,ALWAYS:3};PP.ButtonInfo=class Ie{constructor(t,i){this.myType=t,this.myHandedness=i,this.myIsPressed=!1,this.myPrevIsPressed=!1,this.myIsTouched=!1,this.myPrevIsTouched=!1,this.myValue=0,this.myPrevValue=0,this.myTimePressed=0,this.myPrevTimePressed=0,this.myTimeNotPressed=0,this.myPrevTimeNotPressed=0,this.myTimeTouched=0,this.myPrevTimeTouched=0,this.myTimeNotTouched=0,this.myPrevTimeNotTouched=0,this.myMultiplePressStartCount=0,this.myPrevMultiplePressStartCount=0,this.myMultiplePressEndCount=0,this.myPrevMultiplePressEndCount=0,this.myMultipleTouchStartCount=0,this.myPrevMultipleTouchStartCount=0,this.myMultipleTouchEndCount=0,this.myPrevMultipleTouchEndCount=0}getType(){return this.myType}getHandedness(){return this.myHandedness}getValue(){return this.myValue}isPressed(){return this.myIsPressed}isTouched(){return this.myIsTouched}isPressStart(t=null){return this.myIsPressed&&!this.myPrevIsPressed&&(t==null||this.myMultiplePressStartCount==t)}isPressEnd(t=null){return!this.myIsPressed&&this.myPrevIsPressed&&(t==null||this.myMultiplePressEndCount==t)}isTouchStart(t=null){return this.myIsTouched&&!this.myPrevIsTouched&&(t==null||this.myMultipleTouchStartCount==t)}isTouchEnd(t=null){return!this.myIsTouched&&this.myPrevIsTouched&&(t==null||this.myMultipleTouchEndCount==t)}clone(){let t=new Ie(this.myType,this.myHandedness);return t.myIsPressed=this.myIsPressed,t.myPrevIsPressed=this.myPrevIsPressed,t.myIsTouched=this.myIsTouched,t.myPrevIsTouched=this.myPrevIsTouched,t.myValue=this.myValue,t.myPrevValue=this.myPrevValue,t.myTimePressed=this.myTimePressed,t.myPrevTimePressed=this.myPrevTimePressed,t.myTimeNotPressed=this.myTimeNotPressed,t.myPrevTimeNotPressed=this.myPrevTimeNotPressed,t.myTimeTouched=this.myTimeTouched,t.myPrevTimeTouched=this.myPrevTimeTouched,t.myTimeNotTouched=this.myTimeNotTouched,t.myPrevTimeNotTouched=this.myPrevTimeNotTouched,t.myMultiplePressStartCount=this.myMultiplePressStartCount,t.myPrevMultiplePressStartCount=this.myPrevMultiplePressStartCount,t.myMultiplePressEndCount=this.myMultiplePressEndCount,t.myPrevMultiplePressEndCount=this.myPrevMultiplePressEndCount,t.myMultipleTouchStartCount=this.myMultipleTouchStartCount,t.myPrevMultipleTouchStartCount=this.myPrevMultipleTouchStartCount,t.myMultipleTouchEndCount=this.myMultipleTouchEndCount,t.myPrevMultipleTouchEndCount=this.myPrevMultipleTouchEndCount,t}};PP.AxesInfo=class Ee{constructor(t){this.myHandedness=t,this.myAxes=new Float32Array(2),this.myAxes.fill(0),this.myPrevAxes=new Float32Array(2),this.myPrevAxes.fill(0)}getAxes(){return this.myAxes}getHandedness(){return this.myHandedness}clone(){let t=new Ee(this.myHandedness);return t.myAxes=this.myAxes,t.myPrevAxes=this.myPrevAxes,t}};PP.PulseInfo=class Oe{constructor(){this.myIntensity=0,this.myDuration=0,this.myIsDevicePulsing=!1}clone(){let t=new Oe;return t.myIntensity=this.myIntensity,t.myDuration=this.myDuration,t.myIsDevicePulsing=this.myIsDevicePulsing,t}};PP.Gamepad=class{constructor(t,i=!0,o=!1){this._myHandedness=t,this._myButtonInfos=[];for(let n in PP.ButtonType)this._myButtonInfos[PP.ButtonType[n]]=new PP.ButtonInfo(PP.ButtonType[n],this._myHandedness);this._myAxesInfo=new PP.AxesInfo(this._myHandedness),this._mySelectStart=!1,this._mySelectEnd=!1,this._mySqueezeStart=!1,this._mySqueezeEnd=!1,this._myIsXRSessionActive=!1,this._myInputSource=null,this._myGamepad=null,this._myButtonCallbacks=[];for(let n in PP.ButtonType){this._myButtonCallbacks[PP.ButtonType[n]]=[];for(let s in PP.ButtonEvent)this._myButtonCallbacks[PP.ButtonType[n]][PP.ButtonEvent[s]]=new Map}this._myAxesCallbacks=[];for(let n in PP.AxesEvent)this._myAxesCallbacks[PP.AxesEvent[n]]=new Map;this._myPulseInfo=new PP.PulseInfo,this._myHandPose=new PP.HandPose(this._myHandedness,i,o),this._myMultiplePressMaxDelay=.3,this._myMultipleTouchMaxDelay=.3}getHandedness(){return this._myHandedness}getHandPose(){return this._myHandPose}getButtonInfo(t){return this._myButtonInfos[t]}registerButtonEventListener(t,i,o,n){this._myButtonCallbacks[t][i].set(o,n)}unregisterButtonEventListener(t,i,o){this._myButtonCallbacks[t][i].delete(o)}getAxesInfo(){return this._myAxesInfo}registerAxesEventListener(t,i,o){this._myAxesCallbacks[t].set(i,o)}unregisterAxesEventListener(t,i){this._myAxesCallbacks[t].delete(i)}isGamepadActive(){return this._myIsXRSessionActive&&this._myGamepad!=null&&(this._myGamepad.connected==null||this._myGamepad.connected)}pulse(t,i=0){this._myPulseInfo.myIntensity=Math.min(Math.max(t,0),1),this._myPulseInfo.myDuration=Math.max(i,0)}stopPulse(){this._myPulseInfo.myIntensity=0,this._myPulseInfo.myDuration=0}isPulsing(){return this._myPulseInfo.myIntensity>0||this._myPulseInfo.myDuration>0}getPulseInfo(){return this._myPulseInfo}getMultiplePressMaxDelay(){return this._myMultiplePressMaxDelay}setMultiplePressMaxDelay(t){this._myMultiplePressMaxDelay=t}getMultipleTouchMaxDelay(){return this._myMultipleTouchMaxDelay}setMultipleTouchMaxDelay(t){this._myMultipleTouchMaxDelay=t}start(){this._myHandPose.start(),WL.xrSession&&this._onXRSessionStart(WL.xrSession),WL.onXRSessionStart.push(this._onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this._onXRSessionEnd.bind(this))}update(t){this._updateHandPose(t),this._preUpdateButtonInfos(),this._updateButtonInfos(),this._postUpdateButtonInfos(t),this._preUpdateAxesInfos(),this._updateAxesInfos(),this._postUpdateAxesInfos(),this._updatePulse(t)}_updateHandPose(t){this._myHandPose.update(t),this._myInputSource=this._myHandPose.getInputSource(),this._myInputSource!=null?this._myGamepad=this._myInputSource.gamepad:this._myGamepad=null}_preUpdateButtonInfos(){this._myButtonInfos.forEach(function(t){t.myPrevIsPressed=t.myIsPressed,t.myPrevIsTouched=t.myIsTouched,t.myPrevValue=t.myValue})}_updateButtonInfos(){this._updateSelectAndSqueezePressed(),this._updateSingleButtonInfo(PP.ButtonType.SELECT,!1),this._updateSingleButtonInfo(PP.ButtonType.SQUEEZE,!1),this._updateSingleButtonInfo(PP.ButtonType.THUMBSTICK,!0),this._updateSingleButtonInfo(PP.ButtonType.BOTTOM_BUTTON,!0),this._updateSingleButtonInfo(PP.ButtonType.TOP_BUTTON,!0)}_updateSelectAndSqueezePressed(){let t=this._myButtonInfos[PP.ButtonType.SELECT];this._mySelectStart&&(t.myIsPressed=!0),this._mySelectEnd&&(t.myIsPressed=!1);let i=this._myButtonInfos[PP.ButtonType.SQUEEZE];this._mySqueezeStart&&(i.myIsPressed=!0),this._mySqueezeEnd&&(i.myIsPressed=!1),this.isGamepadActive()||(t.myIsPressed=!1,i.myIsPressed=!1)}_updateSingleButtonInfo(t,i){let o=this._myButtonInfos[t],n=this._getInternalButton(t);i&&(o.myIsPressed=n.pressed),o.myIsTouched=n.touched,o.myValue=n.value}_postUpdateButtonInfos(t){this._myButtonInfos.forEach(function(i){i.myIsPressed?(i.myTimePressed+=t,i.myPrevIsPressed||(i.myMultiplePressStartCount+=1,i.myPrevTimeNotPressed=i.myTimeNotPressed,i.myTimeNotPressed=0),i.myPrevTimeNotPressed+i.myTimePressed>this._myMultiplePressMaxDelay&&i.myMultiplePressEndCount>0&&(i.myPrevMultiplePressEndCount=i.myMultiplePressEndCount,i.myMultiplePressEndCount=0),i.myTimePressed>this._myMultiplePressMaxDelay&&i.myMultiplePressStartCount>0&&(i.myPrevMultiplePressStartCount=i.myMultiplePressStartCount,i.myMultiplePressStartCount=0)):(i.myTimeNotPressed+=t,i.myPrevIsPressed&&(i.myMultiplePressEndCount+=1,i.myPrevTimePressed=i.myTimePressed,i.myTimePressed=0),i.myPrevTimePressed+i.myTimeNotPressed>this._myMultiplePressMaxDelay&&i.myMultiplePressStartCount>0&&(i.myPrevMultiplePressStartCount=i.myMultiplePressStartCount,i.myMultiplePressStartCount=0),i.myTimeNotPressed>this._myMultiplePressMaxDelay&&i.myMultiplePressEndCount>0&&(i.myPrevMultiplePressEndCount=i.myMultiplePressEndCount,i.myMultiplePressEndCount=0)),i.myIsTouched?(i.myTimeTouched+=t,i.myPrevIsTouched||(i.myMultipleTouchStartCount+=1,i.myPrevTimeNotTouched=i.myTimeNotTouched,i.myTimeNotTouched=0),i.myPrevTimeNotTouched+i.myTimeTouched>this._myMultipleTouchMaxDelay&&i.myMultipleTouchEndCount>0&&(i.myPrevMultipleTouchEndCount=i.myMultipleTouchEndCount,i.myMultipleTouchEndCount=0),i.myTimeTouched>this._myMultipleTouchMaxDelay&&i.myMultipleTouchStartCount>0&&(i.myPrevMultipleTouchStartCount=i.myMultipleTouchStartCount,i.myMultipleTouchStartCount=0)):(i.myTimeNotTouched+=t,i.myPrevIsTouched&&(i.myMultipleTouchEndCount+=1,i.myPrevTimeTouched=i.myTimeTouched,i.myTimeTouched=0),i.myPrevTimeTouched+i.myTimeNotTouched>this._myMultipleTouchMaxDelay&&i.myMultipleTouchStartCount>0&&(i.myPrevMultipleTouchStartCount=i.myMultipleTouchStartCount,i.myMultipleTouchStartCount=0),i.myTimeNotTouched>this._myMultipleTouchMaxDelay&&i.myMultipleTouchEndCount>0&&(i.myPrevMultipleTouchEndCount=i.myMultipleTouchEndCount,i.myMultipleTouchEndCount=0))}.bind(this));for(let i in PP.ButtonType){let o=this._myButtonInfos[PP.ButtonType[i]],n=this._myButtonCallbacks[PP.ButtonType[i]];if(o.myIsPressed&&!o.myPrevIsPressed){let a=n[PP.ButtonEvent.PRESS_START];this._triggerCallbacks(a,o)}if(!o.myIsPressed&&o.myPrevIsPressed){let a=n[PP.ButtonEvent.PRESS_END];this._triggerCallbacks(a,o)}if(o.myIsPressed){let a=n[PP.ButtonEvent.PRESSED];this._triggerCallbacks(a,o)}else{let a=n[PP.ButtonEvent.NOT_PRESSED];this._triggerCallbacks(a,o)}if(o.myIsTouched&&!o.myPrevIsTouched){let a=n[PP.ButtonEvent.TOUCH_START];this._triggerCallbacks(a,o)}if(!o.myIsTouched&&o.myPrevIsTouched){let a=n[PP.ButtonEvent.TOUCH_END];this._triggerCallbacks(a,o)}if(o.myIsTouched){let a=n[PP.ButtonEvent.TOUCHED];this._triggerCallbacks(a,o)}else{let a=n[PP.ButtonEvent.NOT_TOUCHED];this._triggerCallbacks(a,o)}if(o.myValue!=o.myPrevValue){let a=n[PP.ButtonEvent.VALUE_CHANGED];this._triggerCallbacks(a,o)}let s=n[PP.ButtonEvent.ALWAYS];this._triggerCallbacks(s,o)}this._mySelectStart=!1,this._mySelectEnd=!1,this._mySqueezeStart=!1,this._mySqueezeEnd=!1}_preUpdateAxesInfos(){this._myAxesInfo.myPrevAxes=this._myAxesInfo.myAxes}_updateAxesInfos(){this._myAxesInfo.myAxes=this._getInternalAxes()}_postUpdateAxesInfos(){if(this._myAxesInfo.myAxes[0]!=this._myAxesInfo.myPrevAxes[0]){let i=this._myAxesCallbacks[PP.AxesEvent.X_CHANGED];this._triggerCallbacks(i,this._myAxesInfo)}if(this._myAxesInfo.myAxes[1]!=this._myAxesInfo.myPrevAxes[1]){let i=this._myAxesCallbacks[PP.AxesEvent.Y_CHANGED];this._triggerCallbacks(i,this._myAxesInfo)}if(this._myAxesInfo.myAxes[0]!=this._myAxesInfo.myPrevAxes[0]||this._myAxesInfo.myAxes[1]!=this._myAxesInfo.myPrevAxes[1]){let i=this._myAxesCallbacks[PP.AxesEvent.AXES_CHANGED];this._triggerCallbacks(i,this._myAxesInfo)}let t=this._myAxesCallbacks[PP.AxesEvent.ALWAYS];this._triggerCallbacks(t,this._myAxesInfo)}_getInternalButton(t){let i={pressed:!1,touched:!1,value:0};if(this.isGamepadActive()){if(t<this._myGamepad.buttons.length){let o=this._myGamepad.buttons[t];i.pressed=o.pressed,i.touched=o.touched,i.value=o.value}else if(t==PP.ButtonType.BOTTOM_BUTTON&&this._myGamepad.buttons.length>=3){let o=this._myGamepad.buttons[2];i.pressed=o.pressed,i.touched=o.touched,i.value=o.value}}return i}_getInternalAxes(){let t=[0,0];if(this.isGamepadActive()){let i=this._myGamepad.axes;i.length==4?(Math.abs(i[0])>Math.abs(i[2])?t[0]=i[0]:t[0]=i[2],Math.abs(i[1])>Math.abs(i[3])?t[1]=i[1]:t[1]=i[3]):i.length==2&&(t[0]=i[0],t[1]=i[1]),t[1]=-t[1]}return t}_updatePulse(t){let i=this._getHapticActuator();i&&(this._myPulseInfo.myIntensity>0?(i.pulse(this._myPulseInfo.myIntensity,1e3),this._myPulseInfo.myIsDevicePulsing=!0):this._myPulseInfo.myIsDevicePulsing&&(i.reset(),this._myPulseInfo.myIsDevicePulsing=!1)),this._myPulseInfo.myDuration-=t,this._myPulseInfo.myDuration<=0&&(this._myPulseInfo.myIntensity=0,this._myPulseInfo.myDuration=0)}_getHapticActuator(){let t=null;return this.isGamepadActive()&&(this._myGamepad.hapticActuators&&this._myGamepad.hapticActuators.length>0?t=this._myGamepad.hapticActuators[0]:t=this._myGamepad.vibrationActuator),t}_onXRSessionStart(t){t.addEventListener("selectstart",this._selectStart.bind(this)),t.addEventListener("selectend",this._selectEnd.bind(this)),t.addEventListener("squeezestart",this._squeezeStart.bind(this)),t.addEventListener("squeezeend",this._squeezeEnd.bind(this)),this._myIsXRSessionActive=!0}_onXRSessionEnd(t){this._myIsXRSessionActive=!1}_selectStart(t){this._myInputSource!=null&&this._myInputSource==t.inputSource&&(this._mySelectStart=!0)}_selectEnd(t){this._myInputSource!=null&&this._myInputSource==t.inputSource&&(this._mySelectEnd=!0)}_squeezeStart(t){this._myInputSource!=null&&this._myInputSource==t.inputSource&&(this._mySqueezeStart=!0)}_squeezeEnd(t){this._myInputSource!=null&&this._myInputSource==t.inputSource&&(this._mySqueezeEnd=!0)}_triggerCallbacks(t,i){for(let o of t.values())o(i,this)}}});var ke=S(()=>{WL&&WL.Object&&(WL.MeshComponent.prototype.pp_clone=function(e,t,i){t.shouldDeepCloneComponentVariable("mesh","material")?e.material=this.material.clone():e.material=this.material,e.mesh=this.mesh,e.skin=this.skin},WL.CollisionComponent.prototype.pp_clone=function(e,t,i){e.collider=this.collider,e.extents=this.extents.slice(0),e.group=this.group},WL.TextComponent.prototype.pp_clone=function(e,t,i){t.shouldDeepCloneComponent("text")?e.text=this.text.slice(0):e.text=this.text,t.shouldDeepCloneComponentVariable("text","material")?e.material=this.material.clone():e.material=this.material,e.alignment=this.alignment,e.justification=this.justification},WL.PhysXComponent.prototype.pp_clone=function(e,t,i){e.angularDamping=this.angularDamping,e.angularVelocity=this.angularVelocity.slice(0),e.dynamicFriction=this.dynamicFriction,e.extents=this.extents.slice(0),e.kinematic=this.kinematic,e.linearDamping=this.linearDamping,e.linearVelocity=this.linearVelocity.slice(0),e.mass=this.mass,e.restitution=this.restitution,e.shape=this.shape,e.static=this.static,e.staticFriction=this.staticFriction},Object.defineProperty(WL.MeshComponent.prototype,"pp_clone",{enumerable:!1}),Object.defineProperty(WL.CollisionComponent.prototype,"pp_clone",{enumerable:!1}),Object.defineProperty(WL.TextComponent.prototype,"pp_clone",{enumerable:!1}),Object.defineProperty(WL.PhysXComponent.prototype,"pp_clone",{enumerable:!1}))});var Fe=S(()=>{_WL&&_WL._componentTypes&&_WL._componentTypes[_WL._componentTypeIndices.cursor]?(_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.init=function(){this.session=null,this.collisionMask=1<<this.collisionGroup,this.maxDistance=100,this.doubleClickTimer=0,this.tripleClickTimer=0,this.multipleClickObject=null,this.multipleClickDelay=.3,this.visible=!1;let e=this.onDestroy.bind(this);WL.onSceneLoaded.push(e),this.onDestroyCallbacks=[()=>{let t=WL.onSceneLoaded.indexOf(e);t>=0&&WL.onSceneLoaded.splice(t,1)}]},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.start=function(){if(this.handedness==0){let t=this.object.getComponent("input");t?(this.handedness=t.handedness,this.input=t):console.warn("cursor component on object",this.object.name,'was configured with handedness "input component", but object has no input component.')}else this.handedness=["left","right"][this.handedness-1];if(this.globalTarget=this.object.addComponent("cursor-target"),this.origin=new Float32Array(3),this.cursorObjScale=new Float32Array(3),this.direction=[0,0,0],this.tempQuat=new Float32Array(4),this.viewComponent=this.object.getComponent("view"),this.viewComponent!=null){let t=this.onClick.bind(this);WL.canvas.addEventListener("click",t);let i=this.onPointerMove.bind(this);WL.canvas.addEventListener("pointermove",i);let o=this.onPointerDown.bind(this);WL.canvas.addEventListener("pointerdown",o);let n=this.onPointerUp.bind(this);WL.canvas.addEventListener("pointerup",n),this.projectionMatrix=new Float32Array(16),mat4.invert(this.projectionMatrix,this.viewComponent.projectionMatrix);let s=this.onViewportResize.bind(this);window.addEventListener("resize",s),this.onDestroyCallbacks.push(()=>{WL.canvas.removeEventListener("click",t),WL.canvas.removeEventListener("pointermove",i),WL.canvas.removeEventListener("pointerdown",o),WL.canvas.removeEventListener("pointerup",n),window.removeEventListener("resize",s)})}this.isHovering=!1,this.visible=!0,this.isDown=!1,this.lastIsDown=!1,this.isUpWithNoDown=!1,this.isRealDown=!1,this.cursorPos=new Float32Array(3),this.hoveringObject=null;let e=this.setupVREvents.bind(this);WL.onXRSessionStart.push(e),this.onDestroyCallbacks.push(()=>{let t=WL.onXRSessionStart.indexOf(e);t>=0&&WL.onXRSessionStart.splice(t,1)}),this.showRay=!0,this.cursorRayObject&&(this.cursorRayObject.pp_setActive(!0),this.showRay=!1,this.cursorRayScale=new Float32Array(3),this.cursorRayScale.set(this.cursorRayObject.scalingLocal),this.object.getTranslationWorld(this.origin),this.object.getForward(this.direction),this._setCursorRayTransform([this.origin[0]+this.direction[0],this.origin[1]+this.direction[1],this.origin[2]+this.direction[2]])),this._setCursorVisibility(!1)},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.onViewportResize=function(){!this.viewComponent||mat4.invert(this.projectionMatrix,this.viewComponent.projectionMatrix)},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto._setCursorRayTransform=function(e){if(!this.cursorRayObject)return;let t=vec3.dist(this.origin,e);this.cursorRayObject.setTranslationLocal([0,0,-t/2]),this.cursorRayScalingAxis!=4&&(this.cursorRayObject.resetScaling(),this.cursorRayScale[this.cursorRayScalingAxis]=t/2,this.cursorRayObject.scale(this.cursorRayScale))},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto._setCursorVisibility=function(e){this.visible!=e&&(this.visible=e,this.cursorObject&&(e?this.cursorObject.pp_setActive(!0):this.cursorObject.pp_setActive(!1)))},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.update=function(e){this.doubleClickTimer>0&&(this.doubleClickTimer-=e),this.tripleClickTimer>0&&(this.tripleClickTimer-=e),this.doUpdate(!1),this.isUpWithNoDown=!1},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.doUpdate=function(e){if(this.session){if(this.arTouchDown&&this.input&&WL.xrSession.inputSources[0].handedness==="none"&&WL.xrSession.inputSources[0].gamepad){let i=WL.xrSession.inputSources[0].gamepad.axes;this.direction=[i[0],-i[1],-1],this.updateDirection()}else this.object.getTranslationWorld(this.origin),this.object.getForward(this.direction);let t=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(this.origin,this.direction,this.collisionMask):WL.physics.rayCast(this.origin,this.direction,this.collisionMask,this.maxDistance);t.hitCount>0?this.cursorPos.set(t.locations[0]):this.cursorPos.fill(0),this.hoverBehaviour(t,e)}this.cursorObject&&(this.hoveringObject&&(this.cursorPos[0]!=0||this.cursorPos[1]!=0||this.cursorPos[2]!=0)?(this._setCursorVisibility(!0),this.cursorObject.setTranslationWorld(this.cursorPos),this._setCursorRayTransform(this.cursorPos)):(this.visible&&this.cursorRayObject&&(this.object.getTranslationWorld(this.origin),this.object.getForward(this.direction),this._setCursorRayTransform([this.origin[0]+this.direction[0],this.origin[1]+this.direction[1],this.origin[2]+this.direction[2]])),this._setCursorVisibility(!1)),this.cursorRayObject&&this.showRay&&(this.cursorRayObject.pp_setActive(!0),this.showRay=!1))},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.hoverBehaviour=function(e,t){if(e.hitCount>0){if(!this.hoveringObject||!this.hoveringObject.equals(e.objects[0])){if(this.hoveringObject){let n=this.hoveringObject.getComponent("cursor-target");n&&n.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this)}this.isDown=!1,this.lastIsDown=!1,this.hoveringObject=e.objects[0],this.styleCursor&&(WL.canvas.style.cursor="pointer");let o=this.hoveringObject.getComponent("cursor-target");o&&(this.hoveringObjectTarget=o,o.onHover(this.hoveringObject,this)),this.globalTarget.onHover(this.hoveringObject,this),this.isRealDown&&(o&&o.onDownOnHover(this.hoveringObject,this),this.globalTarget.onDownOnHover(this.hoveringObject,this))}this.hoveringObjectTarget&&this.hoveringObjectTarget.onMove(this.hoveringObject,this);let i=this.hoveringObject.getComponent("cursor-target");this.isDown!==this.lastIsDown&&this.isDown&&(i&&i.onDown(this.hoveringObject,this),this.globalTarget.onDown(this.hoveringObject,this)),this.isDown!==this.lastIsDown&&!this.isDown&&(this.tripleClickTimer>0&&this.multipleClickObject&&this.multipleClickObject.equals(this.hoveringObject)?(i&&i.onTripleClick(this.hoveringObject,this),this.globalTarget.onTripleClick(this.hoveringObject,this),this.tripleClickTimer=0):this.doubleClickTimer>0&&this.multipleClickObject&&this.multipleClickObject.equals(this.hoveringObject)?(i&&i.onDoubleClick(this.hoveringObject,this),this.globalTarget.onDoubleClick(this.hoveringObject,this),this.tripleClickTimer=this.multipleClickDelay,this.doubleClickTimer=0):(i&&i.onClick(this.hoveringObject,this),this.globalTarget.onClick(this.hoveringObject,this),this.tripleClickTimer=0,this.doubleClickTimer=this.multipleClickDelay,this.multipleClickObject=this.hoveringObject)),this.isDown!==this.lastIsDown&&!this.isDown?(i&&i.onUp(this.hoveringObject,this),this.globalTarget.onUp(this.hoveringObject,this)):this.isUpWithNoDown&&(i&&i.onUpWithNoDown(this.hoveringObject,this),this.globalTarget.onUpWithNoDown(this.hoveringObject,this))}else if(this.hoveringObject&&e.hitCount==0){let i=this.hoveringObject.getComponent("cursor-target");i&&i.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this),this.hoveringObject=null,this.hoveringObjectTarget=null,this.styleCursor&&(WL.canvas.style.cursor="default")}this.hoveringObject?this.lastIsDown=this.isDown:(this.isDown=!1,this.lastIsDown=!1)},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.setupVREvents=function(e){this.session=e;let t=function(s){this.session=null}.bind(this);e.addEventListener("end",t);let i=this.onSelect.bind(this);e.addEventListener("select",i);let o=this.onSelectStart.bind(this);e.addEventListener("selectstart",o);let n=this.onSelectEnd.bind(this);e.addEventListener("selectend",n),this.onDestroyCallbacks.push(()=>{!this.session||(e.removeEventListener("end",t),e.removeEventListener("select",i),e.removeEventListener("selectstart",o),e.removeEventListener("selectend",n))}),this.onViewportResize()},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.onSelect=function(e){},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.onSelectStart=function(e){this.active&&(this.arTouchDown=!0,e.inputSource.handedness==this.handedness&&(this.isDown=!0)),this.isRealDown=!0},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.onSelectEnd=function(e){this.active&&(this.arTouchDown=!1,e.inputSource.handedness==this.handedness&&(this.isDown||(this.isUpWithNoDown=!0),this.isDown=!1)),this.isRealDown=!1},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.onPointerMove=function(e){if(!e.isPrimary)return;let t=e.target.getBoundingClientRect(),i=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.hoverBehaviour(i,!1)},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.onClick=function(e){},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.onPointerDown=function(e){if(this.active){if(!e.isPrimary||e.button!==0)return;let t=e.target.getBoundingClientRect(),i=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.isDown=!0,this.isRealDown=!0,this.hoverBehaviour(i,!1)}else this.isRealDown=!0},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.onPointerUp=function(e){if(this.active){if(!e.isPrimary||e.button!==0)return;let t=e.target.getBoundingClientRect(),i=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.isDown||(this.isUpWithNoDown=!0),this.isDown=!1,this.isRealDown=!1,this.hoverBehaviour(i,!1)}else this.isRealDown=!1},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.updateMousePos=function(e,t,i,o){let n=e/i,s=t/o;return this.direction=[n*2-1,-s*2+1,-1],this.updateDirection()},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.updateDirection=function(){this.object.getTranslationWorld(this.origin),vec3.transformMat4(this.direction,this.direction,this.projectionMatrix),vec3.normalize(this.direction,this.direction),vec3.transformQuat(this.direction,this.direction,this.object.transformWorld);let e=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(this.origin,this.direction,this.collisionMask):WL.physics.rayCast(this.origin,this.direction,this.collisionMask,this.maxDistance);return e.hitCount>0?this.cursorPos.set(e.locations[0]):this.cursorPos.fill(0),e},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.onDeactivate=function(){if(this.hoveringObject){let e=this.hoveringObject.getComponent("cursor-target");e&&e.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this)}this.hoveringObject=null,this.hoveringObjectTarget=null,this.styleCursor&&(WL.canvas.style.cursor="default"),this.isDown=!1,this.lastIsDown=!1,this.isUpWithNoDown=!1,this._setCursorVisibility(!1),this.cursorRayObject&&this.cursorRayObject.pp_setActive(!1)},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.onActivate=function(){this.showRay=!0,this.isDown=!1,this.lastIsDown=!1,this.isUpWithNoDown=!1},_WL._componentTypes[_WL._componentTypeIndices.cursor].proto.onDestroy=function(){for(let e of this.onDestroyCallbacks)e()}):console.error(`Wonderland Engine "cursor" component not found.
 Add the component to your project to avoid any issue with the PP bundle.`)});var je=S(()=>{_WL&&_WL._componentTypes&&_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]]?(_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.init=function(){this.hoverFunctions=[],this.unHoverFunctions=[],this.clickFunctions=[],this.doubleClickFunctions=[],this.tripleClickFunctions=[],this.moveFunctions=[],this.downFunctions=[],this.upFunctions=[],this.downOnHoverFunctions=[],this.upWithNoDownFunctions=[],this.isSurface=!1},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.onHover=function(e,t){for(let i of this.hoverFunctions)i(e,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.onUnhover=function(e,t){for(let i of this.unHoverFunctions)i(e,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.onClick=function(e,t){for(let i of this.clickFunctions)i(e,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.onMove=function(e,t){for(let i of this.moveFunctions)i(e,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.onDown=function(e,t){for(let i of this.downFunctions)i(e,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.onUp=function(e,t){for(let i of this.upFunctions)i(e,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.addHoverFunction=function(e){this._validateCallback(e),this.hoverFunctions.push(e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.removeHoverFunction=function(e){this._validateCallback(e),this._removeItemOnce(this.hoverFunctions,e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.addUnHoverFunction=function(e){this._validateCallback(e),this.unHoverFunctions.push(e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.removeUnHoverFunction=function(e){this._validateCallback(e),this._removeItemOnce(this.unHoverFunctions,e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.addClickFunction=function(e){this._validateCallback(e),this.clickFunctions.push(e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.removeClickFunction=function(e){this._validateCallback(e),this._removeItemOnce(this.clickFunctions,e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.addMoveFunction=function(e){this._validateCallback(e),this.moveFunctions.push(e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.removeMoveFunction=function(e){this._validateCallback(e),this._removeItemOnce(this.moveFunctions,e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.addDownFunction=function(e){this._validateCallback(e),this.downFunctions.push(e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.removeDownFunction=function(e){this._validateCallback(e),this._removeItemOnce(this.downFunctions,e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.addUpFunction=function(e){this._validateCallback(e),this.upFunctions.push(e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.removeUpFunction=function(e){this._validateCallback(e),this._removeItemOnce(this.upFunctions,e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto._removeItemOnce=function(e,t){var i=e.indexOf(t);return i>-1&&e.splice(i,1),e},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto._validateCallback=function(e){if(typeof e!="function")throw new TypeError(this.object.name+".cursor-target: Argument needs to be a function")},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.onDoubleClick=function(e,t){for(let i of this.doubleClickFunctions)i(e,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.addDoubleClickFunction=function(e){this._validateCallback(e),this.doubleClickFunctions.push(e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.removeDoubleClickFunction=function(e){this._validateCallback(e),this._removeItemOnce(this.doubleClickFunctions,e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.onTripleClick=function(e,t){for(let i of this.tripleClickFunctions)i(e,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.addTripleClickFunction=function(e){this._validateCallback(e),this.tripleClickFunctions.push(e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.removeTripleClickFunction=function(e){this._validateCallback(e),this._removeItemOnce(this.tripleClickFunctions,e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.onDownOnHover=function(e,t){for(let i of this.downOnHoverFunctions)i(e,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.addDownOnHoverFunction=function(e){this._validateCallback(e),this.downOnHoverFunctions.push(e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.removeDownOnHoverFunction=function(e){this._validateCallback(e),this._removeItemOnce(this.downOnHoverFunctions,e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.onUpWithNoDown=function(e,t){for(let i of this.upWithNoDownFunctions)i(e,t)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.addUpWithNoDownFunction=function(e){this._validateCallback(e),this.upWithNoDownFunctions.push(e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.removeUpWithNoDownFunction=function(e){this._validateCallback(e),this._removeItemOnce(this.upWithNoDownFunctions,e)},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.start=function(){},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.update=function(e){},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.onActivate=function(){},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.onDeactivate=function(){},_WL._componentTypes[_WL._componentTypeIndices["cursor-target"]].proto.onDestroy=function(){}):console.error(`Wonderland Engine "cursor-target" component not found.
 Add the component to your project to avoid any issue with the PP bundle.`)});var F={};G(F,{ARRAY_TYPE:()=>D,EPSILON:()=>M,RANDOM:()=>q,equals:()=>go,setMatrixArrayType:()=>ho,toRadian:()=>_o});function ho(e){D=e}function _o(e){return e*po}function go(e,t){return Math.abs(e-t)<=M*Math.max(1,Math.abs(e),Math.abs(t))}var M,D,q,po,U=w(()=>{M=1e-6,D=typeof Float32Array<"u"?Float32Array:Array,q=Math.random;po=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})});var R={};G(R,{add:()=>wo,adjoint:()=>Bo,clone:()=>Po,copy:()=>Co,create:()=>dt,determinant:()=>Mo,equals:()=>Uo,exactEquals:()=>Ho,frob:()=>jo,fromMat2d:()=>Eo,fromMat4:()=>fo,fromQuat:()=>Oo,fromRotation:()=>Do,fromScaling:()=>Io,fromTranslation:()=>Ro,fromValues:()=>To,identity:()=>bo,invert:()=>vo,mul:()=>Go,multiply:()=>we,multiplyScalar:()=>qo,multiplyScalarAndAdd:()=>No,normalFromMat4:()=>Wo,projection:()=>ko,rotate:()=>Vo,scale:()=>Lo,set:()=>So,str:()=>Fo,sub:()=>Qo,subtract:()=>qe,translate:()=>Ao,transpose:()=>xo});function dt(){var e=new D(9);return D!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function fo(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Po(e){var t=new D(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Co(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function To(e,t,i,o,n,s,a,l,m){var h=new D(9);return h[0]=e,h[1]=t,h[2]=i,h[3]=o,h[4]=n,h[5]=s,h[6]=a,h[7]=l,h[8]=m,h}function So(e,t,i,o,n,s,a,l,m,h){return e[0]=t,e[1]=i,e[2]=o,e[3]=n,e[4]=s,e[5]=a,e[6]=l,e[7]=m,e[8]=h,e}function bo(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function xo(e,t){if(e===t){var i=t[1],o=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=o,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function vo(e,t){var i=t[0],o=t[1],n=t[2],s=t[3],a=t[4],l=t[5],m=t[6],h=t[7],r=t[8],u=r*a-l*h,c=-r*s+l*m,p=h*s-a*m,_=i*u+o*c+n*p;return _?(_=1/_,e[0]=u*_,e[1]=(-r*o+n*h)*_,e[2]=(l*o-n*a)*_,e[3]=c*_,e[4]=(r*i-n*m)*_,e[5]=(-l*i+n*s)*_,e[6]=p*_,e[7]=(-h*i+o*m)*_,e[8]=(a*i-o*s)*_,e):null}function Bo(e,t){var i=t[0],o=t[1],n=t[2],s=t[3],a=t[4],l=t[5],m=t[6],h=t[7],r=t[8];return e[0]=a*r-l*h,e[1]=n*h-o*r,e[2]=o*l-n*a,e[3]=l*m-s*r,e[4]=i*r-n*m,e[5]=n*s-i*l,e[6]=s*h-a*m,e[7]=o*m-i*h,e[8]=i*a-o*s,e}function Mo(e){var t=e[0],i=e[1],o=e[2],n=e[3],s=e[4],a=e[5],l=e[6],m=e[7],h=e[8];return t*(h*s-a*m)+i*(-h*n+a*l)+o*(m*n-s*l)}function we(e,t,i){var o=t[0],n=t[1],s=t[2],a=t[3],l=t[4],m=t[5],h=t[6],r=t[7],u=t[8],c=i[0],p=i[1],_=i[2],g=i[3],d=i[4],C=i[5],T=i[6],b=i[7],v=i[8];return e[0]=c*o+p*a+_*h,e[1]=c*n+p*l+_*r,e[2]=c*s+p*m+_*u,e[3]=g*o+d*a+C*h,e[4]=g*n+d*l+C*r,e[5]=g*s+d*m+C*u,e[6]=T*o+b*a+v*h,e[7]=T*n+b*l+v*r,e[8]=T*s+b*m+v*u,e}function Ao(e,t,i){var o=t[0],n=t[1],s=t[2],a=t[3],l=t[4],m=t[5],h=t[6],r=t[7],u=t[8],c=i[0],p=i[1];return e[0]=o,e[1]=n,e[2]=s,e[3]=a,e[4]=l,e[5]=m,e[6]=c*o+p*a+h,e[7]=c*n+p*l+r,e[8]=c*s+p*m+u,e}function Vo(e,t,i){var o=t[0],n=t[1],s=t[2],a=t[3],l=t[4],m=t[5],h=t[6],r=t[7],u=t[8],c=Math.sin(i),p=Math.cos(i);return e[0]=p*o+c*a,e[1]=p*n+c*l,e[2]=p*s+c*m,e[3]=p*a-c*o,e[4]=p*l-c*n,e[5]=p*m-c*s,e[6]=h,e[7]=r,e[8]=u,e}function Lo(e,t,i){var o=i[0],n=i[1];return e[0]=o*t[0],e[1]=o*t[1],e[2]=o*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Ro(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Do(e,t){var i=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=i,e[2]=0,e[3]=-i,e[4]=o,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Io(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Eo(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Oo(e,t){var i=t[0],o=t[1],n=t[2],s=t[3],a=i+i,l=o+o,m=n+n,h=i*a,r=o*a,u=o*l,c=n*a,p=n*l,_=n*m,g=s*a,d=s*l,C=s*m;return e[0]=1-u-_,e[3]=r-C,e[6]=c+d,e[1]=r+C,e[4]=1-h-_,e[7]=p-g,e[2]=c-d,e[5]=p+g,e[8]=1-h-u,e}function Wo(e,t){var i=t[0],o=t[1],n=t[2],s=t[3],a=t[4],l=t[5],m=t[6],h=t[7],r=t[8],u=t[9],c=t[10],p=t[11],_=t[12],g=t[13],d=t[14],C=t[15],T=i*l-o*a,b=i*m-n*a,v=i*h-s*a,B=o*m-n*l,A=o*h-s*l,O=n*h-s*m,V=r*g-u*_,W=r*d-c*_,I=r*C-p*_,j=u*d-c*g,k=u*C-p*g,E=c*C-p*d,L=T*E-b*k+v*j+B*I-A*W+O*V;return L?(L=1/L,e[0]=(l*E-m*k+h*j)*L,e[1]=(m*I-a*E-h*W)*L,e[2]=(a*k-l*I+h*V)*L,e[3]=(n*k-o*E-s*j)*L,e[4]=(i*E-n*I+s*W)*L,e[5]=(o*I-i*k-s*V)*L,e[6]=(g*O-d*A+C*B)*L,e[7]=(d*v-_*O-C*b)*L,e[8]=(_*A-g*v+C*T)*L,e):null}function ko(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Fo(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function jo(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function wo(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function qe(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function qo(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function No(e,t,i,o){return e[0]=t[0]+i[0]*o,e[1]=t[1]+i[1]*o,e[2]=t[2]+i[2]*o,e[3]=t[3]+i[3]*o,e[4]=t[4]+i[4]*o,e[5]=t[5]+i[5]*o,e[6]=t[6]+i[6]*o,e[7]=t[7]+i[7]*o,e[8]=t[8]+i[8]*o,e}function Ho(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Uo(e,t){var i=e[0],o=e[1],n=e[2],s=e[3],a=e[4],l=e[5],m=e[6],h=e[7],r=e[8],u=t[0],c=t[1],p=t[2],_=t[3],g=t[4],d=t[5],C=t[6],T=t[7],b=t[8];return Math.abs(i-u)<=M*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=M*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(n-p)<=M*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(s-_)<=M*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(a-g)<=M*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-d)<=M*Math.max(1,Math.abs(l),Math.abs(d))&&Math.abs(m-C)<=M*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(h-T)<=M*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(r-b)<=M*Math.max(1,Math.abs(r),Math.abs(b))}var Go,Qo,_t=w(()=>{U();Go=we,Qo=qe});var P={};G(P,{add:()=>Vn,adjoint:()=>tn,clone:()=>Xo,copy:()=>Yo,create:()=>zo,determinant:()=>en,equals:()=>In,exactEquals:()=>Dn,frob:()=>An,fromQuat:()=>fn,fromQuat2:()=>dn,fromRotation:()=>cn,fromRotationTranslation:()=>Ue,fromRotationTranslationScale:()=>_n,fromRotationTranslationScaleOrigin:()=>gn,fromScaling:()=>mn,fromTranslation:()=>un,fromValues:()=>Zo,fromXRotation:()=>yn,fromYRotation:()=>hn,fromZRotation:()=>pn,frustum:()=>Pn,getRotation:()=>ft,getScaling:()=>Ge,getTranslation:()=>gt,identity:()=>Ne,invert:()=>$o,lookAt:()=>vn,mul:()=>En,multiply:()=>He,multiplyScalar:()=>Ln,multiplyScalarAndAdd:()=>Rn,ortho:()=>bn,orthoNO:()=>ze,orthoZO:()=>xn,perspective:()=>Cn,perspectiveFromFieldOfView:()=>Sn,perspectiveNO:()=>Qe,perspectiveZO:()=>Tn,rotate:()=>sn,rotateX:()=>rn,rotateY:()=>an,rotateZ:()=>ln,scale:()=>nn,set:()=>Ko,str:()=>Mn,sub:()=>On,subtract:()=>Xe,targetTo:()=>Bn,translate:()=>on,transpose:()=>Jo});function zo(){var e=new D(16);return D!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Xo(e){var t=new D(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Yo(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Zo(e,t,i,o,n,s,a,l,m,h,r,u,c,p,_,g){var d=new D(16);return d[0]=e,d[1]=t,d[2]=i,d[3]=o,d[4]=n,d[5]=s,d[6]=a,d[7]=l,d[8]=m,d[9]=h,d[10]=r,d[11]=u,d[12]=c,d[13]=p,d[14]=_,d[15]=g,d}function Ko(e,t,i,o,n,s,a,l,m,h,r,u,c,p,_,g,d){return e[0]=t,e[1]=i,e[2]=o,e[3]=n,e[4]=s,e[5]=a,e[6]=l,e[7]=m,e[8]=h,e[9]=r,e[10]=u,e[11]=c,e[12]=p,e[13]=_,e[14]=g,e[15]=d,e}function Ne(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Jo(e,t){if(e===t){var i=t[1],o=t[2],n=t[3],s=t[6],a=t[7],l=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=o,e[9]=s,e[11]=t[14],e[12]=n,e[13]=a,e[14]=l}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function $o(e,t){var i=t[0],o=t[1],n=t[2],s=t[3],a=t[4],l=t[5],m=t[6],h=t[7],r=t[8],u=t[9],c=t[10],p=t[11],_=t[12],g=t[13],d=t[14],C=t[15],T=i*l-o*a,b=i*m-n*a,v=i*h-s*a,B=o*m-n*l,A=o*h-s*l,O=n*h-s*m,V=r*g-u*_,W=r*d-c*_,I=r*C-p*_,j=u*d-c*g,k=u*C-p*g,E=c*C-p*d,L=T*E-b*k+v*j+B*I-A*W+O*V;return L?(L=1/L,e[0]=(l*E-m*k+h*j)*L,e[1]=(n*k-o*E-s*j)*L,e[2]=(g*O-d*A+C*B)*L,e[3]=(c*A-u*O-p*B)*L,e[4]=(m*I-a*E-h*W)*L,e[5]=(i*E-n*I+s*W)*L,e[6]=(d*v-_*O-C*b)*L,e[7]=(r*O-c*v+p*b)*L,e[8]=(a*k-l*I+h*V)*L,e[9]=(o*I-i*k-s*V)*L,e[10]=(_*A-g*v+C*T)*L,e[11]=(u*v-r*A-p*T)*L,e[12]=(l*W-a*j-m*V)*L,e[13]=(i*j-o*W+n*V)*L,e[14]=(g*b-_*B-d*T)*L,e[15]=(r*B-u*b+c*T)*L,e):null}function tn(e,t){var i=t[0],o=t[1],n=t[2],s=t[3],a=t[4],l=t[5],m=t[6],h=t[7],r=t[8],u=t[9],c=t[10],p=t[11],_=t[12],g=t[13],d=t[14],C=t[15];return e[0]=l*(c*C-p*d)-u*(m*C-h*d)+g*(m*p-h*c),e[1]=-(o*(c*C-p*d)-u*(n*C-s*d)+g*(n*p-s*c)),e[2]=o*(m*C-h*d)-l*(n*C-s*d)+g*(n*h-s*m),e[3]=-(o*(m*p-h*c)-l*(n*p-s*c)+u*(n*h-s*m)),e[4]=-(a*(c*C-p*d)-r*(m*C-h*d)+_*(m*p-h*c)),e[5]=i*(c*C-p*d)-r*(n*C-s*d)+_*(n*p-s*c),e[6]=-(i*(m*C-h*d)-a*(n*C-s*d)+_*(n*h-s*m)),e[7]=i*(m*p-h*c)-a*(n*p-s*c)+r*(n*h-s*m),e[8]=a*(u*C-p*g)-r*(l*C-h*g)+_*(l*p-h*u),e[9]=-(i*(u*C-p*g)-r*(o*C-s*g)+_*(o*p-s*u)),e[10]=i*(l*C-h*g)-a*(o*C-s*g)+_*(o*h-s*l),e[11]=-(i*(l*p-h*u)-a*(o*p-s*u)+r*(o*h-s*l)),e[12]=-(a*(u*d-c*g)-r*(l*d-m*g)+_*(l*c-m*u)),e[13]=i*(u*d-c*g)-r*(o*d-n*g)+_*(o*c-n*u),e[14]=-(i*(l*d-m*g)-a*(o*d-n*g)+_*(o*m-n*l)),e[15]=i*(l*c-m*u)-a*(o*c-n*u)+r*(o*m-n*l),e}function en(e){var t=e[0],i=e[1],o=e[2],n=e[3],s=e[4],a=e[5],l=e[6],m=e[7],h=e[8],r=e[9],u=e[10],c=e[11],p=e[12],_=e[13],g=e[14],d=e[15],C=t*a-i*s,T=t*l-o*s,b=t*m-n*s,v=i*l-o*a,B=i*m-n*a,A=o*m-n*l,O=h*_-r*p,V=h*g-u*p,W=h*d-c*p,I=r*g-u*_,j=r*d-c*_,k=u*d-c*g;return C*k-T*j+b*I+v*W-B*V+A*O}function He(e,t,i){var o=t[0],n=t[1],s=t[2],a=t[3],l=t[4],m=t[5],h=t[6],r=t[7],u=t[8],c=t[9],p=t[10],_=t[11],g=t[12],d=t[13],C=t[14],T=t[15],b=i[0],v=i[1],B=i[2],A=i[3];return e[0]=b*o+v*l+B*u+A*g,e[1]=b*n+v*m+B*c+A*d,e[2]=b*s+v*h+B*p+A*C,e[3]=b*a+v*r+B*_+A*T,b=i[4],v=i[5],B=i[6],A=i[7],e[4]=b*o+v*l+B*u+A*g,e[5]=b*n+v*m+B*c+A*d,e[6]=b*s+v*h+B*p+A*C,e[7]=b*a+v*r+B*_+A*T,b=i[8],v=i[9],B=i[10],A=i[11],e[8]=b*o+v*l+B*u+A*g,e[9]=b*n+v*m+B*c+A*d,e[10]=b*s+v*h+B*p+A*C,e[11]=b*a+v*r+B*_+A*T,b=i[12],v=i[13],B=i[14],A=i[15],e[12]=b*o+v*l+B*u+A*g,e[13]=b*n+v*m+B*c+A*d,e[14]=b*s+v*h+B*p+A*C,e[15]=b*a+v*r+B*_+A*T,e}function on(e,t,i){var o=i[0],n=i[1],s=i[2],a,l,m,h,r,u,c,p,_,g,d,C;return t===e?(e[12]=t[0]*o+t[4]*n+t[8]*s+t[12],e[13]=t[1]*o+t[5]*n+t[9]*s+t[13],e[14]=t[2]*o+t[6]*n+t[10]*s+t[14],e[15]=t[3]*o+t[7]*n+t[11]*s+t[15]):(a=t[0],l=t[1],m=t[2],h=t[3],r=t[4],u=t[5],c=t[6],p=t[7],_=t[8],g=t[9],d=t[10],C=t[11],e[0]=a,e[1]=l,e[2]=m,e[3]=h,e[4]=r,e[5]=u,e[6]=c,e[7]=p,e[8]=_,e[9]=g,e[10]=d,e[11]=C,e[12]=a*o+r*n+_*s+t[12],e[13]=l*o+u*n+g*s+t[13],e[14]=m*o+c*n+d*s+t[14],e[15]=h*o+p*n+C*s+t[15]),e}function nn(e,t,i){var o=i[0],n=i[1],s=i[2];return e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function sn(e,t,i,o){var n=o[0],s=o[1],a=o[2],l=Math.hypot(n,s,a),m,h,r,u,c,p,_,g,d,C,T,b,v,B,A,O,V,W,I,j,k,E,L,H;return l<M?null:(l=1/l,n*=l,s*=l,a*=l,m=Math.sin(i),h=Math.cos(i),r=1-h,u=t[0],c=t[1],p=t[2],_=t[3],g=t[4],d=t[5],C=t[6],T=t[7],b=t[8],v=t[9],B=t[10],A=t[11],O=n*n*r+h,V=s*n*r+a*m,W=a*n*r-s*m,I=n*s*r-a*m,j=s*s*r+h,k=a*s*r+n*m,E=n*a*r+s*m,L=s*a*r-n*m,H=a*a*r+h,e[0]=u*O+g*V+b*W,e[1]=c*O+d*V+v*W,e[2]=p*O+C*V+B*W,e[3]=_*O+T*V+A*W,e[4]=u*I+g*j+b*k,e[5]=c*I+d*j+v*k,e[6]=p*I+C*j+B*k,e[7]=_*I+T*j+A*k,e[8]=u*E+g*L+b*H,e[9]=c*E+d*L+v*H,e[10]=p*E+C*L+B*H,e[11]=_*E+T*L+A*H,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function rn(e,t,i){var o=Math.sin(i),n=Math.cos(i),s=t[4],a=t[5],l=t[6],m=t[7],h=t[8],r=t[9],u=t[10],c=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*n+h*o,e[5]=a*n+r*o,e[6]=l*n+u*o,e[7]=m*n+c*o,e[8]=h*n-s*o,e[9]=r*n-a*o,e[10]=u*n-l*o,e[11]=c*n-m*o,e}function an(e,t,i){var o=Math.sin(i),n=Math.cos(i),s=t[0],a=t[1],l=t[2],m=t[3],h=t[8],r=t[9],u=t[10],c=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n-h*o,e[1]=a*n-r*o,e[2]=l*n-u*o,e[3]=m*n-c*o,e[8]=s*o+h*n,e[9]=a*o+r*n,e[10]=l*o+u*n,e[11]=m*o+c*n,e}function ln(e,t,i){var o=Math.sin(i),n=Math.cos(i),s=t[0],a=t[1],l=t[2],m=t[3],h=t[4],r=t[5],u=t[6],c=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n+h*o,e[1]=a*n+r*o,e[2]=l*n+u*o,e[3]=m*n+c*o,e[4]=h*n-s*o,e[5]=r*n-a*o,e[6]=u*n-l*o,e[7]=c*n-m*o,e}function un(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function mn(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function cn(e,t,i){var o=i[0],n=i[1],s=i[2],a=Math.hypot(o,n,s),l,m,h;return a<M?null:(a=1/a,o*=a,n*=a,s*=a,l=Math.sin(t),m=Math.cos(t),h=1-m,e[0]=o*o*h+m,e[1]=n*o*h+s*l,e[2]=s*o*h-n*l,e[3]=0,e[4]=o*n*h-s*l,e[5]=n*n*h+m,e[6]=s*n*h+o*l,e[7]=0,e[8]=o*s*h+n*l,e[9]=n*s*h-o*l,e[10]=s*s*h+m,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function yn(e,t){var i=Math.sin(t),o=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function hn(e,t){var i=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pn(e,t){var i=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ue(e,t,i){var o=t[0],n=t[1],s=t[2],a=t[3],l=o+o,m=n+n,h=s+s,r=o*l,u=o*m,c=o*h,p=n*m,_=n*h,g=s*h,d=a*l,C=a*m,T=a*h;return e[0]=1-(p+g),e[1]=u+T,e[2]=c-C,e[3]=0,e[4]=u-T,e[5]=1-(r+g),e[6]=_+d,e[7]=0,e[8]=c+C,e[9]=_-d,e[10]=1-(r+p),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function dn(e,t){var i=new D(3),o=-t[0],n=-t[1],s=-t[2],a=t[3],l=t[4],m=t[5],h=t[6],r=t[7],u=o*o+n*n+s*s+a*a;return u>0?(i[0]=(l*a+r*o+m*s-h*n)*2/u,i[1]=(m*a+r*n+h*o-l*s)*2/u,i[2]=(h*a+r*s+l*n-m*o)*2/u):(i[0]=(l*a+r*o+m*s-h*n)*2,i[1]=(m*a+r*n+h*o-l*s)*2,i[2]=(h*a+r*s+l*n-m*o)*2),Ue(e,t,i),e}function gt(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Ge(e,t){var i=t[0],o=t[1],n=t[2],s=t[4],a=t[5],l=t[6],m=t[8],h=t[9],r=t[10];return e[0]=Math.hypot(i,o,n),e[1]=Math.hypot(s,a,l),e[2]=Math.hypot(m,h,r),e}function ft(e,t){var i=new D(3);Ge(i,t);var o=1/i[0],n=1/i[1],s=1/i[2],a=t[0]*o,l=t[1]*n,m=t[2]*s,h=t[4]*o,r=t[5]*n,u=t[6]*s,c=t[8]*o,p=t[9]*n,_=t[10]*s,g=a+r+_,d=0;return g>0?(d=Math.sqrt(g+1)*2,e[3]=.25*d,e[0]=(u-p)/d,e[1]=(c-m)/d,e[2]=(l-h)/d):a>r&&a>_?(d=Math.sqrt(1+a-r-_)*2,e[3]=(u-p)/d,e[0]=.25*d,e[1]=(l+h)/d,e[2]=(c+m)/d):r>_?(d=Math.sqrt(1+r-a-_)*2,e[3]=(c-m)/d,e[0]=(l+h)/d,e[1]=.25*d,e[2]=(u+p)/d):(d=Math.sqrt(1+_-a-r)*2,e[3]=(l-h)/d,e[0]=(c+m)/d,e[1]=(u+p)/d,e[2]=.25*d),e}function _n(e,t,i,o){var n=t[0],s=t[1],a=t[2],l=t[3],m=n+n,h=s+s,r=a+a,u=n*m,c=n*h,p=n*r,_=s*h,g=s*r,d=a*r,C=l*m,T=l*h,b=l*r,v=o[0],B=o[1],A=o[2];return e[0]=(1-(_+d))*v,e[1]=(c+b)*v,e[2]=(p-T)*v,e[3]=0,e[4]=(c-b)*B,e[5]=(1-(u+d))*B,e[6]=(g+C)*B,e[7]=0,e[8]=(p+T)*A,e[9]=(g-C)*A,e[10]=(1-(u+_))*A,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function gn(e,t,i,o,n){var s=t[0],a=t[1],l=t[2],m=t[3],h=s+s,r=a+a,u=l+l,c=s*h,p=s*r,_=s*u,g=a*r,d=a*u,C=l*u,T=m*h,b=m*r,v=m*u,B=o[0],A=o[1],O=o[2],V=n[0],W=n[1],I=n[2],j=(1-(g+C))*B,k=(p+v)*B,E=(_-b)*B,L=(p-v)*A,H=(1-(c+C))*A,z=(d+T)*A,X=(_+b)*O,qt=(d-T)*O,Nt=(1-(c+g))*O;return e[0]=j,e[1]=k,e[2]=E,e[3]=0,e[4]=L,e[5]=H,e[6]=z,e[7]=0,e[8]=X,e[9]=qt,e[10]=Nt,e[11]=0,e[12]=i[0]+V-(j*V+L*W+X*I),e[13]=i[1]+W-(k*V+H*W+qt*I),e[14]=i[2]+I-(E*V+z*W+Nt*I),e[15]=1,e}function fn(e,t){var i=t[0],o=t[1],n=t[2],s=t[3],a=i+i,l=o+o,m=n+n,h=i*a,r=o*a,u=o*l,c=n*a,p=n*l,_=n*m,g=s*a,d=s*l,C=s*m;return e[0]=1-u-_,e[1]=r+C,e[2]=c-d,e[3]=0,e[4]=r-C,e[5]=1-h-_,e[6]=p+g,e[7]=0,e[8]=c+d,e[9]=p-g,e[10]=1-h-u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Pn(e,t,i,o,n,s,a){var l=1/(i-t),m=1/(n-o),h=1/(s-a);return e[0]=s*2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*m,e[6]=0,e[7]=0,e[8]=(i+t)*l,e[9]=(n+o)*m,e[10]=(a+s)*h,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*s*2*h,e[15]=0,e}function Qe(e,t,i,o,n){var s=1/Math.tan(t/2),a;return e[0]=s/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(a=1/(o-n),e[10]=(n+o)*a,e[14]=2*n*o*a):(e[10]=-1,e[14]=-2*o),e}function Tn(e,t,i,o,n){var s=1/Math.tan(t/2),a;return e[0]=s/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(a=1/(o-n),e[10]=n*a,e[14]=n*o*a):(e[10]=-1,e[14]=-o),e}function Sn(e,t,i,o){var n=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),m=2/(a+l),h=2/(n+s);return e[0]=m,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=h,e[6]=0,e[7]=0,e[8]=-((a-l)*m*.5),e[9]=(n-s)*h*.5,e[10]=o/(i-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=o*i/(i-o),e[15]=0,e}function ze(e,t,i,o,n,s,a){var l=1/(t-i),m=1/(o-n),h=1/(s-a);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*m,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(t+i)*l,e[13]=(n+o)*m,e[14]=(a+s)*h,e[15]=1,e}function xn(e,t,i,o,n,s,a){var l=1/(t-i),m=1/(o-n),h=1/(s-a);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*m,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=h,e[11]=0,e[12]=(t+i)*l,e[13]=(n+o)*m,e[14]=s*h,e[15]=1,e}function vn(e,t,i,o){var n,s,a,l,m,h,r,u,c,p,_=t[0],g=t[1],d=t[2],C=o[0],T=o[1],b=o[2],v=i[0],B=i[1],A=i[2];return Math.abs(_-v)<M&&Math.abs(g-B)<M&&Math.abs(d-A)<M?Ne(e):(r=_-v,u=g-B,c=d-A,p=1/Math.hypot(r,u,c),r*=p,u*=p,c*=p,n=T*c-b*u,s=b*r-C*c,a=C*u-T*r,p=Math.hypot(n,s,a),p?(p=1/p,n*=p,s*=p,a*=p):(n=0,s=0,a=0),l=u*a-c*s,m=c*n-r*a,h=r*s-u*n,p=Math.hypot(l,m,h),p?(p=1/p,l*=p,m*=p,h*=p):(l=0,m=0,h=0),e[0]=n,e[1]=l,e[2]=r,e[3]=0,e[4]=s,e[5]=m,e[6]=u,e[7]=0,e[8]=a,e[9]=h,e[10]=c,e[11]=0,e[12]=-(n*_+s*g+a*d),e[13]=-(l*_+m*g+h*d),e[14]=-(r*_+u*g+c*d),e[15]=1,e)}function Bn(e,t,i,o){var n=t[0],s=t[1],a=t[2],l=o[0],m=o[1],h=o[2],r=n-i[0],u=s-i[1],c=a-i[2],p=r*r+u*u+c*c;p>0&&(p=1/Math.sqrt(p),r*=p,u*=p,c*=p);var _=m*c-h*u,g=h*r-l*c,d=l*u-m*r;return p=_*_+g*g+d*d,p>0&&(p=1/Math.sqrt(p),_*=p,g*=p,d*=p),e[0]=_,e[1]=g,e[2]=d,e[3]=0,e[4]=u*d-c*g,e[5]=c*_-r*d,e[6]=r*g-u*_,e[7]=0,e[8]=r,e[9]=u,e[10]=c,e[11]=0,e[12]=n,e[13]=s,e[14]=a,e[15]=1,e}function Mn(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function An(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Vn(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function Xe(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function Ln(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function Rn(e,t,i,o){return e[0]=t[0]+i[0]*o,e[1]=t[1]+i[1]*o,e[2]=t[2]+i[2]*o,e[3]=t[3]+i[3]*o,e[4]=t[4]+i[4]*o,e[5]=t[5]+i[5]*o,e[6]=t[6]+i[6]*o,e[7]=t[7]+i[7]*o,e[8]=t[8]+i[8]*o,e[9]=t[9]+i[9]*o,e[10]=t[10]+i[10]*o,e[11]=t[11]+i[11]*o,e[12]=t[12]+i[12]*o,e[13]=t[13]+i[13]*o,e[14]=t[14]+i[14]*o,e[15]=t[15]+i[15]*o,e}function Dn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function In(e,t){var i=e[0],o=e[1],n=e[2],s=e[3],a=e[4],l=e[5],m=e[6],h=e[7],r=e[8],u=e[9],c=e[10],p=e[11],_=e[12],g=e[13],d=e[14],C=e[15],T=t[0],b=t[1],v=t[2],B=t[3],A=t[4],O=t[5],V=t[6],W=t[7],I=t[8],j=t[9],k=t[10],E=t[11],L=t[12],H=t[13],z=t[14],X=t[15];return Math.abs(i-T)<=M*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(o-b)<=M*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(n-v)<=M*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(s-B)<=M*Math.max(1,Math.abs(s),Math.abs(B))&&Math.abs(a-A)<=M*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(l-O)<=M*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(m-V)<=M*Math.max(1,Math.abs(m),Math.abs(V))&&Math.abs(h-W)<=M*Math.max(1,Math.abs(h),Math.abs(W))&&Math.abs(r-I)<=M*Math.max(1,Math.abs(r),Math.abs(I))&&Math.abs(u-j)<=M*Math.max(1,Math.abs(u),Math.abs(j))&&Math.abs(c-k)<=M*Math.max(1,Math.abs(c),Math.abs(k))&&Math.abs(p-E)<=M*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(_-L)<=M*Math.max(1,Math.abs(_),Math.abs(L))&&Math.abs(g-H)<=M*Math.max(1,Math.abs(g),Math.abs(H))&&Math.abs(d-z)<=M*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(C-X)<=M*Math.max(1,Math.abs(C),Math.abs(X))}var Cn,bn,En,On,Pt=w(()=>{U();Cn=Qe;bn=ze;En=He,On=Xe});var y={};G(y,{add:()=>jn,angle:()=>ss,bezier:()=>Kn,ceil:()=>wn,clone:()=>Wn,copy:()=>kn,create:()=>et,cross:()=>Y,dist:()=>hs,distance:()=>$e,div:()=>ys,divide:()=>Je,dot:()=>ot,equals:()=>us,exactEquals:()=>ls,floor:()=>qn,forEach:()=>_s,fromValues:()=>it,hermite:()=>Zn,inverse:()=>Xn,len:()=>Tt,length:()=>Ye,lerp:()=>Yn,max:()=>Hn,min:()=>Nn,mul:()=>cs,multiply:()=>Ke,negate:()=>zn,normalize:()=>Ct,random:()=>Jn,rotateX:()=>is,rotateY:()=>os,rotateZ:()=>ns,round:()=>Un,scale:()=>Gn,scaleAndAdd:()=>Qn,set:()=>Fn,sqrDist:()=>ps,sqrLen:()=>ds,squaredDistance:()=>ti,squaredLength:()=>ei,str:()=>as,sub:()=>ms,subtract:()=>Ze,transformMat3:()=>ts,transformMat4:()=>$n,transformQuat:()=>es,zero:()=>rs});function et(){var e=new D(3);return D!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Wn(e){var t=new D(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ye(e){var t=e[0],i=e[1],o=e[2];return Math.hypot(t,i,o)}function it(e,t,i){var o=new D(3);return o[0]=e,o[1]=t,o[2]=i,o}function kn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Fn(e,t,i,o){return e[0]=t,e[1]=i,e[2]=o,e}function jn(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function Ze(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function Ke(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function Je(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function wn(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function qn(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Nn(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function Hn(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function Un(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Gn(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function Qn(e,t,i,o){return e[0]=t[0]+i[0]*o,e[1]=t[1]+i[1]*o,e[2]=t[2]+i[2]*o,e}function $e(e,t){var i=t[0]-e[0],o=t[1]-e[1],n=t[2]-e[2];return Math.hypot(i,o,n)}function ti(e,t){var i=t[0]-e[0],o=t[1]-e[1],n=t[2]-e[2];return i*i+o*o+n*n}function ei(e){var t=e[0],i=e[1],o=e[2];return t*t+i*i+o*o}function zn(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Xn(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Ct(e,t){var i=t[0],o=t[1],n=t[2],s=i*i+o*o+n*n;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function ot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Y(e,t,i){var o=t[0],n=t[1],s=t[2],a=i[0],l=i[1],m=i[2];return e[0]=n*m-s*l,e[1]=s*a-o*m,e[2]=o*l-n*a,e}function Yn(e,t,i,o){var n=t[0],s=t[1],a=t[2];return e[0]=n+o*(i[0]-n),e[1]=s+o*(i[1]-s),e[2]=a+o*(i[2]-a),e}function Zn(e,t,i,o,n,s){var a=s*s,l=a*(2*s-3)+1,m=a*(s-2)+s,h=a*(s-1),r=a*(3-2*s);return e[0]=t[0]*l+i[0]*m+o[0]*h+n[0]*r,e[1]=t[1]*l+i[1]*m+o[1]*h+n[1]*r,e[2]=t[2]*l+i[2]*m+o[2]*h+n[2]*r,e}function Kn(e,t,i,o,n,s){var a=1-s,l=a*a,m=s*s,h=l*a,r=3*s*l,u=3*m*a,c=m*s;return e[0]=t[0]*h+i[0]*r+o[0]*u+n[0]*c,e[1]=t[1]*h+i[1]*r+o[1]*u+n[1]*c,e[2]=t[2]*h+i[2]*r+o[2]*u+n[2]*c,e}function Jn(e,t){t=t||1;var i=q()*2*Math.PI,o=q()*2-1,n=Math.sqrt(1-o*o)*t;return e[0]=Math.cos(i)*n,e[1]=Math.sin(i)*n,e[2]=o*t,e}function $n(e,t,i){var o=t[0],n=t[1],s=t[2],a=i[3]*o+i[7]*n+i[11]*s+i[15];return a=a||1,e[0]=(i[0]*o+i[4]*n+i[8]*s+i[12])/a,e[1]=(i[1]*o+i[5]*n+i[9]*s+i[13])/a,e[2]=(i[2]*o+i[6]*n+i[10]*s+i[14])/a,e}function ts(e,t,i){var o=t[0],n=t[1],s=t[2];return e[0]=o*i[0]+n*i[3]+s*i[6],e[1]=o*i[1]+n*i[4]+s*i[7],e[2]=o*i[2]+n*i[5]+s*i[8],e}function es(e,t,i){var o=i[0],n=i[1],s=i[2],a=i[3],l=t[0],m=t[1],h=t[2],r=n*h-s*m,u=s*l-o*h,c=o*m-n*l,p=n*c-s*u,_=s*r-o*c,g=o*u-n*r,d=a*2;return r*=d,u*=d,c*=d,p*=2,_*=2,g*=2,e[0]=l+r+p,e[1]=m+u+_,e[2]=h+c+g,e}function is(e,t,i,o){var n=[],s=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(o)-n[2]*Math.sin(o),s[2]=n[1]*Math.sin(o)+n[2]*Math.cos(o),e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e}function os(e,t,i,o){var n=[],s=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],s[0]=n[2]*Math.sin(o)+n[0]*Math.cos(o),s[1]=n[1],s[2]=n[2]*Math.cos(o)-n[0]*Math.sin(o),e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e}function ns(e,t,i,o){var n=[],s=[];return n[0]=t[0]-i[0],n[1]=t[1]-i[1],n[2]=t[2]-i[2],s[0]=n[0]*Math.cos(o)-n[1]*Math.sin(o),s[1]=n[0]*Math.sin(o)+n[1]*Math.cos(o),s[2]=n[2],e[0]=s[0]+i[0],e[1]=s[1]+i[1],e[2]=s[2]+i[2],e}function ss(e,t){var i=e[0],o=e[1],n=e[2],s=t[0],a=t[1],l=t[2],m=Math.sqrt(i*i+o*o+n*n),h=Math.sqrt(s*s+a*a+l*l),r=m*h,u=r&&ot(e,t)/r;return Math.acos(Math.min(Math.max(u,-1),1))}function rs(e){return e[0]=0,e[1]=0,e[2]=0,e}function as(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function ls(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function us(e,t){var i=e[0],o=e[1],n=e[2],s=t[0],a=t[1],l=t[2];return Math.abs(i-s)<=M*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-a)<=M*Math.max(1,Math.abs(o),Math.abs(a))&&Math.abs(n-l)<=M*Math.max(1,Math.abs(n),Math.abs(l))}var ms,cs,ys,hs,ps,Tt,ds,_s,St=w(()=>{U();ms=Ze,cs=Ke,ys=Je,hs=$e,ps=ti,Tt=Ye,ds=ei,_s=function(){var e=et();return function(t,i,o,n,s,a){var l,m;for(i||(i=3),o||(o=0),n?m=Math.min(n*i+o,t.length):m=t.length,l=o;l<m;l+=i)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],s(e,e,a),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2];return t}}()});var N={};G(N,{add:()=>Mt,ceil:()=>gs,clone:()=>bt,copy:()=>vt,create:()=>ii,cross:()=>vs,dist:()=>Es,distance:()=>ri,div:()=>Is,divide:()=>si,dot:()=>Lt,equals:()=>It,exactEquals:()=>Dt,floor:()=>fs,forEach:()=>Fs,fromValues:()=>xt,inverse:()=>xs,len:()=>Ws,length:()=>nt,lerp:()=>Rt,max:()=>Cs,min:()=>Ps,mul:()=>Ds,multiply:()=>ni,negate:()=>bs,normalize:()=>Vt,random:()=>Bs,round:()=>Ts,scale:()=>At,scaleAndAdd:()=>Ss,set:()=>Bt,sqrDist:()=>Os,sqrLen:()=>ks,squaredDistance:()=>ai,squaredLength:()=>st,str:()=>Ls,sub:()=>Rs,subtract:()=>oi,transformMat4:()=>Ms,transformQuat:()=>As,zero:()=>Vs});function ii(){var e=new D(4);return D!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function bt(e){var t=new D(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function xt(e,t,i,o){var n=new D(4);return n[0]=e,n[1]=t,n[2]=i,n[3]=o,n}function vt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Bt(e,t,i,o,n){return e[0]=t,e[1]=i,e[2]=o,e[3]=n,e}function Mt(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function oi(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function ni(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function si(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function gs(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function fs(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Ps(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function Cs(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function Ts(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function At(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function Ss(e,t,i,o){return e[0]=t[0]+i[0]*o,e[1]=t[1]+i[1]*o,e[2]=t[2]+i[2]*o,e[3]=t[3]+i[3]*o,e}function ri(e,t){var i=t[0]-e[0],o=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return Math.hypot(i,o,n,s)}function ai(e,t){var i=t[0]-e[0],o=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return i*i+o*o+n*n+s*s}function nt(e){var t=e[0],i=e[1],o=e[2],n=e[3];return Math.hypot(t,i,o,n)}function st(e){var t=e[0],i=e[1],o=e[2],n=e[3];return t*t+i*i+o*o+n*n}function bs(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function xs(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function Vt(e,t){var i=t[0],o=t[1],n=t[2],s=t[3],a=i*i+o*o+n*n+s*s;return a>0&&(a=1/Math.sqrt(a)),e[0]=i*a,e[1]=o*a,e[2]=n*a,e[3]=s*a,e}function Lt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function vs(e,t,i,o){var n=i[0]*o[1]-i[1]*o[0],s=i[0]*o[2]-i[2]*o[0],a=i[0]*o[3]-i[3]*o[0],l=i[1]*o[2]-i[2]*o[1],m=i[1]*o[3]-i[3]*o[1],h=i[2]*o[3]-i[3]*o[2],r=t[0],u=t[1],c=t[2],p=t[3];return e[0]=u*h-c*m+p*l,e[1]=-(r*h)+c*a-p*s,e[2]=r*m-u*a+p*n,e[3]=-(r*l)+u*s-c*n,e}function Rt(e,t,i,o){var n=t[0],s=t[1],a=t[2],l=t[3];return e[0]=n+o*(i[0]-n),e[1]=s+o*(i[1]-s),e[2]=a+o*(i[2]-a),e[3]=l+o*(i[3]-l),e}function Bs(e,t){t=t||1;var i,o,n,s,a,l;do i=q()*2-1,o=q()*2-1,a=i*i+o*o;while(a>=1);do n=q()*2-1,s=q()*2-1,l=n*n+s*s;while(l>=1);var m=Math.sqrt((1-a)/l);return e[0]=t*i,e[1]=t*o,e[2]=t*n*m,e[3]=t*s*m,e}function Ms(e,t,i){var o=t[0],n=t[1],s=t[2],a=t[3];return e[0]=i[0]*o+i[4]*n+i[8]*s+i[12]*a,e[1]=i[1]*o+i[5]*n+i[9]*s+i[13]*a,e[2]=i[2]*o+i[6]*n+i[10]*s+i[14]*a,e[3]=i[3]*o+i[7]*n+i[11]*s+i[15]*a,e}function As(e,t,i){var o=t[0],n=t[1],s=t[2],a=i[0],l=i[1],m=i[2],h=i[3],r=h*o+l*s-m*n,u=h*n+m*o-a*s,c=h*s+a*n-l*o,p=-a*o-l*n-m*s;return e[0]=r*h+p*-a+u*-m-c*-l,e[1]=u*h+p*-l+c*-a-r*-m,e[2]=c*h+p*-m+r*-l-u*-a,e[3]=t[3],e}function Vs(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function Ls(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function Dt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function It(e,t){var i=e[0],o=e[1],n=e[2],s=e[3],a=t[0],l=t[1],m=t[2],h=t[3];return Math.abs(i-a)<=M*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(o-l)<=M*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(n-m)<=M*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(s-h)<=M*Math.max(1,Math.abs(s),Math.abs(h))}var Rs,Ds,Is,Es,Os,Ws,ks,Fs,Et=w(()=>{U();Rs=oi,Ds=ni,Is=si,Es=ri,Os=ai,Ws=nt,ks=st,Fs=function(){var e=ii();return function(t,i,o,n,s,a){var l,m;for(i||(i=4),o||(o=0),n?m=Math.min(n*i+o,t.length):m=t.length,l=o;l<m;l+=i)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],s(e,e,a),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}}()});var f={};G(f,{add:()=>Js,calculateW:()=>Ns,clone:()=>Ys,conjugate:()=>Qs,copy:()=>at,create:()=>Z,dot:()=>lt,equals:()=>nr,exactEquals:()=>or,exp:()=>mi,fromEuler:()=>zs,fromMat3:()=>yi,fromValues:()=>Zs,getAngle:()=>qs,getAxisAngle:()=>ws,identity:()=>js,invert:()=>Gs,len:()=>er,length:()=>ut,lerp:()=>tr,ln:()=>ci,mul:()=>$s,multiply:()=>ui,normalize:()=>Ft,pow:()=>Hs,random:()=>Us,rotateX:()=>Ot,rotateY:()=>Wt,rotateZ:()=>kt,rotationTo:()=>sr,scale:()=>hi,set:()=>Ks,setAxes:()=>ar,setAxisAngle:()=>li,slerp:()=>rt,sqlerp:()=>rr,sqrLen:()=>ir,squaredLength:()=>mt,str:()=>Xs});function Z(){var e=new D(4);return D!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function js(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function li(e,t,i){i=i*.5;var o=Math.sin(i);return e[0]=o*t[0],e[1]=o*t[1],e[2]=o*t[2],e[3]=Math.cos(i),e}function ws(e,t){var i=Math.acos(t[3])*2,o=Math.sin(i/2);return o>M?(e[0]=t[0]/o,e[1]=t[1]/o,e[2]=t[2]/o):(e[0]=1,e[1]=0,e[2]=0),i}function qs(e,t){var i=lt(e,t);return Math.acos(2*i*i-1)}function ui(e,t,i){var o=t[0],n=t[1],s=t[2],a=t[3],l=i[0],m=i[1],h=i[2],r=i[3];return e[0]=o*r+a*l+n*h-s*m,e[1]=n*r+a*m+s*l-o*h,e[2]=s*r+a*h+o*m-n*l,e[3]=a*r-o*l-n*m-s*h,e}function Ot(e,t,i){i*=.5;var o=t[0],n=t[1],s=t[2],a=t[3],l=Math.sin(i),m=Math.cos(i);return e[0]=o*m+a*l,e[1]=n*m+s*l,e[2]=s*m-n*l,e[3]=a*m-o*l,e}function Wt(e,t,i){i*=.5;var o=t[0],n=t[1],s=t[2],a=t[3],l=Math.sin(i),m=Math.cos(i);return e[0]=o*m-s*l,e[1]=n*m+a*l,e[2]=s*m+o*l,e[3]=a*m-n*l,e}function kt(e,t,i){i*=.5;var o=t[0],n=t[1],s=t[2],a=t[3],l=Math.sin(i),m=Math.cos(i);return e[0]=o*m+n*l,e[1]=n*m-o*l,e[2]=s*m+a*l,e[3]=a*m-s*l,e}function Ns(e,t){var i=t[0],o=t[1],n=t[2];return e[0]=i,e[1]=o,e[2]=n,e[3]=Math.sqrt(Math.abs(1-i*i-o*o-n*n)),e}function mi(e,t){var i=t[0],o=t[1],n=t[2],s=t[3],a=Math.sqrt(i*i+o*o+n*n),l=Math.exp(s),m=a>0?l*Math.sin(a)/a:0;return e[0]=i*m,e[1]=o*m,e[2]=n*m,e[3]=l*Math.cos(a),e}function ci(e,t){var i=t[0],o=t[1],n=t[2],s=t[3],a=Math.sqrt(i*i+o*o+n*n),l=a>0?Math.atan2(a,s)/a:0;return e[0]=i*l,e[1]=o*l,e[2]=n*l,e[3]=.5*Math.log(i*i+o*o+n*n+s*s),e}function Hs(e,t,i){return ci(e,t),hi(e,e,i),mi(e,e),e}function rt(e,t,i,o){var n=t[0],s=t[1],a=t[2],l=t[3],m=i[0],h=i[1],r=i[2],u=i[3],c,p,_,g,d;return p=n*m+s*h+a*r+l*u,p<0&&(p=-p,m=-m,h=-h,r=-r,u=-u),1-p>M?(c=Math.acos(p),_=Math.sin(c),g=Math.sin((1-o)*c)/_,d=Math.sin(o*c)/_):(g=1-o,d=o),e[0]=g*n+d*m,e[1]=g*s+d*h,e[2]=g*a+d*r,e[3]=g*l+d*u,e}function Us(e){var t=q(),i=q(),o=q(),n=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=n*Math.sin(2*Math.PI*i),e[1]=n*Math.cos(2*Math.PI*i),e[2]=s*Math.sin(2*Math.PI*o),e[3]=s*Math.cos(2*Math.PI*o),e}function Gs(e,t){var i=t[0],o=t[1],n=t[2],s=t[3],a=i*i+o*o+n*n+s*s,l=a?1/a:0;return e[0]=-i*l,e[1]=-o*l,e[2]=-n*l,e[3]=s*l,e}function Qs(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function yi(e,t){var i=t[0]+t[4]+t[8],o;if(i>0)o=Math.sqrt(i+1),e[3]=.5*o,o=.5/o,e[0]=(t[5]-t[7])*o,e[1]=(t[6]-t[2])*o,e[2]=(t[1]-t[3])*o;else{var n=0;t[4]>t[0]&&(n=1),t[8]>t[n*3+n]&&(n=2);var s=(n+1)%3,a=(n+2)%3;o=Math.sqrt(t[n*3+n]-t[s*3+s]-t[a*3+a]+1),e[n]=.5*o,o=.5/o,e[3]=(t[s*3+a]-t[a*3+s])*o,e[s]=(t[s*3+n]+t[n*3+s])*o,e[a]=(t[a*3+n]+t[n*3+a])*o}return e}function zs(e,t,i,o){var n=.5*Math.PI/180;t*=n,i*=n,o*=n;var s=Math.sin(t),a=Math.cos(t),l=Math.sin(i),m=Math.cos(i),h=Math.sin(o),r=Math.cos(o);return e[0]=s*m*r-a*l*h,e[1]=a*l*r+s*m*h,e[2]=a*m*h-s*l*r,e[3]=a*m*r+s*l*h,e}function Xs(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Ys,Zs,at,Ks,Js,$s,hi,lt,tr,ut,er,mt,ir,Ft,or,nr,sr,rr,ar,jt=w(()=>{U();_t();St();Et();Ys=bt,Zs=xt,at=vt,Ks=Bt,Js=Mt,$s=ui,hi=At,lt=Lt,tr=Rt,ut=nt,er=ut,mt=st,ir=mt,Ft=Vt,or=Dt,nr=It,sr=function(){var e=et(),t=it(1,0,0),i=it(0,1,0);return function(o,n,s){var a=ot(n,s);return a<-.999999?(Y(e,t,n),Tt(e)<1e-6&&Y(e,i,n),Ct(e,e),li(o,e,Math.PI),o):a>.999999?(o[0]=0,o[1]=0,o[2]=0,o[3]=1,o):(Y(e,n,s),o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=1+a,Ft(o,o))}}(),rr=function(){var e=Z(),t=Z();return function(i,o,n,s,a,l){return rt(e,o,a,l),rt(t,n,s,l),rt(i,e,t,2*l*(1-l)),i}}(),ar=function(){var e=dt();return function(t,i,o,n){return e[0]=o[0],e[3]=o[1],e[6]=o[2],e[1]=n[0],e[4]=n[1],e[7]=n[2],e[2]=-i[0],e[5]=-i[1],e[8]=-i[2],Ft(t,yi(t,e))}}()});var x={};G(x,{add:()=>Vr,clone:()=>ur,conjugate:()=>Er,copy:()=>di,create:()=>lr,dot:()=>gi,equals:()=>wr,exactEquals:()=>jr,fromMat4:()=>pr,fromRotation:()=>hr,fromRotationTranslation:()=>pi,fromRotationTranslationValues:()=>cr,fromTranslation:()=>yr,fromValues:()=>mr,getDual:()=>fr,getReal:()=>gr,getTranslation:()=>Tr,identity:()=>dr,invert:()=>Ir,len:()=>Or,length:()=>fi,lerp:()=>Dr,mul:()=>Lr,multiply:()=>_i,normalize:()=>kr,rotateAroundAxis:()=>Ar,rotateByQuatAppend:()=>Br,rotateByQuatPrepend:()=>Mr,rotateX:()=>br,rotateY:()=>xr,rotateZ:()=>vr,scale:()=>Rr,set:()=>_r,setDual:()=>Cr,setReal:()=>Pr,sqrLen:()=>Wr,squaredLength:()=>ct,str:()=>Fr,translate:()=>Sr});function lr(){var e=new D(8);return D!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function ur(e){var t=new D(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function mr(e,t,i,o,n,s,a,l){var m=new D(8);return m[0]=e,m[1]=t,m[2]=i,m[3]=o,m[4]=n,m[5]=s,m[6]=a,m[7]=l,m}function cr(e,t,i,o,n,s,a){var l=new D(8);l[0]=e,l[1]=t,l[2]=i,l[3]=o;var m=n*.5,h=s*.5,r=a*.5;return l[4]=m*o+h*i-r*t,l[5]=h*o+r*e-m*i,l[6]=r*o+m*t-h*e,l[7]=-m*e-h*t-r*i,l}function pi(e,t,i){var o=i[0]*.5,n=i[1]*.5,s=i[2]*.5,a=t[0],l=t[1],m=t[2],h=t[3];return e[0]=a,e[1]=l,e[2]=m,e[3]=h,e[4]=o*h+n*m-s*l,e[5]=n*h+s*a-o*m,e[6]=s*h+o*l-n*a,e[7]=-o*a-n*l-s*m,e}function yr(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0]*.5,e[5]=t[1]*.5,e[6]=t[2]*.5,e[7]=0,e}function hr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function pr(e,t){var i=Z();ft(i,t);var o=new D(3);return gt(o,t),pi(e,i,o),e}function di(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function dr(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function _r(e,t,i,o,n,s,a,l,m){return e[0]=t,e[1]=i,e[2]=o,e[3]=n,e[4]=s,e[5]=a,e[6]=l,e[7]=m,e}function fr(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}function Cr(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function Tr(e,t){var i=t[4],o=t[5],n=t[6],s=t[7],a=-t[0],l=-t[1],m=-t[2],h=t[3];return e[0]=(i*h+s*a+o*m-n*l)*2,e[1]=(o*h+s*l+n*a-i*m)*2,e[2]=(n*h+s*m+i*l-o*a)*2,e}function Sr(e,t,i){var o=t[0],n=t[1],s=t[2],a=t[3],l=i[0]*.5,m=i[1]*.5,h=i[2]*.5,r=t[4],u=t[5],c=t[6],p=t[7];return e[0]=o,e[1]=n,e[2]=s,e[3]=a,e[4]=a*l+n*h-s*m+r,e[5]=a*m+s*l-o*h+u,e[6]=a*h+o*m-n*l+c,e[7]=-o*l-n*m-s*h+p,e}function br(e,t,i){var o=-t[0],n=-t[1],s=-t[2],a=t[3],l=t[4],m=t[5],h=t[6],r=t[7],u=l*a+r*o+m*s-h*n,c=m*a+r*n+h*o-l*s,p=h*a+r*s+l*n-m*o,_=r*a-l*o-m*n-h*s;return Ot(e,t,i),o=e[0],n=e[1],s=e[2],a=e[3],e[4]=u*a+_*o+c*s-p*n,e[5]=c*a+_*n+p*o-u*s,e[6]=p*a+_*s+u*n-c*o,e[7]=_*a-u*o-c*n-p*s,e}function xr(e,t,i){var o=-t[0],n=-t[1],s=-t[2],a=t[3],l=t[4],m=t[5],h=t[6],r=t[7],u=l*a+r*o+m*s-h*n,c=m*a+r*n+h*o-l*s,p=h*a+r*s+l*n-m*o,_=r*a-l*o-m*n-h*s;return Wt(e,t,i),o=e[0],n=e[1],s=e[2],a=e[3],e[4]=u*a+_*o+c*s-p*n,e[5]=c*a+_*n+p*o-u*s,e[6]=p*a+_*s+u*n-c*o,e[7]=_*a-u*o-c*n-p*s,e}function vr(e,t,i){var o=-t[0],n=-t[1],s=-t[2],a=t[3],l=t[4],m=t[5],h=t[6],r=t[7],u=l*a+r*o+m*s-h*n,c=m*a+r*n+h*o-l*s,p=h*a+r*s+l*n-m*o,_=r*a-l*o-m*n-h*s;return kt(e,t,i),o=e[0],n=e[1],s=e[2],a=e[3],e[4]=u*a+_*o+c*s-p*n,e[5]=c*a+_*n+p*o-u*s,e[6]=p*a+_*s+u*n-c*o,e[7]=_*a-u*o-c*n-p*s,e}function Br(e,t,i){var o=i[0],n=i[1],s=i[2],a=i[3],l=t[0],m=t[1],h=t[2],r=t[3];return e[0]=l*a+r*o+m*s-h*n,e[1]=m*a+r*n+h*o-l*s,e[2]=h*a+r*s+l*n-m*o,e[3]=r*a-l*o-m*n-h*s,l=t[4],m=t[5],h=t[6],r=t[7],e[4]=l*a+r*o+m*s-h*n,e[5]=m*a+r*n+h*o-l*s,e[6]=h*a+r*s+l*n-m*o,e[7]=r*a-l*o-m*n-h*s,e}function Mr(e,t,i){var o=t[0],n=t[1],s=t[2],a=t[3],l=i[0],m=i[1],h=i[2],r=i[3];return e[0]=o*r+a*l+n*h-s*m,e[1]=n*r+a*m+s*l-o*h,e[2]=s*r+a*h+o*m-n*l,e[3]=a*r-o*l-n*m-s*h,l=i[4],m=i[5],h=i[6],r=i[7],e[4]=o*r+a*l+n*h-s*m,e[5]=n*r+a*m+s*l-o*h,e[6]=s*r+a*h+o*m-n*l,e[7]=a*r-o*l-n*m-s*h,e}function Ar(e,t,i,o){if(Math.abs(o)<M)return di(e,t);var n=Math.hypot(i[0],i[1],i[2]);o=o*.5;var s=Math.sin(o),a=s*i[0]/n,l=s*i[1]/n,m=s*i[2]/n,h=Math.cos(o),r=t[0],u=t[1],c=t[2],p=t[3];e[0]=r*h+p*a+u*m-c*l,e[1]=u*h+p*l+c*a-r*m,e[2]=c*h+p*m+r*l-u*a,e[3]=p*h-r*a-u*l-c*m;var _=t[4],g=t[5],d=t[6],C=t[7];return e[4]=_*h+C*a+g*m-d*l,e[5]=g*h+C*l+d*a-_*m,e[6]=d*h+C*m+_*l-g*a,e[7]=C*h-_*a-g*l-d*m,e}function Vr(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e}function _i(e,t,i){var o=t[0],n=t[1],s=t[2],a=t[3],l=i[4],m=i[5],h=i[6],r=i[7],u=t[4],c=t[5],p=t[6],_=t[7],g=i[0],d=i[1],C=i[2],T=i[3];return e[0]=o*T+a*g+n*C-s*d,e[1]=n*T+a*d+s*g-o*C,e[2]=s*T+a*C+o*d-n*g,e[3]=a*T-o*g-n*d-s*C,e[4]=o*r+a*l+n*h-s*m+u*T+_*g+c*C-p*d,e[5]=n*r+a*m+s*l-o*h+c*T+_*d+p*g-u*C,e[6]=s*r+a*h+o*m-n*l+p*T+_*C+u*d-c*g,e[7]=a*r-o*l-n*m-s*h+_*T-u*g-c*d-p*C,e}function Rr(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e}function Dr(e,t,i,o){var n=1-o;return gi(t,i)<0&&(o=-o),e[0]=t[0]*n+i[0]*o,e[1]=t[1]*n+i[1]*o,e[2]=t[2]*n+i[2]*o,e[3]=t[3]*n+i[3]*o,e[4]=t[4]*n+i[4]*o,e[5]=t[5]*n+i[5]*o,e[6]=t[6]*n+i[6]*o,e[7]=t[7]*n+i[7]*o,e}function Ir(e,t){var i=ct(t);return e[0]=-t[0]/i,e[1]=-t[1]/i,e[2]=-t[2]/i,e[3]=t[3]/i,e[4]=-t[4]/i,e[5]=-t[5]/i,e[6]=-t[6]/i,e[7]=t[7]/i,e}function Er(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}function kr(e,t){var i=ct(t);if(i>0){i=Math.sqrt(i);var o=t[0]/i,n=t[1]/i,s=t[2]/i,a=t[3]/i,l=t[4],m=t[5],h=t[6],r=t[7],u=o*l+n*m+s*h+a*r;e[0]=o,e[1]=n,e[2]=s,e[3]=a,e[4]=(l-o*u)/i,e[5]=(m-n*u)/i,e[6]=(h-s*u)/i,e[7]=(r-a*u)/i}return e}function Fr(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function jr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function wr(e,t){var i=e[0],o=e[1],n=e[2],s=e[3],a=e[4],l=e[5],m=e[6],h=e[7],r=t[0],u=t[1],c=t[2],p=t[3],_=t[4],g=t[5],d=t[6],C=t[7];return Math.abs(i-r)<=M*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(o-u)<=M*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(n-c)<=M*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(s-p)<=M*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(a-_)<=M*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(l-g)<=M*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(m-d)<=M*Math.max(1,Math.abs(m),Math.abs(d))&&Math.abs(h-C)<=M*Math.max(1,Math.abs(h),Math.abs(C))}var gr,Pr,Lr,gi,fi,Or,ct,Wr,Pi=w(()=>{U();jt();Pt();gr=at;Pr=at;Lr=_i;gi=lt;fi=ut,Or=fi,ct=mt,Wr=ct});var yt=w(()=>{U();_t();Pt();jt();Pi();St();Et()});var qr={};var Ci=w(()=>{yt();if(WL&&WL.Object){WL.Object.prototype.pp_getPosition=function(e){return this.pp_getPositionWorld(e)},WL.Object.prototype.pp_getPositionWorld=function(e=y.create()){return this.getTranslationWorld(e),e},WL.Object.prototype.pp_getPositionLocal=function(e=y.create()){return this.getTranslationLocal(e),e},WL.Object.prototype.pp_getRotation=function(e){return this.pp_getRotationWorld(e)},WL.Object.prototype.pp_getRotationDegrees=function(e){return this.pp_getRotationWorldDegrees(e)},WL.Object.prototype.pp_getRotationRadians=function(e){return this.pp_getRotationWorldRadians(e)},WL.Object.prototype.pp_getRotationMatrix=function(e){return this.pp_getRotationWorldMatrix(e)},WL.Object.prototype.pp_getRotationQuat=function(e){return this.pp_getRotationWorldQuat(e)},WL.Object.prototype.pp_getRotationWorld=function(e){return this.pp_getRotationWorldDegrees(e)},WL.Object.prototype.pp_getRotationWorldDegrees=function(e){return e=this.pp_getRotationWorldRadians(e),e.forEach(function(t,i,o){o[i]=this._pp_toDegrees(t)}.bind(this)),e},WL.Object.prototype.pp_getRotationWorldRadians=function(){let e=f.create();return function(t=y.create()){return this.pp_getRotationWorldQuat(e),this._pp_quaternionToRadians(e,t),t}}(),WL.Object.prototype.pp_getRotationWorldMatrix=function(){let e=f.create();return function(t=R.create()){return this.pp_getRotationWorldQuat(e),R.fromQuat(t,e),t}}(),WL.Object.prototype.pp_getRotationWorldQuat=function(e=f.create()){return f.copy(e,this.rotationWorld),e},WL.Object.prototype.pp_getRotationLocal=function(e){return this.pp_getRotationLocalDegrees(e)},WL.Object.prototype.pp_getRotationLocalDegrees=function(e){return e=this.pp_getRotationLocalRadians(e),e.forEach(function(t,i,o){o[i]=this._pp_toDegrees(t)}.bind(this)),e},WL.Object.prototype.pp_getRotationLocalRadians=function(){let e=f.create();return function(t=y.create()){return this.pp_getRotationLocalQuat(e),this._pp_quaternionToRadians(e,t),t}}(),WL.Object.prototype.pp_getRotationLocalMatrix=function(){let e=f.create();return function(t=R.create()){return this.pp_getRotationLocalQuat(e),R.fromQuat(t,e),t}}(),WL.Object.prototype.pp_getRotationLocalQuat=function(e=f.create()){return f.copy(e,this.rotationLocal),e},WL.Object.prototype.pp_getScale=function(e){return this.pp_getScaleWorld(e)},WL.Object.prototype.pp_getScaleWorld=function(e=y.create()){return y.copy(e,this.scalingWorld),e},WL.Object.prototype.pp_getScaleLocal=function(e=y.create()){return y.copy(e,this.scalingLocal),e},WL.Object.prototype.pp_getTransform=function(e){return this.pp_getTransformWorld(e)},WL.Object.prototype.pp_getTransformMatrix=function(e){return this.pp_getTransformWorldMatrix(e)},WL.Object.prototype.pp_getTransformQuat=function(e){return this.pp_getTransformWorldQuat(e)},WL.Object.prototype.pp_getTransformWorld=function(e){return this.pp_getTransformWorldMatrix(e)},WL.Object.prototype.pp_getTransformWorldMatrix=function(){let e=x.create(),t=y.create();return function(i=P.create()){return this.pp_getTransformWorldQuat(e),this.pp_getScaleWorld(t),P.fromQuat2(i,e),P.scale(i,i,t),i}}(),WL.Object.prototype.pp_getTransformWorldQuat=function(e=x.create()){return x.copy(e,this.transformWorld),e},WL.Object.prototype.pp_getTransformLocal=function(e){return this.pp_getTransformLocalMatrix(e)},WL.Object.prototype.pp_getTransformLocalMatrix=function(){let e=x.create(),t=y.create();return function(i=P.create()){return this.pp_getTransformLocalQuat(e),this.pp_getScaleLocal(t),P.fromQuat2(i,e),P.scale(i,i,t),i}}(),WL.Object.prototype.pp_getTransformLocalQuat=function(e=x.create()){return x.copy(e,this.transformLocal),e},WL.Object.prototype.pp_getForward=function(e){return this.pp_getForwardWorld(e)},WL.Object.prototype.pp_getForwardWorld=function(){let e=R.create();return function(t=y.create()){return this.pp_getRotationWorldMatrix(e),t[0]=e[6],t[1]=e[7],t[2]=e[8],t}}(),WL.Object.prototype.pp_getForwardLocal=function(){let e=R.create();return function(t=y.create()){return this.pp_getRotationLocalMatrix(e),t[0]=e[6],t[1]=e[7],t[2]=e[8],t}}(),WL.Object.prototype.pp_getBackward=function(e){return this.pp_getBackwardWorld(e)},WL.Object.prototype.pp_getBackwardWorld=function(){let e=R.create();return function(t=y.create()){return this.pp_getRotationWorldMatrix(e),t[0]=-e[6],t[1]=-e[7],t[2]=-e[8],t}}(),WL.Object.prototype.pp_getBackwardLocal=function(){let e=R.create();return function(t=y.create()){return this.pp_getRotationLocalMatrix(e),t[0]=-e[6],t[1]=-e[7],t[2]=-e[8],t}}(),WL.Object.prototype.pp_getUp=function(e){return this.pp_getUpWorld(e)},WL.Object.prototype.pp_getUpWorld=function(){let e=R.create();return function(t=y.create()){return this.pp_getRotationWorldMatrix(e),t[0]=e[3],t[1]=e[4],t[2]=e[5],t}}(),WL.Object.prototype.pp_getUpLocal=function(){let e=R.create();return function(t=y.create()){return this.pp_getRotationLocalMatrix(e),t[0]=e[3],t[1]=e[4],t[2]=e[5],t}}(),WL.Object.prototype.pp_getDown=function(e){return this.pp_getDownWorld(e)},WL.Object.prototype.pp_getDownWorld=function(){let e=R.create();return function(t=y.create()){return this.pp_getRotationWorldMatrix(e),t[0]=-e[3],t[1]=-e[4],t[2]=-e[5],t}}(),WL.Object.prototype.pp_getDownLocal=function(){let e=R.create();return function(t=y.create()){return this.pp_getRotationLocalMatrix(e),t[0]=-e[3],t[1]=-e[4],t[2]=-e[5],t}}(),WL.Object.prototype.pp_getLeft=function(e){return this.pp_getLeftWorld(e)},WL.Object.prototype.pp_getLeftWorld=function(){let e=R.create();return function(t=y.create()){return this.pp_getRotationWorldMatrix(e),t[0]=e[0],t[1]=e[1],t[2]=e[2],t}}(),WL.Object.prototype.pp_getLeftLocal=function(){let e=R.create();return function(t=y.create()){return this.pp_getRotationLocalMatrix(e),t[0]=e[0],t[1]=e[1],t[2]=e[2],t}}(),WL.Object.prototype.pp_getRight=function(e){return this.pp_getRightWorld(e)},WL.Object.prototype.pp_getRightWorld=function(){let e=R.create();return function(t=y.create()){return this.pp_getRotationWorldMatrix(e),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}}(),WL.Object.prototype.pp_getRightLocal=function(){let e=R.create();return function(t=y.create()){return this.pp_getRotationLocalMatrix(e),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}}(),WL.Object.prototype.pp_setPosition=function(e){this.pp_setPositionWorld(e)},WL.Object.prototype.pp_setPositionWorld=function(e){this.setTranslationWorld(e)},WL.Object.prototype.pp_setPositionLocal=function(e){this.setTranslationLocal(e)},WL.Object.prototype.pp_setRotation=function(e){this.pp_setRotationWorld(e)},WL.Object.prototype.pp_setRotationDegrees=function(e){this.pp_setRotationWorldDegrees(e)},WL.Object.prototype.pp_setRotationRadians=function(e){this.pp_setRotationWorldRadians(e)},WL.Object.prototype.pp_setRotationMatrix=function(e){this.pp_setRotationWorldMatrix(e)},WL.Object.prototype.pp_setRotationQuat=function(e){this.pp_setRotationWorldQuat(e)},WL.Object.prototype.pp_setRotationWorld=function(e){this.pp_setRotationWorldDegrees(e)},WL.Object.prototype.pp_setRotationWorldDegrees=function(){let e=f.create();return function(t){this._pp_degreesToQuaternion(t,e),this.pp_setRotationWorldQuat(e)}}(),WL.Object.prototype.pp_setRotationWorldRadians=function(){let e=y.create();return function(t){t.forEach(function(i,o,n){e[o]=this._pp_toDegrees(i)}.bind(this)),this.pp_setRotationWorldDegrees(e)}}(),WL.Object.prototype.pp_setRotationWorldMatrix=function(){let e=f.create();return function(t){f.fromMat3(e,t),this.pp_setRotationWorldQuat(e)}}(),WL.Object.prototype.pp_setRotationWorldQuat=function(e){this.rotationWorld=e},WL.Object.prototype.pp_setRotationLocal=function(e){this.pp_setRotationLocalDegrees(e)},WL.Object.prototype.pp_setRotationLocalDegrees=function(){let e=f.create();return function(t){this._pp_degreesToQuaternion(t,e),this.pp_setRotationLocalQuat(e)}}(),WL.Object.prototype.pp_setRotationLocalRadians=function(){let e=y.create();return function(t){t.forEach(function(i,o,n){e[o]=this._pp_toDegrees(i)}.bind(this)),this.pp_setRotationLocalDegrees(e)}}(),WL.Object.prototype.pp_setRotationLocalMatrix=function(){let e=f.create();return function(t){f.fromMat3(e,t),this.pp_setRotationLocalQuat(e)}}(),WL.Object.prototype.pp_setRotationLocalQuat=function(e){this.rotationLocal=e},WL.Object.prototype.pp_setScale=function(e){this.pp_setScaleWorld(e)},WL.Object.prototype.pp_setScaleWorld=function(){let e=y.create();return function(t){isNaN(t)?this.scalingWorld=t:(y.set(e,t,t,t),this.scalingWorld=e)}}(),WL.Object.prototype.pp_setScaleLocal=function(){let e=y.create();return function(t){isNaN(t)?this.scalingLocal=t:(y.set(e,t,t,t),this.scalingLocal=e)}}(),WL.Object.prototype.pp_setTransform=function(e){this.pp_setTransformWorld(e)},WL.Object.prototype.pp_setTransformMatrix=function(e){this.pp_setTransformWorldMatrix(e)},WL.Object.prototype.pp_setTransformQuat=function(e){this.pp_setTransformWorldQuat(e)},WL.Object.prototype.pp_setTransformWorld=function(e){return this.pp_setTransformWorldMatrix(e)},WL.Object.prototype.pp_setTransformWorldMatrix=function(){let e=y.create(),t=f.create(),i=y.create(),o=P.create(),n=y.create(),s=y.create();return y.set(s,1,1,1),function(a){P.getTranslation(e,a),P.getScaling(i,a),y.divide(n,s,i),P.scale(o,a,n),P.getRotation(t,o),f.normalize(t,t),this.pp_setScaleWorld(i),this.pp_setRotationWorldQuat(t),this.pp_setPositionWorld(e)}}(),WL.Object.prototype.pp_setTransformWorldQuat=function(e){this.transformWorld=e},WL.Object.prototype.pp_setTransformLocal=function(e){return this.pp_setTransformLocalMatrix(e)},WL.Object.prototype.pp_setTransformLocalMatrix=function(){let e=y.create(),t=f.create(),i=y.create(),o=P.create(),n=y.create(),s=y.create();return y.set(s,1,1,1),function(a){P.getTranslation(e,a),P.getScaling(i,a),y.divide(n,s,i),P.scale(o,a,n),P.getRotation(t,o),f.normalize(t,t),this.pp_setScaleLocal(i),this.pp_setRotationLocalQuat(t),this.pp_setPositionLocal(e)}}(),WL.Object.prototype.pp_setTransformLocalQuat=function(e){this.transformLocal=e},WL.Object.prototype.pp_resetPosition=function(){this.pp_resetPositionWorld()},WL.Object.prototype.pp_resetPositionWorld=function(){let e=y.create();return function(){this.pp_setPositionWorld(e)}}(),WL.Object.prototype.pp_resetPositionLocal=function(){let e=y.create();return function(){this.pp_setPositionLocal(e)}}(),WL.Object.prototype.pp_resetRotation=function(){this.pp_resetRotationWorld()},WL.Object.prototype.pp_resetRotationWorld=function(){let e=f.create();return function(){this.pp_setRotationWorldQuat(e)}}(),WL.Object.prototype.pp_resetRotationLocal=function(){let e=f.create();return function(){this.pp_setRotationLocalQuat(e)}}(),WL.Object.prototype.pp_resetScale=function(){this.pp_resetScaleWorld()},WL.Object.prototype.pp_resetScaleWorld=function(){let e=y.create();return y.set(e,1,1,1),function(){this.pp_setScaleWorld(e)}}(),WL.Object.prototype.pp_resetScaleLocal=function(){let e=y.create();return y.set(e,1,1,1),function(){this.pp_setScaleLocal(e)}}(),WL.Object.prototype.pp_resetTransform=function(){this.pp_resetTransformWorld()},WL.Object.prototype.pp_resetTransformWorld=function(){this.pp_resetScaleWorld(),this.pp_resetRotationWorld(),this.pp_resetPositionWorld()},WL.Object.prototype.pp_resetTransformLocal=function(){this.pp_resetScaleLocal(),this.pp_resetRotationLocal(),this.pp_resetPositionLocal()},WL.Object.prototype.pp_translate=function(e){this.pp_translateWorld(e)},WL.Object.prototype.pp_translateWorld=function(e){this.translateWorld(e)},WL.Object.prototype.pp_translateLocal=function(e){this.translate(e)},WL.Object.prototype.pp_translateObject=function(e){this.translateObject(e)},WL.Object.prototype.pp_translateAxis=function(e,t){this.pp_translateAxisWorld(e,t)},WL.Object.prototype.pp_translateAxisWorld=function(){let e=y.create();return function(t,i){y.scale(e,t,i),this.pp_translateWorld(e)}}(),WL.Object.prototype.pp_translateAxisLocal=function(){let e=y.create();return function(t,i){y.scale(e,t,i),this.pp_translateLocal(e)}}(),WL.Object.prototype.pp_translateAxisObject=function(){let e=y.create();return function(t,i){y.scale(e,t,i),this.pp_translateObject(e)}}(),WL.Object.prototype.pp_rotate=function(e){this.pp_rotateWorld(e)},WL.Object.prototype.pp_rotateDegrees=function(e){this.pp_rotateWorldDegrees(e)},WL.Object.prototype.pp_rotateRadians=function(e){this.pp_rotateWorldRadians(e)},WL.Object.prototype.pp_rotateMatrix=function(e){this.pp_rotateWorldMatrix(e)},WL.Object.prototype.pp_rotateQuat=function(e){this.pp_rotateWorldQuat(e)},WL.Object.prototype.pp_rotateWorld=function(e){this.pp_rotateWorldDegrees(e)},WL.Object.prototype.pp_rotateWorldDegrees=function(){let e=f.create();return function(t){this._pp_degreesToQuaternion(t,e),this.pp_rotateWorldQuat(e)}}(),WL.Object.prototype.pp_rotateWorldRadians=function(){let e=y.create();return function(t){t.forEach(function(i,o,n){e[o]=this._pp_toDegrees(i)}.bind(this)),this.pp_rotateWorldDegrees(e)}}(),WL.Object.prototype.pp_rotateWorldMatrix=function(){let e=f.create();return function(t){f.fromMat3(e,t),f.normalize(e,e),this.pp_rotateWorldQuat(e)}}(),WL.Object.prototype.pp_rotateWorldQuat=function(){let e=f.create();return function(t){this.pp_getRotationWorldQuat(e),f.mul(e,t,e),f.normalize(e,e),this.pp_setRotationWorldQuat(e)}}(),WL.Object.prototype.pp_rotateLocal=function(e){this.pp_rotateLocalDegrees(e)},WL.Object.prototype.pp_rotateLocalDegrees=function(){let e=f.create();return function(t){this._pp_degreesToQuaternion(t,e),this.pp_rotateLocalQuat(e)}}(),WL.Object.prototype.pp_rotateLocalRadians=function(){let e=y.create();return function(t){t.forEach(function(i,o,n){e[o]=this._pp_toDegrees(i)}.bind(this)),this.pp_rotateLocalDegrees(e)}}(),WL.Object.prototype.pp_rotateLocalMatrix=function(){let e=f.create();return function(t){f.fromMat3(e,t),f.normalize(e,e),this.pp_rotateLocalQuat(e)}}(),WL.Object.prototype.pp_rotateLocalQuat=function(){let e=f.create();return function(t){this.pp_getRotationLocalQuat(e),f.mul(e,t,e),f.normalize(e,e),this.pp_setRotationLocalQuat(e)}}(),WL.Object.prototype.pp_rotateObject=function(e){this.pp_rotateObjectDegrees(e)},WL.Object.prototype.pp_rotateObjectDegrees=function(){let e=f.create();return function(t){this._pp_degreesToQuaternion(t,e),this.pp_rotateObjectQuat(e)}}(),WL.Object.prototype.pp_rotateObjectRadians=function(){let e=y.create();return function(t){t.forEach(function(i,o,n){e[o]=this._pp_toDegrees(i)}.bind(this)),this.pp_rotateObjectDegrees(e)}}(),WL.Object.prototype.pp_rotateObjectMatrix=function(){let e=f.create();return function(t){f.fromMat3(e,t),f.normalize(e,e),this.pp_rotateObjectQuat(e)}}(),WL.Object.prototype.pp_rotateObjectQuat=function(e){this.rotateObject(e)},WL.Object.prototype.pp_rotateAxis=function(e,t){this.pp_rotateAxisWorld(e,t)},WL.Object.prototype.pp_rotateAxisDegrees=function(e,t){this.pp_rotateAxisWorldDegrees(e,t)},WL.Object.prototype.pp_rotateAxisRadians=function(e,t){this.pp_rotateAxisWorldRadians(e,t)},WL.Object.prototype.pp_rotateAxisWorld=function(e,t){this.pp_rotateAxisWorldDegrees(e,t)},WL.Object.prototype.pp_rotateAxisWorldDegrees=function(e,t){this.pp_rotateAxisWorldRadians(F.toRadian(e),t)},WL.Object.prototype.pp_rotateAxisWorldRadians=function(){let e=f.create();return function(t,i){f.setAxisAngle(e,i,t),this.pp_rotateWorldQuat(e)}}(),WL.Object.prototype.pp_rotateAxisLocal=function(e,t){this.pp_rotateAxisLocalDegrees(e,t)},WL.Object.prototype.pp_rotateAxisLocalDegrees=function(e,t){this.pp_rotateAxisLocalRadians(F.toRadian(e),t)},WL.Object.prototype.pp_rotateAxisLocalRadians=function(){let e=f.create();return function(t,i){f.setAxisAngle(e,i,t),this.pp_rotateLocalQuat(e)}}(),WL.Object.prototype.pp_rotateAxisObject=function(e,t){this.pp_rotateAxisObjectDegrees(e,t)},WL.Object.prototype.pp_rotateAxisObjectDegrees=function(e,t){this.pp_rotateAxisObjectRadians(F.toRadian(e),t)},WL.Object.prototype.pp_rotateAxisObjectRadians=function(){let e=f.create();return function(t,i){f.setAxisAngle(e,i,t),this.pp_rotateObjectQuat(e)}}(),WL.Object.prototype.pp_rotateAround=function(e,t){this.pp_rotateAroundWorld(e,t)},WL.Object.prototype.pp_rotateAroundDegrees=function(e,t){this.pp_rotateAroundWorldDegrees(e,t)},WL.Object.prototype.pp_rotateAroundRadians=function(e,t){this.pp_rotateAroundWorldRadians(e,t)},WL.Object.prototype.pp_rotateAroundMatrix=function(e,t){this.pp_rotateAroundWorldMatrix(e,t)},WL.Object.prototype.pp_rotateAroundQuat=function(e,t){this.pp_rotateAroundWorldQuat(e,t)},WL.Object.prototype.pp_rotateAroundWorld=function(e,t){this.pp_rotateAroundWorldDegrees(e,t)},WL.Object.prototype.pp_rotateAroundWorldDegrees=function(){let e=f.create();return function(t,i){this._pp_degreesToQuaternion(t,e),this.pp_rotateAroundWorldQuat(e,i)}}(),WL.Object.prototype.pp_rotateAroundWorldRadians=function(){let e=y.create();return function(t,i){t.forEach(function(o,n,s){e[n]=this._pp_toDegrees(o)}.bind(this)),this.pp_rotateAroundWorldDegrees(e,i)}}(),WL.Object.prototype.pp_rotateAroundWorldMatrix=function(){let e=f.create();return function(t,i){f.fromMat3(e,t),f.normalize(e,e),this.pp_rotateAroundWorldQuat(e,i)}}(),WL.Object.prototype.pp_rotateAroundWorldQuat=function(){let e=y.create();return function(t,i){let o=f.getAxisAngle(e,t);this.pp_rotateAroundAxisWorldRadians(o,e,i)}}(),WL.Object.prototype.pp_rotateAroundLocal=function(e,t){this.pp_rotateAroundLocalDegrees(e,t)},WL.Object.prototype.pp_rotateAroundLocalDegrees=function(){let e=f.create();return function(t,i){this._pp_degreesToQuaternion(t,e),this.pp_rotateAroundLocalQuat(e,i)}}(),WL.Object.prototype.pp_rotateAroundLocalRadians=function(){let e=y.create();return function(t,i){t.forEach(function(o,n,s){e[n]=this._pp_toDegrees(o)}.bind(this)),this.pp_rotateAroundLocalDegrees(e,i)}}(),WL.Object.prototype.pp_rotateAroundLocalMatrix=function(){let e=f.create();return function(t,i){f.fromMat3(e,t),f.normalize(e,e),this.pp_rotateAroundLocalQuat(e,i)}}(),WL.Object.prototype.pp_rotateAroundLocalQuat=function(){let e=y.create();return function(t,i){let o=f.getAxisAngle(e,t);this.pp_rotateAroundAxisLocalRadians(o,e,i)}}(),WL.Object.prototype.pp_rotateAroundObject=function(e,t){this.pp_rotateAroundObjectDegrees(e,t)},WL.Object.prototype.pp_rotateAroundObjectDegrees=function(){let e=f.create();return function(t,i){this._pp_degreesToQuaternion(t,e),this.pp_rotateAroundObjectQuat(e,i)}}(),WL.Object.prototype.pp_rotateAroundObjectRadians=function(){let e=y.create();return function(t,i){t.forEach(function(o,n,s){e[n]=this._pp_toDegrees(o)}.bind(this)),this.pp_rotateAroundObjectDegrees(e,i)}}(),WL.Object.prototype.pp_rotateAroundObjectMatrix=function(){let e=f.create();return function(t,i){f.fromMat3(e,t),f.normalize(e,e),this.pp_rotateAroundObjectQuat(e,i)}}(),WL.Object.prototype.pp_rotateAroundObjectQuat=function(){let e=y.create();return function(t,i){let o=f.getAxisAngle(e,t);this.pp_rotateAroundAxisObjectRadians(o,e,i)}}(),WL.Object.prototype.pp_rotateAroundAxis=function(e,t,i){this.pp_rotateAroundAxisWorld(e,t,i)},WL.Object.prototype.pp_rotateAroundAxisDegrees=function(e,t,i){this.pp_rotateAroundAxisWorldDegrees(e,t,i)},WL.Object.prototype.pp_rotateAroundAxisRadians=function(e,t,i){this.pp_rotateAroundAxisWorldRadians(e,t,i)},WL.Object.prototype.pp_rotateAroundAxisWorld=function(e,t,i){this.pp_rotateAroundAxisWorldDegrees(e,t,i)},WL.Object.prototype.pp_rotateAroundAxisWorldDegrees=function(e,t,i){this.pp_rotateAroundAxisWorldRadians(F.toRadian(e),t,i)},WL.Object.prototype.pp_rotateAroundAxisWorldRadians=function(){let e=x.create(),t=x.create(),i=x.create(),o=f.create();return function(n,s,a){x.fromRotationTranslation(e,o,a),this.pp_getTransformWorldQuat(i),x.conjugate(t,e),x.mul(i,t,i),x.rotateAroundAxis(e,e,s,n),x.mul(i,e,i),this.pp_setTransformWorldQuat(i)}}(),WL.Object.prototype.pp_rotateAroundAxisLocal=function(e,t,i){this.pp_rotateAroundAxisLocalDegrees(e,t,i)},WL.Object.prototype.pp_rotateAroundAxisLocalDegrees=function(e,t,i){this.pp_rotateAroundAxisLocalRadians(F.toRadian(e),t,i)},WL.Object.prototype.pp_rotateAroundAxisLocalRadians=function(){let e=y.create(),t=y.create();return function(i,o,n){this.pp_convertPositionLocalToWorld(n,e),this.pp_convertDirectionLocalToWorld(o,t),this.pp_rotateAroundAxisWorldRadians(i,t,e)}}(),WL.Object.prototype.pp_rotateAroundAxisObject=function(e,t,i){this.pp_rotateAroundAxisObjectDegrees(e,t,i)},WL.Object.prototype.pp_rotateAroundAxisObjectDegrees=function(e,t,i){this.pp_rotateAroundAxisObjectRadians(F.toRadian(e),t,i)},WL.Object.prototype.pp_rotateAroundAxisObjectRadians=function(){let e=y.create(),t=y.create();return function(i,o,n){this.pp_convertPositionObjectToWorld(n,e),this.pp_convertDirectionObjectToWorld(o,t),this.pp_rotateAroundAxisWorldRadians(i,t,e)}}(),WL.Object.prototype.pp_scaleObject=function(){let e=y.create();return function(t){isNaN(t)?this.scale(t):(y.set(e,t,t,t),this.scale(e))}}(),WL.Object.prototype.pp_lookAt=function(e,t){this.pp_lookAtWorld(e,t)},WL.Object.prototype.pp_lookAtWorld=function(){let e=y.create();return function(t,i){this.pp_getPositionWorld(e),y.sub(e,t,e),this.pp_lookToWorld(e,i)}}(),WL.Object.prototype.pp_lookAtLocal=function(){let e=y.create();return function(t,i){this.pp_getPositionLocal(e),y.sub(e,t,e),this.pp_lookToLocal(e,i)}}(),WL.Object.prototype.pp_lookTo=function(e,t){this.pp_lookToWorld(e,t)},WL.Object.prototype.pp_lookToWorld=function(){let e=y.create(),t=y.create(),i=y.create(),o=P.create(),n=f.create();return function(s,a=this.pp_getUpWorld(e)){y.copy(e,a);let l=y.angle(s,e);(l<this._pp_epsilon||l>Math.PI-this._pp_epsilon)&&(this.pp_getUpWorld(e),l=y.angle(s,e),(l<this._pp_epsilon||l>Math.PI-this._pp_epsilon)&&(this.pp_getForwardWorld(e),l<this._pp_epsilon&&y.negate(e,e))),this.pp_getPositionWorld(t),y.add(i,t,s),P.targetTo(o,i,t,e),P.getRotation(n,o),f.normalize(n,n),this.pp_setRotationWorldQuat(n)}}(),WL.Object.prototype.pp_lookToLocal=function(){let e=y.create(),t=y.create(),i=y.create(),o=P.create(),n=f.create();return function(s,a=this.pp_getUpLocal(e)){y.copy(e,a);let l=y.angle(s,e);(l<this._pp_epsilon||l>Math.PI-this._pp_epsilon)&&(this.pp_getUpLocal(e),l=y.angle(s,e),(l<this._pp_epsilon||l>Math.PI-this._pp_epsilon)&&(this.pp_getForwardLocal(e),l<this._pp_epsilon&&y.negate(e,e))),this.pp_getPositionLocal(t),y.add(i,t,s),P.targetTo(o,i,t,e),P.getRotation(n,o),f.normalize(n,n),this.pp_setRotationLocalQuat(n)}}(),WL.Object.prototype.pp_setParent=function(){let e=y.create(),t=f.create(),i=y.create();return function(o,n=!0){n?(this.pp_getPositionWorld(e),this.pp_getRotationWorldQuat(t),this.pp_getScaleWorld(i),this.parent=o,this.pp_setScaleWorld(i),this.pp_setRotationWorldQuat(t),this.pp_setPositionWorld(e)):this.parent=o}}(),WL.Object.prototype.pp_getParent=function(){return this.parent},WL.Object.prototype.pp_convertPositionObjectToWorld=function(){let e=P.create();return function(t,i=y.create()){return this.pp_getTransformWorldMatrix(e),y.transformMat4(i,t,e),i}}(),WL.Object.prototype.pp_convertDirectionObjectToWorld=function(){let e=f.create();return function(t,i=y.create()){return this.pp_getRotationWorldQuat(e),y.transformQuat(i,t,e),i}}(),WL.Object.prototype.pp_convertPositionWorldToObject=function(){let e=P.create();return function(t,i=y.create()){return this.pp_getTransformWorldMatrix(e),P.invert(e,e),y.transformMat4(i,t,e),i}}(),WL.Object.prototype.pp_convertDirectionWorldToObject=function(){let e=f.create();return function(t,i=y.create()){return this.pp_getRotationWorldQuat(e),f.conjugate(e,e),y.transformQuat(i,t,e),i}}(),WL.Object.prototype.pp_convertPositionLocalToWorld=function(e,t=y.create()){return this.pp_getParent()?this.pp_getParent().pp_convertPositionObjectToWorld(e,t):y.copy(t,e),t},WL.Object.prototype.pp_convertDirectionLocalToWorld=function(e,t=y.create()){return this.pp_getParent()?this.pp_getParent().pp_convertDirectionObjectToWorld(e,t):y.copy(t,e),t},WL.Object.prototype.pp_convertPositionWorldToLocal=function(e,t=y.create()){return this.pp_getParent()?this.pp_getParent().pp_convertPositionWorldToObject(e,t):y.copy(t,e),t},WL.Object.prototype.pp_convertDirectionWorldToLocal=function(e,t=y.create()){return this.pp_getParent()?this.pp_getParent().pp_convertDirectionWorldToObject(e,t):y.copy(t,e),t},WL.Object.prototype.pp_convertPositionObjectToLocal=function(e,t=y.create()){return this.pp_convertPositionObjectToWorld(e,t),this.pp_convertPositionWorldToLocal(t,t),t},WL.Object.prototype.pp_convertDirectionObjectToLocal=function(e,t=y.create()){return this.pp_convertDirectionObjectToWorld(e,t),this.pp_convertDirectionWorldToLocal(t,t),t},WL.Object.prototype.pp_convertPositionLocalToObject=function(e,t=y.create()){return this.pp_convertPositionLocalToWorld(e,t),this.pp_convertPositionWorldToObject(t,t),t},WL.Object.prototype.pp_convertDirectionLocalToObject=function(e,t=y.create()){return this.pp_convertDirectionLocalToWorld(e,t),this.pp_convertDirectionWorldToObject(t,t),t},WL.Object.prototype.pp_convertTransformObjectToWorld=function(e,t){return this.pp_convertTransformObjectToWorldMatrix(e,t)},WL.Object.prototype.pp_convertTransformObjectToWorldMatrix=function(){let e=P.create(),t=y.create(),i=y.create(),o=y.create(),n=y.create();return y.set(n,1,1,1),function(s,a=P.create()){return this.pp_getTransformWorldMatrix(e),this.pp_hasUniformScaleWorld()?P.mul(a,e,s):(y.set(t,s[12],s[13],s[14]),this.pp_convertPositionObjectToWorld(t,t),P.getScaling(i,e),y.divide(o,n,i),P.scale(e,e,o),P.mul(a,e,s),P.scale(a,a,i),a[12]=t[0],a[13]=t[1],a[14]=t[2],a[15]=1),a}}(),WL.Object.prototype.pp_convertTransformObjectToWorldQuat=function(){let e=y.create(),t=f.create();return function(i,o=x.create()){return this.pp_getRotationWorldQuat(t),f.mul(t,t,i),x.getTranslation(e,i),this.pp_convertPositionObjectToWorld(e,e),x.fromRotationTranslation(o,t,e),o}}(),WL.Object.prototype.pp_convertTransformWorldToObject=function(e,t){return this.pp_convertTransformWorldToObjectMatrix(e,t)},WL.Object.prototype.pp_convertTransformWorldToObjectMatrix=function(){let e=P.create(),t=y.create(),i=y.create(),o=y.create(),n=y.create();return y.set(n,1,1,1),function(s,a=P.create()){return this.pp_getTransformWorldMatrix(e),this.pp_hasUniformScaleWorld()?(P.invert(e,e),P.mul(a,e,s)):(y.set(t,s[12],s[13],s[14]),this.pp_convertPositionWorldToObject(t,t),P.getScaling(i,e),y.divide(o,n,i),P.scale(e,e,o),P.invert(e,e),P.mul(a,e,s),P.scale(a,a,o),a[12]=t[0],a[13]=t[1],a[14]=t[2],a[15]=1),a}}(),WL.Object.prototype.pp_convertTransformWorldToObjectQuat=function(){let e=y.create(),t=f.create();return function(i,o=x.create()){return this.pp_getRotationWorldQuat(t),f.conjugate(t,t),f.mul(t,t,i),x.getTranslation(e,i),this.pp_convertPositionWorldToObject(e,e),x.fromRotationTranslation(o,t,e),o}}(),WL.Object.prototype.pp_convertTransformLocalToWorld=function(e,t){return this.pp_convertTransformLocalToWorldMatrix(e,t)},WL.Object.prototype.pp_convertTransformLocalToWorldMatrix=function(e,t=P.create()){return this.pp_getParent()?this.pp_getParent().pp_convertTransformObjectToWorldMatrix(e,t):P.copy(t,e),t},WL.Object.prototype.pp_convertTransformLocalToWorldQuat=function(e,t=x.create()){return this.pp_getParent()?this.pp_getParent().pp_convertTransformObjectToWorldQuat(e,t):x.copy(t,e),t},WL.Object.prototype.pp_convertTransformWorldToLocal=function(e,t){return this.pp_convertTransformWorldToLocalMatrix(e,t)},WL.Object.prototype.pp_convertTransformWorldToLocalMatrix=function(e,t=P.create()){return this.pp_getParent()?this.pp_getParent().pp_convertTransformWorldToObjectMatrix(e,t):P.copy(t,e),t},WL.Object.prototype.pp_convertTransformWorldToLocalQuat=function(e,t=x.create()){return this.pp_getParent()?this.pp_getParent().pp_convertTransformWorldToObjectQuat(e,t):x.copy(t,e),t},WL.Object.prototype.pp_convertTransformObjectToLocal=function(e,t){return this.pp_convertTransformObjectToLocalMatrix(e,t)},WL.Object.prototype.pp_convertTransformObjectToLocalMatrix=function(e,t=P.create()){return this.pp_convertTransformObjectToWorldMatrix(e,t),this.pp_convertTransformWorldToLocalMatrix(t,t),t},WL.Object.prototype.pp_convertTransformObjectToLocalQuat=function(e,t=x.create()){return this.pp_convertTransformObjectToWorldQuat(e,t),this.pp_convertTransformWorldToLocalQuat(t,t),t},WL.Object.prototype.pp_convertTransformLocalToObject=function(e,t){return this.pp_convertTransformLocalToObjectMatrix(e,t)},WL.Object.prototype.pp_convertTransformLocalToObjectMatrix=function(e,t=P.create()){return this.pp_convertTransformLocalToWorldMatrix(e,t),this.pp_convertTransformWorldToObjectMatrix(t,t),t},WL.Object.prototype.pp_convertTransformLocalToObjectQuat=function(e,t=x.create()){return this.pp_convertTransformLocalToWorldQuat(e,t),this.pp_convertTransformWorldToObjectQuat(t,t),t},WL.Object.prototype.pp_addComponent=function(e,t,i=null){let o=null;return typeof t=="boolean"?(o={},o.active=t):(o=t,i!=null&&(o==null&&(o={}),o.active=i)),this.addComponent(e,o)},WL.Object.prototype.pp_getComponent=function(e,t){return this.getComponent(e,t)},WL.Object.prototype.pp_getComponents=function(e){return this.getComponents(e)},WL.Object.prototype.pp_getComponentHierarchy=function(e,t){let i=this.getComponent(e,t);return i||(i=this.pp_getComponentDescendants(e,t)),i},WL.Object.prototype.pp_getComponentDescendants=function(e,t){let i=null,o=this.children;for(;!i&&o.length>0;){let n=o.shift();if(i=n.getComponent(e,t),!i)for(let s of n.children)o.push(s)}return i},WL.Object.prototype.pp_getComponentChildren=function(e,t){let i=null,o=this.children;for(let n of o)if(i=n.getComponent(e,t),i)break;return i},WL.Object.prototype.pp_getComponentsHierarchy=function(e){let t=this.getComponents(e),i=this.pp_getComponentsDescendants(e);for(let o of i)t.push(o);return t},WL.Object.prototype.pp_getComponentsDescendants=function(e){let t=[],i=this.children;for(;i.length>0;){let o=i.shift(),n=o.getComponents(e);for(let s of n)t.push(s);for(let s of o.children)i.push(s)}return t},WL.Object.prototype.pp_getComponentsChildren=function(e){let t=[],i=this.children;for(let o of i){let n=o.getComponents(e);for(let s of n)t.push(s)}return t},WL.Object.prototype.pp_setActive=function(e,t=!0){t?this.pp_setActiveHierarchy(e):this.active=e},WL.Object.prototype.pp_setActiveHierarchy=function(e){this.active=e,this.pp_setActiveDescendants(e)},WL.Object.prototype.pp_setActiveDescendants=function(e){let t=this.children;for(;t.length>0;){let i=t.shift();i.active=e;for(let o of i.children)t.push(o)}},WL.Object.prototype.pp_setActiveChildren=function(e){let t=this.children;for(let i of t)i.active=e},WL.Object.prototype.pp_hasUniformScale=function(){return this.pp_hasUniformScaleWorld()},WL.Object.prototype.pp_hasUniformScaleWorld=function(){let e=y.create();return function(){return this.pp_getScaleWorld(e),Math.abs(e[0]-e[1])<this._pp_epsilon&&Math.abs(e[1]-e[2])<this._pp_epsilon&&Math.abs(e[0]-e[2])<this._pp_epsilon}}(),WL.Object.prototype.pp_hasUniformScaleLocal=function(){let e=y.create();return function(){return this.pp_getScaleLocal(e),Math.abs(e[0]-e[1])<this._pp_epsilon&&Math.abs(e[1]-e[2])<this._pp_epsilon&&Math.abs(e[0]-e[2])<this._pp_epsilon}}(),PP.CloneParams=class{constructor(){this.myIgnoreNonCloneable=!1,this.myIgnoreComponents=!1,this.myIgnoreChildren=!1,this.myComponentsToIgnore=[],this.myComponentsToInclude=[],this.myIgnoreComponentCallback=null,this.myChildrenToIgnore=[],this.myChildrenToInclude=[],this.myIgnoreChildCallback=null,this.myDeepCloneParams=new PP.DeepCloneParams,this.myExtraData=new Map}},PP.DeepCloneParams=class{constructor(){this._myDeepCloneObject=!1,this._myOverrideDeepCloneComponentMap=new Map,this._myOverrideDeepCloneComponentVariableMap=new Map}deepCloneObject(t){this._myDeepCloneObject=t}deepCloneComponent(t,i){this._myOverrideDeepCloneComponentMap.set(t,i)}deepCloneComponentVariable(t,i,o){let n=null;this._myOverrideDeepCloneComponentVariableMap.has(t)||this._myOverrideDeepCloneComponentVariableMap.set(t,new Map),n=this._myOverrideDeepCloneComponentVariableMap.get(t),n.set(i,o)}shouldDeepCloneComponent(t){let i=this._myOverrideDeepCloneComponentMap.get(t);return i??this._myDeepCloneObject}shouldDeepCloneComponentVariable(t,i){let o=this._myOverrideDeepCloneComponentVariableMap.get(t);if(o!=null){let n=o.get(i);if(n!=null)return n}return this.shouldDeepCloneComponent(t)}},WL.Object.prototype.pp_clone=function(){let e=y.create(),t=x.create();return function(i=new PP.CloneParams){let o=null;if(this.pp_isCloneable(i)){let n=[];n.push([this.parent,this]);let s=[];for(;n.length>0;){let l=n.shift(),m=l[0],h=l[1],r=WL.scene.addObject(m);if(r.name=h.name,r.pp_setScaleLocal(h.pp_getScaleLocal(e)),r.pp_setTransformLocalQuat(h.pp_getTransformLocalQuat(t)),i.myIgnoreComponents||s.push([h,r]),!i.myIgnoreChildren)for(let u of h.children){let c=!1;i.myChildrenToInclude.length>0?c=i.myChildrenToInclude.find(p=>p.pp_equals(u))!=null:c=i.myChildrenToIgnore.find(p=>p.pp_equals(u))==null,c&&i.myIgnoreChildCallback!=null&&(c=!i.myIgnoreChildCallback(u)),c&&n.push([r,u])}o==null&&(o=r)}let a=[];for(;s.length>0;){let l=s.shift(),m=l[0],h=l[1],r=m.pp_getComponents();for(let u of r)if(u.pp_clone!=null){let c=!1;if(i.myComponentsToInclude.length>0?c=i.myComponentsToInclude.indexOf(u.type)!=-1:c=i.myComponentsToIgnore.indexOf(u.type)==-1,c&&i.myIgnoreComponentCallback!=null&&(c=!i.myIgnoreComponentCallback(u)),c){let p=h.pp_addComponent(u.type);p.active=u.active,a.push([u,p])}}}for(;a.length>0;){let l=a.shift(),m=l[0],h=l[1];m.pp_clone(h,i.myDeepCloneParams,i.myExtraData)}}return o}}(),WL.Object.prototype.pp_isCloneable=function(e=new PP.CloneParams){if(e.myIgnoreNonCloneable||e.myIgnoreComponents)return!0;let t=!0,i=[];for(i.push(this);t&&i.length>0;){let o=i.shift(),n=this.pp_getComponents();for(let s of n){let a=!1;if(e.myComponentsToInclude.length>0?a=e.myComponentsToInclude.indexOf(s.type)!=-1:a=e.myComponentsToIgnore.indexOf(s.type)==-1,a&&e.myIgnoreComponentCallback!=null&&(a=!e.myIgnoreComponentCallback(s)),a&&s.pp_clone==null){t=!1;break}}if(t&&!e.myIgnoreChildren)for(let s of o.children){let a=!1;e.myChildrenToInclude.length>0?a=e.myChildrenToInclude.find(l=>l.pp_equals(s))!=null:a=e.myChildrenToIgnore.find(l=>l.pp_equals(s))==null,a&&e.myIgnoreChildCallback!=null&&(a=!e.myIgnoreChildCallback(s)),a&&i.push(s)}}return t},WL.Object.prototype.pp_getName=function(){return this.name},WL.Object.prototype.pp_setName=function(e){this.name=e},WL.Object.prototype.pp_getID=function(){return this.objectId},WL.Object.prototype.pp_getHierarchy=function(){let e=this.pp_getDescendants();return e.unshift(this),e},WL.Object.prototype.pp_getDescendants=function(){let e=[],t=this.children;for(;t.length>0;){let i=t.shift();e.push(i);for(let o of i.children)t.push(o)}return e},WL.Object.prototype.pp_getChildren=function(){return this.children},WL.Object.prototype.pp_markDirty=function(){return this.setDirty()},WL.Object.prototype.pp_equals=function(e){return this.equals(e)},WL.Object.prototype.pp_destroy=function(){return this.destroy()},WL.Object.prototype.pp_getComponentAmountMap=function(e=new Map){let t=e.get("object");t==null&&(t=0),t+=1,e.set("object",t);let i=this.pp_getComponents();for(let o of i){let n=o.type,s=e.get(n);s==null&&(s=0),s+=1,e.set(n,s)}return e},WL.Object.prototype.pp_getComponentAmountMapHierarchy=function(e=new Map){let t=this.pp_getHierarchy();for(let i of t)i.pp_getComponentAmountMap(e);return e},WL.Object.prototype.pp_getComponentAmountMapDescendants=function(e=new Map){let t=this.pp_getDescendants();for(let i of t)i.pp_getComponentAmountMap(e);return e},WL.Object.prototype.pp_getComponentAmountMapChildren=function(e=new Map){let t=this.children;for(let i of t)i.pp_getComponentAmountMap(e);return e},WL.Object.prototype._pp_epsilon=1e-6,WL.Object.prototype._pp_quaternionToRadians=function(){let e=R.create();return function(t,i=y.create()){return R.fromQuat(e,t),i[1]=Math.asin(-this._pp_clamp(e[2],-1,1)),Math.abs(e[2])<.9999999?(i[0]=Math.atan2(e[5],e[8]),i[2]=Math.atan2(e[1],e[0])):(i[0]=0,i[2]=Math.atan2(-e[3],e[4])),i}}(),WL.Object.prototype._pp_degreesToQuaternion=function(e,t=f.create()){return f.fromEuler(t,e[0],e[1],e[2]),t},WL.Object.prototype._pp_toDegrees=function(e){return e*(180/Math.PI)},WL.Object.prototype._pp_clamp=function(e,t,i){return Math.min(Math.max(e,t),i)};for(let e in WL.Object.prototype){let t=["pp_","_pp_"],i=!1;for(let o of t)if(e.startsWith(o)){i=!0;break}i&&Object.defineProperty(WL.Object.prototype,e,{enumerable:!1})}}});var Nr={};var Ti=w(()=>{yt();Array.prototype.pp_has=function(e){return this.pp_find(e)!=null};Array.prototype.pp_hasEquals=function(e){return this.pp_findEqual(e)!=null};Array.prototype.pp_find=function(e){let t,i=this.findIndex(e);return i>=0&&(t=this[i]),t};Array.prototype.pp_findAll=function(e){return this.filter(e)};Array.prototype.pp_findEqual=function(e){return this.pp_find(t=>t===e)};Array.prototype.pp_findAllEqual=function(e){return this.pp_findAll(t=>t===e)};Array.prototype.pp_removeIndex=function(e){let t;if(e>=0&&e<this.length){let i=this.splice(e,1);i.length==1&&(t=i[0])}return t};Array.prototype.pp_remove=function(e){let t,i=this.findIndex(e);return i>=0&&(t=this.pp_removeIndex(i)),t};Array.prototype.pp_removeAll=function(e){let t=[],i;do i=this.pp_remove(e),i!==void 0&&t.push(i);while(i!==void 0);return t};Array.prototype.pp_removeEqual=function(e){return this.pp_remove(t=>t===e)};Array.prototype.pp_removeAllEqual=function(e){return this.pp_removeAll(t=>t===e)};Array.prototype.pp_pushUnique=function(e,t=null){let i=this.length,o=!1;return t!=null?o=this.pp_has(t):o=this.pp_hasEquals(e),o||(i=this.push(e)),i};Array.prototype.pp_unshiftUnique=function(e,t=null){let i=this.length,o=!1;return t!=null?o=this.pp_has(t):o=this.pp_hasEquals(e),o||(i=this.unshift(e)),i};Array.prototype.pp_copy=function(e){for(;this.length>e.length;)this.pop();for(let t=0;t<e.length;t++)this[t]=e[t];return this};Array.prototype.pp_clone=function(){return this.slice(0)};Array.prototype.pp_equals=function(e,t=null){let i=!0;if(e!=null&&this.length==e.length){for(let o=0;o<this.length;o++)if(t!=null&&!t(this[o],e[o])||t==null&&this[o]!=e[o]){i=!1;break}}else i=!1;return i};Array.prototype.vec_toString=function(e=4){return this._vec_buildConsoleMessage(e)};Array.prototype.vec_log=function(e=4){let t=this._vec_buildConsoleMessage(e);console.log(t)};Array.prototype.vec_error=function(e=4){let t=this._vec_buildConsoleMessage(e);console.error(t)};Array.prototype.vec_warn=function(e=4){let t=this._vec_buildConsoleMessage(e);console.warn(t)};Array.prototype.vec_scale=function(e,t=null){t=this._vec_prepareOut(t);for(let i=0;i<t.length;i++)t[i]=t[i]*e;return t};Array.prototype.vec_round=function(e=null){e=this._vec_prepareOut(e);for(let t=0;t<e.length;t++)e[t]=Math.round(e[t]);return e};Array.prototype.vec_floor=function(e=null){e=this._vec_prepareOut(e);for(let t=0;t<e.length;t++)e[t]=Math.floor(e[t]);return e};Array.prototype.vec_ceil=function(e=null){e=this._vec_prepareOut(e);for(let t=0;t<e.length;t++)e[t]=Math.ceil(e[t]);return e};Array.prototype.vec_clamp=function(e,t,i=null){i=this._vec_prepareOut(i);let o=e??Number.MIN_VALUE,n=t??Number.MAX_VALUE,s=Math.min(o,n),a=Math.max(o,n);for(let l=0;l<i.length;l++)i[l]=Math.min(Math.max(i[l],s),a);return i};Array.prototype.vec_equals=function(e){let t=this.length==e.length;for(let i=0;i<this.length&&t;i++)t&=Math.abs(this[i]-e[i])<this._pp_epsilon;return t};Array.prototype.vec3_normalize=function(e=y.create()){return y.normalize(e,this),e};Array.prototype.vec3_copy=function(e){return y.copy(this,e),this};Array.prototype.vec3_clone=function(e=y.create()){return y.copy(e,this),e};Array.prototype.vec3_set=function(e,t=null,i=null){return t==null?y.set(this,e,e,e):y.set(this,e,t,i),this};Array.prototype.vec3_zero=function(){return y.zero(this),this};Array.prototype.vec3_angle=function(e){return this.vec3_angleDegrees(e)};Array.prototype.vec3_angleDegrees=function(e){return this.vec3_angleRadians(e)*(180/Math.PI)};Array.prototype.vec3_angleRadians=function(e){return y.angle(this,e)};Array.prototype.vec3_length=function(){return y.length(this)};Array.prototype.vec3_distance=function(e){return y.dist(this,e)};Array.prototype.vec3_add=function(e,t=y.create()){return y.add(t,this,e),t};Array.prototype.vec3_sub=function(e,t=y.create()){return y.sub(t,this,e),t};Array.prototype.vec3_mul=function(e,t=y.create()){return y.mul(t,this,e),t};Array.prototype.vec3_div=function(e,t=y.create()){return y.div(t,this,e),t};Array.prototype.vec3_scale=function(e,t=y.create()){return y.scale(t,this,e),t};Array.prototype.vec3_negate=function(e=y.create()){return y.negate(e,this),e};Array.prototype.vec3_cross=function(e,t=y.create()){return y.cross(t,this,e),t};Array.prototype.vec3_transformQuat=function(e,t=y.create()){return y.transformQuat(t,this,e),t};Array.prototype.vec3_angleSigned=function(e,t){return this.vec3_angleSignedDegrees(e,t)};Array.prototype.vec3_angleSignedDegrees=function(e,t){return this.vec3_angleSignedRadians(e,t)*(180/Math.PI)};Array.prototype.vec3_angleSignedRadians=function(){let e=y.create();return function(t,i){this.vec3_cross(t,e);let o=this.vec3_angleRadians(t);return e.vec3_isConcordant(i)||(o=-o),o}}();Array.prototype.vec3_toRadians=function(e=y.create()){return y.set(e,F.toRadian(this[0]),F.toRadian(this[1]),F.toRadian(this[2])),e};Array.prototype.vec3_toDegrees=function(e=y.create()){return y.set(e,this[0]*(180/Math.PI),this[1]*(180/Math.PI),this[2]*(180/Math.PI)),e};Array.prototype.vec3_toQuat=function(e){return this.vec3_degreesToQuat(e)};Array.prototype.vec3_radiansToQuat=function(e=f.create()){return e.quat_fromRadians(this),e};Array.prototype.vec3_degreesToQuat=function(e=f.create()){return e.quat_fromDegrees(this),e};Array.prototype.vec3_isNormalized=function(){return Math.abs(y.length(this)-1)<this._pp_epsilon};Array.prototype.vec3_componentAlongAxis=function(e,t=y.create()){let i=y.angle(this,e),o=Math.cos(i)*y.length(this);return y.copy(t,e),y.scale(t,t,o),t};Array.prototype.vec3_removeComponentAlongAxis=function(){let e=y.create();return function(t,i=y.create()){return this.vec3_componentAlongAxis(t,e),y.sub(i,this,e),i}}();Array.prototype.vec3_isConcordant=function(e){return y.angle(this,e)<=Math.PI/2};Array.prototype.vec3_rotate=function(e,t){return this.vec3_rotateDegrees(e,t)};Array.prototype.vec3_rotateDegrees=function(){let e=y.create();return function(t,i){return this.vec3_rotateAroundDegrees(t,e,i)}}();Array.prototype.vec3_rotateRadians=function(){let e=y.create();return function(t,i){return this.vec3_rotateAroundRadians(t,e,i)}}();Array.prototype.vec3_rotateQuat=function(){let e=y.create();return function(t,i){return this.vec3_rotateAroundQuat(t,e,i)}}();Array.prototype.vec3_rotateAxis=function(e,t,i){return this.vec3_rotateAxisDegrees(e,t,i)};Array.prototype.vec3_rotateAxisDegrees=function(){let e=y.create();return function(t,i,o){return this.vec3_rotateAroundAxisDegrees(t,i,e,o)}}();Array.prototype.vec3_rotateAxisRadians=function(){let e=y.create();return function(t,i,o){return this.vec3_rotateAroundAxisRadians(t,i,e,o)}}();Array.prototype.vec3_rotateAround=function(e,t,i){return this.vec3_rotateAroundDegrees(e,t,i)};Array.prototype.vec3_rotateAroundDegrees=function(){let e=f.create();return function(t,i,o=y.create()){return t.vec3_degreesToQuat(e),this.vec3_rotateAroundQuat(e,i,o)}}();Array.prototype.vec3_rotateAroundRadians=function(){let e=f.create();return function(t,i,o=y.create()){return t.vec3_radiansToQuat(e),this.vec3_rotateAroundQuat(e,i,o)}}();Array.prototype.vec3_rotateAroundQuat=function(e,t,i=y.create()){return y.sub(i,this,t),y.transformQuat(i,i,e),y.add(i,i,t),i};Array.prototype.vec3_rotateAroundAxis=function(e,t,i,o){return this.vec3_rotateAroundAxisDegrees(e,t,i,o)};Array.prototype.vec3_rotateAroundAxisDegrees=function(e,t,i,o){return this.vec3_rotateAroundAxisRadians(F.toRadian(e),t,i,o)};Array.prototype.vec3_rotateAroundAxisRadians=function(){let e=f.create();return function(t,i,o,n=y.create()){return f.setAxisAngle(e,i,t),this.vec3_rotateAroundQuat(e,o,n)}}();Array.prototype.vec3_convertPositionToWorld=function(e,t){return this.vec3_convertPositionToWorldMatrix(e,t)};Array.prototype.vec3_convertPositionToLocal=function(e,t){return this.vec3_convertPositionToLocalMatrix(e,t)};Array.prototype.vec3_convertPositionToWorldMatrix=function(e,t=y.create()){return y.transformMat4(t,this,e),t};Array.prototype.vec3_convertPositionToLocalMatrix=function(){let e=P.create();return function(t,i=y.create()){return P.invert(e,t),y.transformMat4(i,this,e),i}}();Array.prototype.vec3_convertPositionToWorldQuat=function(){let e=P.create(),t=y.create(),i=f.create(),o=y.create();return y.set(o,1,1,1),function(n,s=y.create()){return n.quat2_getPosition(t),n.quat2_getRotationQuat(i),e.mat4_setPositionRotationQuatScale(t,i,o),this.vec3_convertPositionToWorldMatrix(e,s)}}();Array.prototype.vec3_convertPositionToLocalQuat=function(){let e=P.create(),t=y.create(),i=f.create(),o=y.create();return y.set(o,1,1,1),function(n,s=y.create()){return n.quat2_getPosition(t),n.quat2_getRotationQuat(i),e.mat4_setPositionRotationQuatScale(t,i,o),this.vec3_convertPositionToLocalMatrix(e,s)}}();Array.prototype.vec3_convertDirectionToWorld=function(e,t){return this.vec3_convertDirectionToWorldMatrix(e,t)};Array.prototype.vec3_convertDirectionToLocal=function(e,t){return this.vec3_convertDirectionToLocalMatrix(e,t)};Array.prototype.vec3_convertDirectionToWorldMatrix=function(){let e=f.create();return function(t,i=y.create()){return t.mat4_getRotationQuat(e),y.transformQuat(i,this,e),i}}();Array.prototype.vec3_convertDirectionToLocalMatrix=function(){let e=f.create();return function(t,i=y.create()){return t.mat4_getRotationQuat(e),f.conjugate(e,e),y.transformQuat(i,this,e),i}}();Array.prototype.vec3_convertDirectionToWorldQuat=function(){let e=f.create();return function(t,i=y.create()){return t.quat2_getRotationQuat(e),y.transformQuat(i,this,e),i}}();Array.prototype.vec3_convertDirectionToLocalQuat=function(){let e=f.create();return function(t,i=y.create()){return t.quat2_getRotationQuat(e),f.conjugate(e,e),y.transformQuat(i,this,e),i}}();Array.prototype.vec3_log=function(e=4){this.vec_log(e)};Array.prototype.vec3_error=function(e=4){this.vec_error(e)};Array.prototype.vec3_warn=function(e=4){this.vec_warn(e)};Array.prototype.vec3_addRotation=function(e,t){return this.vec3_degreesAddRotation(e,t)};Array.prototype.vec3_addRotationDegrees=function(e,t){return quat.vec3_degreesAddRotationDegrees(e,t)};Array.prototype.vec3_addRotationRadians=function(e,t){return quat.vec3_degreesAddRotationRadians(e,t)};Array.prototype.vec3_addRotationQuat=function(e,t){return quat.vec3_degreesAddRotationQuat(e,t)};Array.prototype.vec3_degreesAddRotation=function(e,t){return this.vec3_degreesAddRotationDegrees(e,t)};Array.prototype.vec3_degreesAddRotationDegrees=function(){let e=f.create();return function(t,i=y.create()){return this.vec3_degreesToQuat(e),e.quat_addRotationDegrees(t,e).quat_toDegrees(i)}}();Array.prototype.vec3_degreesAddRotationRadians=function(){let e=f.create();return function(t,i=y.create()){return this.vec3_degreesToQuat(e),e.quat_addRotationRadians(t,e).quat_toDegrees(i)}}();Array.prototype.vec3_degreesAddRotationQuat=function(){let e=f.create();return function(t,i=y.create()){return this.vec3_degreesToQuat(e),e.quat_addRotationQuat(t,e).quat_toDegrees(i)}}();Array.prototype.vec3_radiansAddRotation=function(e,t){return this.vec3_radiansAddRotationDegrees(e,t)};Array.prototype.vec3_radiansAddRotationDegrees=function(){let e=f.create();return function(t,i=y.create()){return this.vec3_radiansToQuat(e),e.quat_addRotationDegrees(t,e).quat_toRadians(i)}}();Array.prototype.vec3_radiansAddRotationRadians=function(){let e=f.create();return function(t,i=y.create()){return this.vec3_radiansToQuat(e),e.quat_addRotationRadians(t,e).quat_toRadians(i)}}();Array.prototype.vec3_radiansAddRotationQuat=function(){let e=f.create();return function(t,i=y.create()){return this.vec3_radiansToQuat(e),e.quat_addRotationQuat(t,e).quat_toRadians(i)}}();Array.prototype.vec3_toMatrix=function(e=R.create()){return this.vec3_degreesToMatrix(e)};Array.prototype.vec3_degreesToMatrix=function(){let e=f.create();return function(t=R.create()){return this.vec3_degreesToQuat(e),e.quat_toMatrix(t)}}();Array.prototype.vec3_radiansToMatrix=function(){let e=f.create();return function(t=R.create()){return this.vec3_radiansToQuat(e),e.quat_toMatrix(t)}}();Array.prototype.vec4_set=function(e,t=null,i=null,o=null){return t==null?N.set(this,e,e,e,e):N.set(this,e,t,i,o),this};Array.prototype.vec4_copy=function(e){return N.copy(this,e),this};Array.prototype.quat_normalize=function(e=f.create()){return f.normalize(e,this),e};Array.prototype.quat_copy=function(e){return f.copy(this,e),this};Array.prototype.quat_set=function(e,t=null,i=null,o=null){return t==null?f.set(this,e,e,e,e):f.set(this,e,t,i,o),this};Array.prototype.quat_identity=function(){return f.identity(this),this};Array.prototype.quat_length=function(){return f.length(this)};Array.prototype.quat_invert=function(e=f.create()){return f.invert(e,this),e};Array.prototype.quat_mul=function(e,t=f.create()){return f.mul(t,this,e),t};Array.prototype.quat_getAxis=function(e=y.create()){return f.getAxisAngle(e,this),e};Array.prototype.quat_getAngle=function(){let e=y.create();return function(){return f.getAxisAngle(e,this)}}();Array.prototype.quat_getAxes=function(){let e=R.create();return function(t=[y.create(),y.create(),y.create()]){return R.fromQuat(e,this),y.set(t[0],e[0],e[1],e[2]),y.set(t[1],e[3],e[4],e[5]),y.set(t[2],e[6],e[7],e[8]),y.normalize(t[0],t[0]),y.normalize(t[1],t[1]),y.normalize(t[2],t[2]),t}}();Array.prototype.quat_fromAxis=function(e,t){return this.quat_fromAxisDegrees(e,t)};Array.prototype.quat_fromAxisDegrees=function(e,t){return f.setAxisAngle(this,t,F.toRadian(e)),this};Array.prototype.quat_fromAxisRadians=function(e,t){return f.setAxisAngle(this,t,e),this};Array.prototype.quat_fromRadians=function(){let e=y.create();return function(t){return t.vec3_toDegrees(e),this.quat_fromDegrees(e)}}();Array.prototype.quat_fromDegrees=function(e){return f.fromEuler(this,e[0],e[1],e[2]),this};Array.prototype.quat_toRadians=function(){let e=R.create();return function(t=y.create()){return R.fromQuat(e,this),t[1]=Math.asin(-this._pp_clamp(e[2],-1,1)),Math.abs(e[2])<1-this._pp_epsilon?(t[0]=Math.atan2(e[5],e[8]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[3],e[4])),t}}();Array.prototype.quat_toDegrees=function(e=y.create()){return this.quat_toRadians(e),e.vec3_toDegrees(e),e};Array.prototype.quat_isNormalized=function(){return Math.abs(f.length(this)-1)<this._pp_epsilon};Array.prototype.quat_addRotation=function(e,t){return this.quat_addRotationDegrees(e,t)};Array.prototype.quat_addRotationDegrees=function(){let e=f.create();return function(t,i){return t.vec3_degreesToQuat(e),this.quat_addRotationQuat(e,i)}}();Array.prototype.quat_addRotationRadians=function(){let e=f.create();return function(t,i){return t.vec3_radiansToQuat(e),this.quat_addRotationQuat(e,i)}}();Array.prototype.quat_addRotationQuat=function(e,t=f.create()){return e.quat_mul(this,t),t};Array.prototype.quat_subRotation=function(e,t){return this.quat_subRotationDegrees(e,t)};Array.prototype.quat_subRotationDegrees=function(){let e=f.create();return function(t,i){return t.vec3_degreesToQuat(e),this.quat_subRotationQuat(e,i)}}();Array.prototype.quat_subRotationRadians=function(){let e=f.create();return function(t,i){return t.vec3_radiansToQuat(e),this.quat_subRotationQuat(e,i)}}();Array.prototype.quat_subRotationQuat=function(){let e=f.create();return function(t,i=f.create()){return t.quat_invert(e),this.quat_mul(e,i),i}}();Array.prototype.quat_rotationTo=function(e,t){return this.quat_rotationToDegrees(e,t)};Array.prototype.quat_rotationToDegrees=function(e,t){return e.quat_subRotationDegrees(this,t)};Array.prototype.quat_rotationToRadians=function(e,t){return e.quat_subRotationRadians(this,t)};Array.prototype.quat_rotationToQuat=function(e,t){return e.quat_subRotationQuat(this,t)};Array.prototype.quat_toMatrix=function(e=R.create()){return R.fromQuat(e,this),e};Array.prototype.quat_rotate=function(e,t){return this.quat_rotateDegrees(e,t)};Array.prototype.quat_rotateDegrees=function(e,t){return this.quat_addRotationDegrees(e,t)};Array.prototype.quat_rotateRadians=function(e,t){return this.quat_addRotationRadians(e,t)};Array.prototype.quat_rotateQuat=function(e,t){return this.quat_addRotationQuat(e,t)};Array.prototype.quat_rotateAxis=function(e,t,i){return this.quat_rotateAxisDegrees(e,t,i)};Array.prototype.quat_rotateAxisDegrees=function(){let e=f.create();return function(t,i,o){return e.quat_fromAxisDegrees(t,i),this.quat_rotateQuat(e,o)}}();Array.prototype.quat_rotateAxisRadians=function(){let e=f.create();return function(t,i,o){return e.quat_fromAxisRadians(t,i),this.quat_rotateQuat(e,o)}}();Array.prototype.quat2_normalize=function(e=x.create()){return x.normalize(e,this),e};Array.prototype.quat2_copy=function(e){return x.copy(this,e),this};Array.prototype.quat2_identity=function(){return x.identity(this),this};Array.prototype.quat2_getPosition=function(e=y.create()){return x.getTranslation(e,this),this};Array.prototype.quat2_getRotation=function(e){return this.quat2_getRotationDegrees(e)};Array.prototype.quat2_getRotationDegrees=function(){let e=f.create();return function(t=y.create()){return this.quat2_getRotationQuat(e).quat_toDegrees(t),t}}();Array.prototype.quat2_getRotationRadians=function(){let e=f.create();return function(t=y.create()){return this.quat2_getRotationQuat(e).quat_toRadians(t),t}}();Array.prototype.quat2_getRotationQuat=function(e=f.create()){return f.copy(e,this),this};Array.prototype.quat2_setPositionRotation=function(e,t){return this.quat2_setPositionRotationDegrees(e,t)};Array.prototype.quat2_setPositionRotationDegrees=function(){let e=f.create();return function(t,i){return i.vec3_degreesToQuat(e),x.fromRotationTranslation(this,e,t),this}}();Array.prototype.quat2_setPositionRotationRadians=function(){let e=f.create();return function(t,i){return i.vec3_radiansToQuat(e),x.fromRotationTranslation(this,e,t),this}}();Array.prototype.quat2_setPositionRotationQuat=function(e,t){return x.fromRotationTranslation(this,t,e),this};Array.prototype.quat2_getAxes=function(){let e=R.create();return function(t=[y.create(),y.create(),y.create()]){return R.fromQuat(e,this),y.set(t[0],e[0],e[1],e[2]),y.set(t[1],e[3],e[4],e[5]),y.set(t[2],e[6],e[7],e[8]),y.normalize(t[0],t[0]),y.normalize(t[1],t[1]),y.normalize(t[2],t[2]),t}}();Array.prototype.quat2_toLocal=function(){let e=x.create();return function(t,i=x.create()){return x.conjugate(e,t),x.mul(i,e,this),i}}();Array.prototype.quat2_toWorld=function(e,t=x.create()){return x.mul(t,e,this),t};Array.prototype.quat2_toMatrix=function(e=P.create()){return P.fromQuat2(e,this),e};Array.prototype.quat2_fromMatrix=function(e){return e.mat4_toQuat(this),this};Array.prototype.mat3_toDegrees=function(){let e=f.create();return function(t=y.create()){return this.mat3_toQuat(e),e.quat_toDegrees(t),t}}();Array.prototype.mat3_toRadians=function(){let e=f.create();return function(t=y.create()){return this.mat3_toQuat(e),e.quat_toRadians(t),t}}();Array.prototype.mat3_toQuat=function(e=f.create()){return f.fromMat3(e,this),e};Array.prototype.mat4_copy=function(e){return P.copy(this,e),this};Array.prototype.mat4_identity=function(){return P.identity(this),this};Array.prototype.mat4_invert=function(e=P.create()){return P.invert(e,this),e};Array.prototype.mat4_clone=function(e=P.create()){return P.copy(e,this),e};Array.prototype.mat4_getPosition=function(e=y.create()){return P.getTranslation(e,this),e};Array.prototype.mat4_getRotation=function(e=y.create()){return this.mat4_getRotationDegrees(e)};Array.prototype.mat4_getRotationDegrees=function(){let e=f.create();return function(t=y.create()){return this.mat4_getRotationQuat(e),e.quat_toDegrees(t),t}}();Array.prototype.mat4_getRotationRadians=function(){let e=f.create();return function(t=y.create()){return this.mat4_getRotationQuat(e),e.quat_toRadians(t),t}}();Array.prototype.mat4_getRotationQuat=function(){let e=y.create(),t=P.create(),i=y.create(),o=y.create();return y.set(o,1,1,1),function(n=f.create()){return P.getScaling(e,this),y.divide(i,o,e),P.scale(t,this,i),P.getRotation(n,t),f.normalize(n,n),n}}();Array.prototype.mat4_getScale=function(e=y.create()){return P.getScaling(e,this),e};Array.prototype.mat4_setPosition=function(e){return this[12]=e[0],this[13]=e[1],this[14]=e[2],this};Array.prototype.mat4_setRotation=function(e){return this.mat4_setRotationDegrees(e),this};Array.prototype.mat4_setRotationDegrees=function(){let e=f.create();return function(t){return this.mat4_setRotationQuat(t.vec3_degreesToQuat(e)),this}}();Array.prototype.mat4_setRotationRadians=function(){let e=y.create();return function(t){return this.mat4_setRotationDegrees(t.vec3_toDegrees(e)),this}}();Array.prototype.mat4_setRotationQuat=function(){let e=y.create(),t=y.create();return function(i){return this.mat4_getPosition(e),this.mat4_getScale(t),this.mat4_setPositionRotationQuatScale(e,i,t),this}}();Array.prototype.mat4_setScale=function(){let e=y.create();return function(t){return P.getScaling(e,this),y.divide(e,t,e),P.scale(this,this,e),this}}();Array.prototype.mat4_setPositionRotationScale=function(e,t,i){return this.mat4_setPositionRotationDegreesScale(e,t,i),this};Array.prototype.mat4_setPositionRotationDegreesScale=function(){let e=f.create();return function(t,i,o){return this.mat4_setPositionRotationQuatScale(t,i.vec3_degreesToQuat(e),o),this}}();Array.prototype.mat4_setPositionRotationRadiansScale=function(){let e=y.create();return function(t,i,o){return this.mat4_setPositionRotationDegreesScale(t,i.vec3_toDegrees(e),o),this}}();Array.prototype.mat4_setPositionRotationQuatScale=function(e,t,i){return P.fromRotationTranslationScale(this,t,e,i),this};Array.prototype.mat4_setPositionRotation=function(e,t){return this.mat4_setPositionRotationDegrees(e,t),this};Array.prototype.mat4_setPositionRotationDegrees=function(){let e=f.create();return function(t,i){return this.mat4_setPositionRotationQuat(t,i.vec3_degreesToQuat(e)),this}}();Array.prototype.mat4_setPositionRotationRadians=function(){let e=y.create();return function(t,i){return this.mat4_setPositionRotationDegrees(t,i.vec3_toDegrees(e)),this}}();Array.prototype.mat4_setPositionRotationQuat=function(e,t){return P.fromRotationTranslation(this,t,e),this};Array.prototype.mat4_getAxes=function(e=[y.create(),y.create(),y.create()]){return y.set(e[0],this[0],this[1],this[2]),y.set(e[1],this[4],this[5],this[6]),y.set(e[2],this[8],this[9],this[10]),y.normalize(e[0],e[0]),y.normalize(e[1],e[1]),y.normalize(e[2],e[2]),e};Array.prototype.mat4_toWorld=function(){let e=P.create(),t=y.create(),i=y.create(),o=y.create(),n=y.create();return y.set(n,1,1,1),function(s,a=P.create()){return s.mat4_hasUniformScale()?P.mul(a,s,this):(y.set(t,this[12],this[13],this[14]),t.vec3_convertPositionToWorldMatrix(s,t),P.getScaling(i,s),y.divide(o,n,i),P.scale(e,s,o),P.mul(a,e,this),P.scale(a,a,i),a[12]=t[0],a[13]=t[1],a[14]=t[2],a[15]=1),a}}();Array.prototype.mat4_toLocal=function(){let e=P.create(),t=y.create(),i=y.create(),o=y.create(),n=y.create();return y.set(n,1,1,1),function(s,a=P.create()){return s.mat4_hasUniformScale()?(P.invert(e,s),P.mul(a,e,this)):(y.set(t,this[12],this[13],this[14]),t.vec3_convertPositionToLocalMatrix(s,t),P.getScaling(i,s),y.divide(o,n,i),P.scale(e,s,o),P.invert(e,e),P.mul(a,e,this),P.scale(a,a,o),a[12]=t[0],a[13]=t[1],a[14]=t[2],a[15]=1),a}}();Array.prototype.mat4_hasUniformScale=function(){let e=y.create();return function(){return P.getScaling(e,this),Math.abs(e[0]-e[1])<this._pp_epsilon&&Math.abs(e[1]-e[2])<this._pp_epsilon&&Math.abs(e[0]-e[2])<this._pp_epsilon}}();Array.prototype.mat4_toQuat=function(){let e=y.create(),t=f.create();return function(i=x.create()){return P.getTranslation(e,this),this.mat4_getRotationQuat(t),x.fromRotationTranslation(i,t,e),i}}();Array.prototype.mat4_fromQuat=function(e){return e.quat2_toMatrix(this),this};PP.vec3_create=function(e=null,t=null,i=null){let o=y.create();return e!=null&&o.vec3_set(e,t,i),o};PP.vec4_create=function(e=null,t=null,i=null,o=null){let n=N.create();return e!=null&&n.vec4_set(e,t,i,o),n};PP.quat_create=function(e=null,t=null,i=null,o=null){let n=f.create();return e!=null&&n.quat_set(e,t,i,o),n};PP.quat2_create=function(){return x.create()};PP.quat2_fromPositionRotation=function(e,t){return quat2_fromPositionRotationDegrees(e,t)};PP.quat2_fromPositionRotationDegrees=function(e,t){let i=P.create();return i.quat2_setPositionRotationDegrees(e,t),i};PP.quat2_fromPositionRotationRadians=function(e,t){let i=P.create();return i.quat2_setPositionRotationRadians(e,t),i};PP.quat2_fromPositionRotationQuat=function(e,t){let i=x.create();return i.quat2_setPositionRotationQuat(e,t),i};PP.mat4_create=function(){return P.create()};PP.mat4_fromPositionRotation=function(e,t){return mat4_fromPositionRotationDegrees(e,t)};PP.mat4_fromPositionRotationDegrees=function(e,t){let i=P.create();return i.mat4_setPositionRotationDegrees(e,t),i};PP.mat4_fromPositionRotationRadians=function(e,t){let i=P.create();return i.mat4_setPositionRotationRadians(e,t),i};PP.mat4_fromPositionRotationQuat=function(e,t){let i=P.create();return i.mat4_setPositionRotationQuat(e,t),i};PP.mat4_fromPositionRotationScale=function(e,t,i){return mat4_fromPositionRotationDegreesScale(e,t,i)};PP.mat4_fromPositionRotationDegreesScale=function(e,t,i){let o=P.create();return o.mat4_setPositionRotationDegreesScale(e,t,i),o};PP.mat4_fromPositionRotationRadiansScale=function(e,t,i){let o=P.create();return o.mat4_setPositionRotationRadiansScale(e,t,i),o};PP.mat4_fromPositionRotationQuatScale=function(e,t,i){let o=P.create();return o.mat4_setPositionRotationQuatScale(e,t,i),o};Array.prototype._pp_epsilon=1e-6;Array.prototype._pp_clamp=function(e,t,i){return Math.min(Math.max(e,t),i)};Array.prototype._vec_buildConsoleMessage=function(e){let t="[";for(let i=0;i<this.length;i++)i!=0&&(t=t.concat(", ")),t=t.concat(this[i].toFixed(e));return t=t.concat("]"),t};Array.prototype._vec_prepareOut=function(e){return e==null?e=this.pp_clone():e!=this&&e.pp_copy(this),e};for(let e in Array.prototype){let t=["pp_","vec_","vec3_","vec4_","quat_","quat2_","mat3_","mat4_","_pp_","_vec_"],i=!1;for(let o of t)if(e.startsWith(o)){i=!0;break}i&&Object.defineProperty(Array.prototype,e,{enumerable:!1})}});var Hr={};var Si=w(()=>{yt();Float32Array.prototype.pp_has=function(e){return this.pp_find(e)!=null};Float32Array.prototype.pp_hasEquals=function(e){return this.pp_findEqual(e)!=null};Float32Array.prototype.pp_find=function(e){let t,i=this.findIndex(e);return i>=0&&(t=this[i]),t};Float32Array.prototype.pp_findAll=function(e){return this.filter(e)};Float32Array.prototype.pp_findEqual=function(e){return this.pp_find(t=>t===e)};Float32Array.prototype.pp_findAllEqual=function(e){return this.pp_findAll(t=>t===e)};Float32Array.prototype.pp_removeIndex=function(e){let t;if(e>=0&&e<this.length){let i=this.splice(e,1);i.length==1&&(t=i[0])}return t};Float32Array.prototype.pp_remove=function(e){let t,i=this.findIndex(e);return i>=0&&(t=this.pp_removeIndex(i)),t};Float32Array.prototype.pp_removeAll=function(e){let t=[],i;do i=this.pp_remove(e),i!==void 0&&t.push(i);while(i!==void 0);return t};Float32Array.prototype.pp_removeEqual=function(e){return this.pp_remove(t=>t===e)};Float32Array.prototype.pp_removeAllEqual=function(e){return this.pp_removeAll(t=>t===e)};Float32Array.prototype.pp_pushUnique=function(e,t=null){let i=this.length,o=!1;return t!=null?o=this.pp_has(t):o=this.pp_hasEquals(e),o||(i=this.push(e)),i};Float32Array.prototype.pp_unshiftUnique=function(e,t=null){let i=this.length,o=!1;return t!=null?o=this.pp_has(t):o=this.pp_hasEquals(e),o||(i=this.unshift(e)),i};Float32Array.prototype.pp_copy=function(e){for(;this.length>e.length;)this.pop();for(let t=0;t<e.length;t++)this[t]=e[t];return this};Float32Array.prototype.pp_clone=function(){return this.slice(0)};Float32Array.prototype.pp_equals=function(e,t=null){let i=!0;if(e!=null&&this.length==e.length){for(let o=0;o<this.length;o++)if(t!=null&&!t(this[o],e[o])||t==null&&this[o]!=e[o]){i=!1;break}}else i=!1;return i};Float32Array.prototype.vec_toString=function(e=4){return this._vec_buildConsoleMessage(e)};Float32Array.prototype.vec_log=function(e=4){let t=this._vec_buildConsoleMessage(e);console.log(t)};Float32Array.prototype.vec_error=function(e=4){let t=this._vec_buildConsoleMessage(e);console.error(t)};Float32Array.prototype.vec_warn=function(e=4){let t=this._vec_buildConsoleMessage(e);console.warn(t)};Float32Array.prototype.vec_scale=function(e,t=null){t=this._vec_prepareOut(t);for(let i=0;i<t.length;i++)t[i]=t[i]*e;return t};Float32Array.prototype.vec_round=function(e=null){e=this._vec_prepareOut(e);for(let t=0;t<e.length;t++)e[t]=Math.round(e[t]);return e};Float32Array.prototype.vec_floor=function(e=null){e=this._vec_prepareOut(e);for(let t=0;t<e.length;t++)e[t]=Math.floor(e[t]);return e};Float32Array.prototype.vec_ceil=function(e=null){e=this._vec_prepareOut(e);for(let t=0;t<e.length;t++)e[t]=Math.ceil(e[t]);return e};Float32Array.prototype.vec_clamp=function(e,t,i=null){i=this._vec_prepareOut(i);let o=e??Number.MIN_VALUE,n=t??Number.MAX_VALUE,s=Math.min(o,n),a=Math.max(o,n);for(let l=0;l<i.length;l++)i[l]=Math.min(Math.max(i[l],s),a);return i};Float32Array.prototype.vec_equals=function(e){let t=this.length==e.length;for(let i=0;i<this.length&&t;i++)t&=Math.abs(this[i]-e[i])<this._pp_epsilon;return t};Float32Array.prototype.vec3_normalize=function(e=y.create()){return y.normalize(e,this),e};Float32Array.prototype.vec3_copy=function(e){return y.copy(this,e),this};Float32Array.prototype.vec3_clone=function(e=y.create()){return y.copy(e,this),e};Float32Array.prototype.vec3_set=function(e,t=null,i=null){return t==null?y.set(this,e,e,e):y.set(this,e,t,i),this};Float32Array.prototype.vec3_zero=function(){return y.zero(this),this};Float32Array.prototype.vec3_angle=function(e){return this.vec3_angleDegrees(e)};Float32Array.prototype.vec3_angleDegrees=function(e){return this.vec3_angleRadians(e)*(180/Math.PI)};Float32Array.prototype.vec3_angleRadians=function(e){return y.angle(this,e)};Float32Array.prototype.vec3_length=function(){return y.length(this)};Float32Array.prototype.vec3_distance=function(e){return y.dist(this,e)};Float32Array.prototype.vec3_add=function(e,t=y.create()){return y.add(t,this,e),t};Float32Array.prototype.vec3_sub=function(e,t=y.create()){return y.sub(t,this,e),t};Float32Array.prototype.vec3_mul=function(e,t=y.create()){return y.mul(t,this,e),t};Float32Array.prototype.vec3_div=function(e,t=y.create()){return y.div(t,this,e),t};Float32Array.prototype.vec3_scale=function(e,t=y.create()){return y.scale(t,this,e),t};Float32Array.prototype.vec3_negate=function(e=y.create()){return y.negate(e,this),e};Float32Array.prototype.vec3_cross=function(e,t=y.create()){return y.cross(t,this,e),t};Float32Array.prototype.vec3_transformQuat=function(e,t=y.create()){return y.transformQuat(t,this,e),t};Float32Array.prototype.vec3_angleSigned=function(e,t){return this.vec3_angleSignedDegrees(e,t)};Float32Array.prototype.vec3_angleSignedDegrees=function(e,t){return this.vec3_angleSignedRadians(e,t)*(180/Math.PI)};Float32Array.prototype.vec3_angleSignedRadians=function(){let e=y.create();return function(t,i){this.vec3_cross(t,e);let o=this.vec3_angleRadians(t);return e.vec3_isConcordant(i)||(o=-o),o}}();Float32Array.prototype.vec3_toRadians=function(e=y.create()){return y.set(e,F.toRadian(this[0]),F.toRadian(this[1]),F.toRadian(this[2])),e};Float32Array.prototype.vec3_toDegrees=function(e=y.create()){return y.set(e,this[0]*(180/Math.PI),this[1]*(180/Math.PI),this[2]*(180/Math.PI)),e};Float32Array.prototype.vec3_toQuat=function(e){return this.vec3_degreesToQuat(e)};Float32Array.prototype.vec3_radiansToQuat=function(e=f.create()){return e.quat_fromRadians(this),e};Float32Array.prototype.vec3_degreesToQuat=function(e=f.create()){return e.quat_fromDegrees(this),e};Float32Array.prototype.vec3_isNormalized=function(){return Math.abs(y.length(this)-1)<this._pp_epsilon};Float32Array.prototype.vec3_componentAlongAxis=function(e,t=y.create()){let i=y.angle(this,e),o=Math.cos(i)*y.length(this);return y.copy(t,e),y.scale(t,t,o),t};Float32Array.prototype.vec3_removeComponentAlongAxis=function(){let e=y.create();return function(t,i=y.create()){return this.vec3_componentAlongAxis(t,e),y.sub(i,this,e),i}}();Float32Array.prototype.vec3_isConcordant=function(e){return y.angle(this,e)<=Math.PI/2};Float32Array.prototype.vec3_rotate=function(e,t){return this.vec3_rotateDegrees(e,t)};Float32Array.prototype.vec3_rotateDegrees=function(){let e=y.create();return function(t,i){return this.vec3_rotateAroundDegrees(t,e,i)}}();Float32Array.prototype.vec3_rotateRadians=function(){let e=y.create();return function(t,i){return this.vec3_rotateAroundRadians(t,e,i)}}();Float32Array.prototype.vec3_rotateQuat=function(){let e=y.create();return function(t,i){return this.vec3_rotateAroundQuat(t,e,i)}}();Float32Array.prototype.vec3_rotateAxis=function(e,t,i){return this.vec3_rotateAxisDegrees(e,t,i)};Float32Array.prototype.vec3_rotateAxisDegrees=function(){let e=y.create();return function(t,i,o){return this.vec3_rotateAroundAxisDegrees(t,i,e,o)}}();Float32Array.prototype.vec3_rotateAxisRadians=function(){let e=y.create();return function(t,i,o){return this.vec3_rotateAroundAxisRadians(t,i,e,o)}}();Float32Array.prototype.vec3_rotateAround=function(e,t,i){return this.vec3_rotateAroundDegrees(e,t,i)};Float32Array.prototype.vec3_rotateAroundDegrees=function(){let e=f.create();return function(t,i,o=y.create()){return t.vec3_degreesToQuat(e),this.vec3_rotateAroundQuat(e,i,o)}}();Float32Array.prototype.vec3_rotateAroundRadians=function(){let e=f.create();return function(t,i,o=y.create()){return t.vec3_radiansToQuat(e),this.vec3_rotateAroundQuat(e,i,o)}}();Float32Array.prototype.vec3_rotateAroundQuat=function(e,t,i=y.create()){return y.sub(i,this,t),y.transformQuat(i,i,e),y.add(i,i,t),i};Float32Array.prototype.vec3_rotateAroundAxis=function(e,t,i,o){return this.vec3_rotateAroundAxisDegrees(e,t,i,o)};Float32Array.prototype.vec3_rotateAroundAxisDegrees=function(e,t,i,o){return this.vec3_rotateAroundAxisRadians(F.toRadian(e),t,i,o)};Float32Array.prototype.vec3_rotateAroundAxisRadians=function(){let e=f.create();return function(t,i,o,n=y.create()){return f.setAxisAngle(e,i,t),this.vec3_rotateAroundQuat(e,o,n)}}();Float32Array.prototype.vec3_convertPositionToWorld=function(e,t){return this.vec3_convertPositionToWorldMatrix(e,t)};Float32Array.prototype.vec3_convertPositionToLocal=function(e,t){return this.vec3_convertPositionToLocalMatrix(e,t)};Float32Array.prototype.vec3_convertPositionToWorldMatrix=function(e,t=y.create()){return y.transformMat4(t,this,e),t};Float32Array.prototype.vec3_convertPositionToLocalMatrix=function(){let e=P.create();return function(t,i=y.create()){return P.invert(e,t),y.transformMat4(i,this,e),i}}();Float32Array.prototype.vec3_convertPositionToWorldQuat=function(){let e=P.create(),t=y.create(),i=f.create(),o=y.create();return y.set(o,1,1,1),function(n,s=y.create()){return n.quat2_getPosition(t),n.quat2_getRotationQuat(i),e.mat4_setPositionRotationQuatScale(t,i,o),this.vec3_convertPositionToWorldMatrix(e,s)}}();Float32Array.prototype.vec3_convertPositionToLocalQuat=function(){let e=P.create(),t=y.create(),i=f.create(),o=y.create();return y.set(o,1,1,1),function(n,s=y.create()){return n.quat2_getPosition(t),n.quat2_getRotationQuat(i),e.mat4_setPositionRotationQuatScale(t,i,o),this.vec3_convertPositionToLocalMatrix(e,s)}}();Float32Array.prototype.vec3_convertDirectionToWorld=function(e,t){return this.vec3_convertDirectionToWorldMatrix(e,t)};Float32Array.prototype.vec3_convertDirectionToLocal=function(e,t){return this.vec3_convertDirectionToLocalMatrix(e,t)};Float32Array.prototype.vec3_convertDirectionToWorldMatrix=function(){let e=f.create();return function(t,i=y.create()){return t.mat4_getRotationQuat(e),y.transformQuat(i,this,e),i}}();Float32Array.prototype.vec3_convertDirectionToLocalMatrix=function(){let e=f.create();return function(t,i=y.create()){return t.mat4_getRotationQuat(e),f.conjugate(e,e),y.transformQuat(i,this,e),i}}();Float32Array.prototype.vec3_convertDirectionToWorldQuat=function(){let e=f.create();return function(t,i=y.create()){return t.quat2_getRotationQuat(e),y.transformQuat(i,this,e),i}}();Float32Array.prototype.vec3_convertDirectionToLocalQuat=function(){let e=f.create();return function(t,i=y.create()){return t.quat2_getRotationQuat(e),f.conjugate(e,e),y.transformQuat(i,this,e),i}}();Float32Array.prototype.vec3_log=function(e=4){this.vec_log(e)};Float32Array.prototype.vec3_error=function(e=4){this.vec_error(e)};Float32Array.prototype.vec3_warn=function(e=4){this.vec_warn(e)};Float32Array.prototype.vec3_addRotation=function(e,t){return this.vec3_degreesAddRotation(e,t)};Float32Array.prototype.vec3_addRotationDegrees=function(e,t){return quat.vec3_degreesAddRotationDegrees(e,t)};Float32Array.prototype.vec3_addRotationRadians=function(e,t){return quat.vec3_degreesAddRotationRadians(e,t)};Float32Array.prototype.vec3_addRotationQuat=function(e,t){return quat.vec3_degreesAddRotationQuat(e,t)};Float32Array.prototype.vec3_degreesAddRotation=function(e,t){return this.vec3_degreesAddRotationDegrees(e,t)};Float32Array.prototype.vec3_degreesAddRotationDegrees=function(){let e=f.create();return function(t,i=y.create()){return this.vec3_degreesToQuat(e),e.quat_addRotationDegrees(t,e).quat_toDegrees(i)}}();Float32Array.prototype.vec3_degreesAddRotationRadians=function(){let e=f.create();return function(t,i=y.create()){return this.vec3_degreesToQuat(e),e.quat_addRotationRadians(t,e).quat_toDegrees(i)}}();Float32Array.prototype.vec3_degreesAddRotationQuat=function(){let e=f.create();return function(t,i=y.create()){return this.vec3_degreesToQuat(e),e.quat_addRotationQuat(t,e).quat_toDegrees(i)}}();Float32Array.prototype.vec3_radiansAddRotation=function(e,t){return this.vec3_radiansAddRotationDegrees(e,t)};Float32Array.prototype.vec3_radiansAddRotationDegrees=function(){let e=f.create();return function(t,i=y.create()){return this.vec3_radiansToQuat(e),e.quat_addRotationDegrees(t,e).quat_toRadians(i)}}();Float32Array.prototype.vec3_radiansAddRotationRadians=function(){let e=f.create();return function(t,i=y.create()){return this.vec3_radiansToQuat(e),e.quat_addRotationRadians(t,e).quat_toRadians(i)}}();Float32Array.prototype.vec3_radiansAddRotationQuat=function(){let e=f.create();return function(t,i=y.create()){return this.vec3_radiansToQuat(e),e.quat_addRotationQuat(t,e).quat_toRadians(i)}}();Float32Array.prototype.vec3_toMatrix=function(e=R.create()){return this.vec3_degreesToMatrix(e)};Float32Array.prototype.vec3_degreesToMatrix=function(){let e=f.create();return function(t=R.create()){return this.vec3_degreesToQuat(e),e.quat_toMatrix(t)}}();Float32Array.prototype.vec3_radiansToMatrix=function(){let e=f.create();return function(t=R.create()){return this.vec3_radiansToQuat(e),e.quat_toMatrix(t)}}();Float32Array.prototype.vec4_set=function(e,t=null,i=null,o=null){return t==null?N.set(this,e,e,e,e):N.set(this,e,t,i,o),this};Float32Array.prototype.vec4_copy=function(e){return N.copy(this,e),this};Float32Array.prototype.quat_normalize=function(e=f.create()){return f.normalize(e,this),e};Float32Array.prototype.quat_copy=function(e){return f.copy(this,e),this};Float32Array.prototype.quat_set=function(e,t=null,i=null,o=null){return t==null?f.set(this,e,e,e,e):f.set(this,e,t,i,o),this};Float32Array.prototype.quat_identity=function(){return f.identity(this),this};Float32Array.prototype.quat_length=function(){return f.length(this)};Float32Array.prototype.quat_invert=function(e=f.create()){return f.invert(e,this),e};Float32Array.prototype.quat_mul=function(e,t=f.create()){return f.mul(t,this,e),t};Float32Array.prototype.quat_getAxis=function(e=y.create()){return f.getAxisAngle(e,this),e};Float32Array.prototype.quat_getAngle=function(){let e=y.create();return function(){return f.getAxisAngle(e,this)}}();Float32Array.prototype.quat_getAxes=function(){let e=R.create();return function(t=[y.create(),y.create(),y.create()]){return R.fromQuat(e,this),y.set(t[0],e[0],e[1],e[2]),y.set(t[1],e[3],e[4],e[5]),y.set(t[2],e[6],e[7],e[8]),y.normalize(t[0],t[0]),y.normalize(t[1],t[1]),y.normalize(t[2],t[2]),t}}();Float32Array.prototype.quat_fromAxis=function(e,t){return this.quat_fromAxisDegrees(e,t)};Float32Array.prototype.quat_fromAxisDegrees=function(e,t){return f.setAxisAngle(this,t,F.toRadian(e)),this};Float32Array.prototype.quat_fromAxisRadians=function(e,t){return f.setAxisAngle(this,t,e),this};Float32Array.prototype.quat_fromRadians=function(){let e=y.create();return function(t){return t.vec3_toDegrees(e),this.quat_fromDegrees(e)}}();Float32Array.prototype.quat_fromDegrees=function(e){return f.fromEuler(this,e[0],e[1],e[2]),this};Float32Array.prototype.quat_toRadians=function(){let e=R.create();return function(t=y.create()){return R.fromQuat(e,this),t[1]=Math.asin(-this._pp_clamp(e[2],-1,1)),Math.abs(e[2])<1-this._pp_epsilon?(t[0]=Math.atan2(e[5],e[8]),t[2]=Math.atan2(e[1],e[0])):(t[0]=0,t[2]=Math.atan2(-e[3],e[4])),t}}();Float32Array.prototype.quat_toDegrees=function(e=y.create()){return this.quat_toRadians(e),e.vec3_toDegrees(e),e};Float32Array.prototype.quat_isNormalized=function(){return Math.abs(f.length(this)-1)<this._pp_epsilon};Float32Array.prototype.quat_addRotation=function(e,t){return this.quat_addRotationDegrees(e,t)};Float32Array.prototype.quat_addRotationDegrees=function(){let e=f.create();return function(t,i){return t.vec3_degreesToQuat(e),this.quat_addRotationQuat(e,i)}}();Float32Array.prototype.quat_addRotationRadians=function(){let e=f.create();return function(t,i){return t.vec3_radiansToQuat(e),this.quat_addRotationQuat(e,i)}}();Float32Array.prototype.quat_addRotationQuat=function(e,t=f.create()){return e.quat_mul(this,t),t};Float32Array.prototype.quat_subRotation=function(e,t){return this.quat_subRotationDegrees(e,t)};Float32Array.prototype.quat_subRotationDegrees=function(){let e=f.create();return function(t,i){return t.vec3_degreesToQuat(e),this.quat_subRotationQuat(e,i)}}();Float32Array.prototype.quat_subRotationRadians=function(){let e=f.create();return function(t,i){return t.vec3_radiansToQuat(e),this.quat_subRotationQuat(e,i)}}();Float32Array.prototype.quat_subRotationQuat=function(){let e=f.create();return function(t,i=f.create()){return t.quat_invert(e),this.quat_mul(e,i),i}}();Float32Array.prototype.quat_rotationTo=function(e,t){return this.quat_rotationToDegrees(e,t)};Float32Array.prototype.quat_rotationToDegrees=function(e,t){return e.quat_subRotationDegrees(this,t)};Float32Array.prototype.quat_rotationToRadians=function(e,t){return e.quat_subRotationRadians(this,t)};Float32Array.prototype.quat_rotationToQuat=function(e,t){return e.quat_subRotationQuat(this,t)};Float32Array.prototype.quat_toMatrix=function(e=R.create()){return R.fromQuat(e,this),e};Float32Array.prototype.quat_rotate=function(e,t){return this.quat_rotateDegrees(e,t)};Float32Array.prototype.quat_rotateDegrees=function(e,t){return this.quat_addRotationDegrees(e,t)};Float32Array.prototype.quat_rotateRadians=function(e,t){return this.quat_addRotationRadians(e,t)};Float32Array.prototype.quat_rotateQuat=function(e,t){return this.quat_addRotationQuat(e,t)};Float32Array.prototype.quat_rotateAxis=function(e,t,i){return this.quat_rotateAxisDegrees(e,t,i)};Float32Array.prototype.quat_rotateAxisDegrees=function(){let e=f.create();return function(t,i,o){return e.quat_fromAxisDegrees(t,i),this.quat_rotateQuat(e,o)}}();Float32Array.prototype.quat_rotateAxisRadians=function(){let e=f.create();return function(t,i,o){return e.quat_fromAxisRadians(t,i),this.quat_rotateQuat(e,o)}}();Float32Array.prototype.quat2_normalize=function(e=x.create()){return x.normalize(e,this),e};Float32Array.prototype.quat2_copy=function(e){return x.copy(this,e),this};Float32Array.prototype.quat2_identity=function(){return x.identity(this),this};Float32Array.prototype.quat2_getPosition=function(e=y.create()){return x.getTranslation(e,this),this};Float32Array.prototype.quat2_getRotation=function(e){return this.quat2_getRotationDegrees(e)};Float32Array.prototype.quat2_getRotationDegrees=function(){let e=f.create();return function(t=y.create()){return this.quat2_getRotationQuat(e).quat_toDegrees(t),t}}();Float32Array.prototype.quat2_getRotationRadians=function(){let e=f.create();return function(t=y.create()){return this.quat2_getRotationQuat(e).quat_toRadians(t),t}}();Float32Array.prototype.quat2_getRotationQuat=function(e=f.create()){return f.copy(e,this),this};Float32Array.prototype.quat2_setPositionRotation=function(e,t){return this.quat2_setPositionRotationDegrees(e,t)};Float32Array.prototype.quat2_setPositionRotationDegrees=function(){let e=f.create();return function(t,i){return i.vec3_degreesToQuat(e),x.fromRotationTranslation(this,e,t),this}}();Float32Array.prototype.quat2_setPositionRotationRadians=function(){let e=f.create();return function(t,i){return i.vec3_radiansToQuat(e),x.fromRotationTranslation(this,e,t),this}}();Float32Array.prototype.quat2_setPositionRotationQuat=function(e,t){return x.fromRotationTranslation(this,t,e),this};Float32Array.prototype.quat2_getAxes=function(){let e=R.create();return function(t=[y.create(),y.create(),y.create()]){return R.fromQuat(e,this),y.set(t[0],e[0],e[1],e[2]),y.set(t[1],e[3],e[4],e[5]),y.set(t[2],e[6],e[7],e[8]),y.normalize(t[0],t[0]),y.normalize(t[1],t[1]),y.normalize(t[2],t[2]),t}}();Float32Array.prototype.quat2_toLocal=function(){let e=x.create();return function(t,i=x.create()){return x.conjugate(e,t),x.mul(i,e,this),i}}();Float32Array.prototype.quat2_toWorld=function(e,t=x.create()){return x.mul(t,e,this),t};Float32Array.prototype.quat2_toMatrix=function(e=P.create()){return P.fromQuat2(e,this),e};Float32Array.prototype.quat2_fromMatrix=function(e){return e.mat4_toQuat(this),this};Float32Array.prototype.mat3_toDegrees=function(){let e=f.create();return function(t=y.create()){return this.mat3_toQuat(e),e.quat_toDegrees(t),t}}();Float32Array.prototype.mat3_toRadians=function(){let e=f.create();return function(t=y.create()){return this.mat3_toQuat(e),e.quat_toRadians(t),t}}();Float32Array.prototype.mat3_toQuat=function(e=f.create()){return f.fromMat3(e,this),e};Float32Array.prototype.mat4_copy=function(e){return P.copy(this,e),this};Float32Array.prototype.mat4_identity=function(){return P.identity(this),this};Float32Array.prototype.mat4_invert=function(e=P.create()){return P.invert(e,this),e};Float32Array.prototype.mat4_clone=function(e=P.create()){return P.copy(e,this),e};Float32Array.prototype.mat4_getPosition=function(e=y.create()){return P.getTranslation(e,this),e};Float32Array.prototype.mat4_getRotation=function(e=y.create()){return this.mat4_getRotationDegrees(e)};Float32Array.prototype.mat4_getRotationDegrees=function(){let e=f.create();return function(t=y.create()){return this.mat4_getRotationQuat(e),e.quat_toDegrees(t),t}}();Float32Array.prototype.mat4_getRotationRadians=function(){let e=f.create();return function(t=y.create()){return this.mat4_getRotationQuat(e),e.quat_toRadians(t),t}}();Float32Array.prototype.mat4_getRotationQuat=function(){let e=y.create(),t=P.create(),i=y.create(),o=y.create();return y.set(o,1,1,1),function(n=f.create()){return P.getScaling(e,this),y.divide(i,o,e),P.scale(t,this,i),P.getRotation(n,t),f.normalize(n,n),n}}();Float32Array.prototype.mat4_getScale=function(e=y.create()){return P.getScaling(e,this),e};Float32Array.prototype.mat4_setPosition=function(e){return this[12]=e[0],this[13]=e[1],this[14]=e[2],this};Float32Array.prototype.mat4_setRotation=function(e){return this.mat4_setRotationDegrees(e),this};Float32Array.prototype.mat4_setRotationDegrees=function(){let e=f.create();return function(t){return this.mat4_setRotationQuat(t.vec3_degreesToQuat(e)),this}}();Float32Array.prototype.mat4_setRotationRadians=function(){let e=y.create();return function(t){return this.mat4_setRotationDegrees(t.vec3_toDegrees(e)),this}}();Float32Array.prototype.mat4_setRotationQuat=function(){let e=y.create(),t=y.create();return function(i){return this.mat4_getPosition(e),this.mat4_getScale(t),this.mat4_setPositionRotationQuatScale(e,i,t),this}}();Float32Array.prototype.mat4_setScale=function(){let e=y.create();return function(t){return P.getScaling(e,this),y.divide(e,t,e),P.scale(this,this,e),this}}();Float32Array.prototype.mat4_setPositionRotationScale=function(e,t,i){return this.mat4_setPositionRotationDegreesScale(e,t,i),this};Float32Array.prototype.mat4_setPositionRotationDegreesScale=function(){let e=f.create();return function(t,i,o){return this.mat4_setPositionRotationQuatScale(t,i.vec3_degreesToQuat(e),o),this}}();Float32Array.prototype.mat4_setPositionRotationRadiansScale=function(){let e=y.create();return function(t,i,o){return this.mat4_setPositionRotationDegreesScale(t,i.vec3_toDegrees(e),o),this}}();Float32Array.prototype.mat4_setPositionRotationQuatScale=function(e,t,i){return P.fromRotationTranslationScale(this,t,e,i),this};Float32Array.prototype.mat4_setPositionRotation=function(e,t){return this.mat4_setPositionRotationDegrees(e,t),this};Float32Array.prototype.mat4_setPositionRotationDegrees=function(){let e=f.create();return function(t,i){return this.mat4_setPositionRotationQuat(t,i.vec3_degreesToQuat(e)),this}}();Float32Array.prototype.mat4_setPositionRotationRadians=function(){let e=y.create();return function(t,i){return this.mat4_setPositionRotationDegrees(t,i.vec3_toDegrees(e)),this}}();Float32Array.prototype.mat4_setPositionRotationQuat=function(e,t){return P.fromRotationTranslation(this,t,e),this};Float32Array.prototype.mat4_getAxes=function(e=[y.create(),y.create(),y.create()]){return y.set(e[0],this[0],this[1],this[2]),y.set(e[1],this[4],this[5],this[6]),y.set(e[2],this[8],this[9],this[10]),y.normalize(e[0],e[0]),y.normalize(e[1],e[1]),y.normalize(e[2],e[2]),e};Float32Array.prototype.mat4_toWorld=function(){let e=P.create(),t=y.create(),i=y.create(),o=y.create(),n=y.create();return y.set(n,1,1,1),function(s,a=P.create()){return s.mat4_hasUniformScale()?P.mul(a,s,this):(y.set(t,this[12],this[13],this[14]),t.vec3_convertPositionToWorldMatrix(s,t),P.getScaling(i,s),y.divide(o,n,i),P.scale(e,s,o),P.mul(a,e,this),P.scale(a,a,i),a[12]=t[0],a[13]=t[1],a[14]=t[2],a[15]=1),a}}();Float32Array.prototype.mat4_toLocal=function(){let e=P.create(),t=y.create(),i=y.create(),o=y.create(),n=y.create();return y.set(n,1,1,1),function(s,a=P.create()){return s.mat4_hasUniformScale()?(P.invert(e,s),P.mul(a,e,this)):(y.set(t,this[12],this[13],this[14]),t.vec3_convertPositionToLocalMatrix(s,t),P.getScaling(i,s),y.divide(o,n,i),P.scale(e,s,o),P.invert(e,e),P.mul(a,e,this),P.scale(a,a,o),a[12]=t[0],a[13]=t[1],a[14]=t[2],a[15]=1),a}}();Float32Array.prototype.mat4_hasUniformScale=function(){let e=y.create();return function(){return P.getScaling(e,this),Math.abs(e[0]-e[1])<this._pp_epsilon&&Math.abs(e[1]-e[2])<this._pp_epsilon&&Math.abs(e[0]-e[2])<this._pp_epsilon}}();Float32Array.prototype.mat4_toQuat=function(){let e=y.create(),t=f.create();return function(i=x.create()){return P.getTranslation(e,this),this.mat4_getRotationQuat(t),x.fromRotationTranslation(i,t,e),i}}();Float32Array.prototype.mat4_fromQuat=function(e){return e.quat2_toMatrix(this),this};PP.vec3_create=function(e=null,t=null,i=null){let o=y.create();return e!=null&&o.vec3_set(e,t,i),o};PP.vec4_create=function(e=null,t=null,i=null,o=null){let n=N.create();return e!=null&&n.vec4_set(e,t,i,o),n};PP.quat_create=function(e=null,t=null,i=null,o=null){let n=f.create();return e!=null&&n.quat_set(e,t,i,o),n};PP.quat2_create=function(){return x.create()};PP.quat2_fromPositionRotation=function(e,t){return quat2_fromPositionRotationDegrees(e,t)};PP.quat2_fromPositionRotationDegrees=function(e,t){let i=P.create();return i.quat2_setPositionRotationDegrees(e,t),i};PP.quat2_fromPositionRotationRadians=function(e,t){let i=P.create();return i.quat2_setPositionRotationRadians(e,t),i};PP.quat2_fromPositionRotationQuat=function(e,t){let i=x.create();return i.quat2_setPositionRotationQuat(e,t),i};PP.mat4_create=function(){return P.create()};PP.mat4_fromPositionRotation=function(e,t){return mat4_fromPositionRotationDegrees(e,t)};PP.mat4_fromPositionRotationDegrees=function(e,t){let i=P.create();return i.mat4_setPositionRotationDegrees(e,t),i};PP.mat4_fromPositionRotationRadians=function(e,t){let i=P.create();return i.mat4_setPositionRotationRadians(e,t),i};PP.mat4_fromPositionRotationQuat=function(e,t){let i=P.create();return i.mat4_setPositionRotationQuat(e,t),i};PP.mat4_fromPositionRotationScale=function(e,t,i){return mat4_fromPositionRotationDegreesScale(e,t,i)};PP.mat4_fromPositionRotationDegreesScale=function(e,t,i){let o=P.create();return o.mat4_setPositionRotationDegreesScale(e,t,i),o};PP.mat4_fromPositionRotationRadiansScale=function(e,t,i){let o=P.create();return o.mat4_setPositionRotationRadiansScale(e,t,i),o};PP.mat4_fromPositionRotationQuatScale=function(e,t,i){let o=P.create();return o.mat4_setPositionRotationQuatScale(e,t,i),o};Float32Array.prototype._pp_epsilon=1e-6;Float32Array.prototype._pp_clamp=function(e,t,i){return Math.min(Math.max(e,t),i)};Float32Array.prototype._vec_buildConsoleMessage=function(e){let t="[";for(let i=0;i<this.length;i++)i!=0&&(t=t.concat(", ")),t=t.concat(this[i].toFixed(e));return t=t.concat("]"),t};Float32Array.prototype._vec_prepareOut=function(e){return e==null?e=this.pp_clone():e!=this&&e.pp_copy(this),e};for(let e in Float32Array.prototype){let t=["pp_","vec_","vec3_","vec4_","quat_","quat2_","mat3_","mat4_","_pp_","_vec_"],i=!1;for(let o of t)if(e.startsWith(o)){i=!0;break}i&&Object.defineProperty(Float32Array.prototype,e,{enumerable:!1})}});var bi=S(()=>{Math.pp_clamp=function(e,t,i){let o=t??Number.MIN_VALUE,n=i??Number.MAX_VALUE,s=Math.min(o,n),a=Math.max(o,n);return Math.min(Math.max(e,s),a)};Math.pp_sign=function(e,t=1){let i=Math.sign(e);return i==0&&(i=Math.sign(t)),i};Math.pp_toDegrees=function(e){return e*(180/Math.PI)};Math.pp_toRadians=function(e){return e*(Math.PI/180)};Math.pp_roundDecimal=function(e,t){let i=Math.pow(10,t);return e=Math.round(e*i)/i,e};Math.pp_mapToRange=function(e,t,i,o,n){if(t==i)return o;let s=Math.pp_clamp(e,t,i);if(s==t)return o;if(s==i)return n;let a=o+(n-o)/(i-t)*(s-t);return Math.pp_clamp(a,o,n)};Math.pp_random=function(e=0,t=1){return Math.random()*(t-e)+e};Math.pp_randomInt=function(e,t){let i=Math.min(e,t),o=Math.max(e,t);return Math.floor(Math.random()*(o-i+1)+i)};Math.pp_randomSign=function(){return Math.random()<.5?1:-1};Math.pp_randomPick=function(...e){let t=null;if(e.length>0)if(e.length==1&&e[0].length!=null){if(e[0].length>0){let i=Math.pp_randomInt(0,e[0].length-1);t=e[0][i]}}else{let i=Math.pp_randomInt(0,e.length-1);t=e[i]}return t};Math.pp_lerp=function(e,t,i){return i==0?e:i==1?t:i*(t-e)+e};PP.EasingFunction={linear:e=>e,easeIn:e=>e*e*e,easeOut:e=>(e-1)*(e-1)*(e-1)+1,easeInOut:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1};Math.pp_interpolate=function(e,t,i,o=PP.EasingFunction.linear){let n=o(i);return Math.pp_lerp(e,t,n)};Math.pp_angleDistance=function(e,t){return Math.pp_angleDistanceDegrees(e,t)};Math.pp_angleDistanceDegrees=function(e,t){return Math.abs(Math.pp_angleDistanceSignedDegrees(e,t))};Math.pp_angleDistanceRadians=function(e,t){return Math.abs(Math.pp_angleDistanceSignedRadians(e,t))};Math.pp_angleDistanceSigned=function(e,t){return Math.pp_angleDistanceSignedDegrees(e,t)};Math.pp_angleDistanceSignedDegrees=function(e,t){let i=Math.pp_angleClampDegrees(e,!0),o=Math.pp_angleClampDegrees(t,!0),n=o-i;return o-i>180?n=o-i-360:o-i<-180&&(n=o-i+360),n};Math.pp_angleDistanceSignedRadians=function(e,t){return Math.pp_toRadians(Math.pp_angleDistanceSignedDegrees(Math.pp_toDegrees(e),Math.pp_toDegrees(t)))};Math.pp_angleClamp=function(e,t=!1){return Math.pp_angleClampDegrees(e,t)};Math.pp_angleClampDegrees=function(e,t=!1){let i=e%360;return i<0&&(i+=360),t||i>180&&(i-=360),i};Math.pp_angleClampRadians=function(e,t=!1){return Math.pp_toRadians(Math.pp_angleClampDegrees(Math.pp_toDegrees(e),t))};Math.pp_isInsideAngleRange=function(e,t,i,o=!1){return Math.pp_isInsideAngleRangeDegrees(e,t,i,o)};Math.pp_isInsideAngleRangeDegrees=function(e,t,i,o=!1){let n=!1,s=Math.pp_angleClampDegrees(e,!0),a=Math.pp_angleClampDegrees(t,!0),l=Math.pp_angleClampDegrees(i,!0);if(o&&Math.pp_angleDistanceSignedDegrees(a,l)<0){let m=a;a=l,l=m}return a<l?n=s>=a&&s<=l:n=s>=a||s<=l,n};Math.pp_isInsideAngleRangeRadians=function(e,t,i,o=!1){return Math.pp_isInsideAngleRangeDegrees(Math.pp_toDegrees(e),Math.pp_toDegrees(t),Math.pp_toDegrees(i),o)};for(let e in Math){let t=["pp_","_pp_"],i=!1;for(let o of t)if(e.startsWith(o)){i=!0;break}i&&Object.defineProperty(Math,e,{enumerable:!1})}});var xi=S(()=>{PP.ToolHandedness={NONE:null,LEFT:"left",RIGHT:"right"};PP.ToolInputSourceType={NONE:null,GAMEPAD:0,HAND:1}});var vi=S(()=>{WL.registerComponent("pp-tool-cursor",{_myHandedness:{type:WL.Type.Enum,values:["left","right"],default:"left"},_myPulseOnHover:{type:WL.Type.Bool,default:!1},_myShowFingerCursor:{type:WL.Type.Bool,default:!1},_myCursorMesh:{type:WL.Type.Mesh,default:null},_myCursorMaterial:{type:WL.Type.Material,default:null}},{init:function(){this._myHandednessString=["left","right"][this._myHandedness],this._myHandedness==0?this._myCursorPosition=[-.01,-.024,-.05]:this._myCursorPosition=[.01,-.024,-.05],this._myCursorRotation=[-.382,0,0,.924],this._myCursorRotation.quat_normalize(this._myCursorRotation),this._myCursorMeshScale=[.0025,.0025,.0025],this._myCursorColor=[255/255,255/255,255/255,1],this._myCursorTargetCollisionGroup=7},start:function(){this._myFixForwardObject=WL.scene.addObject(this.object),this._myFixForwardObject.pp_rotateObject([0,180,0]),this._myCursorObject=WL.scene.addObject(this._myFixForwardObject),this._myCursorObject.setTranslationLocal(this._myCursorPosition),this._myCursorObject.rotateObject(this._myCursorRotation),this._myCursorMeshObject=WL.scene.addObject(this._myCursorObject),this._myCursorMeshObject.scale(this._myCursorMeshScale),this._myCursorMeshComponent=this._myCursorMeshObject.addComponent("mesh"),this._myCursorMeshComponent.mesh=this._myCursorMesh,this._myCursorMeshComponent.material=this._myCursorMaterial.clone(),this._myCursorMeshComponent.material.color=this._myCursorColor,this._myCursorComponent=this._myCursorObject.addComponent("cursor",{collisionGroup:this._myCursorTargetCollisionGroup,handedness:this._myHandedness+1,cursorObject:this._myCursorMeshObject}),this._myCursorComponent.rayCastMode=0,this._myPulseOnHover&&this._myCursorComponent.globalTarget.addHoverFunction(this._pulseOnHover.bind(this)),this._myFingerCursorComponent=this.object.addComponent("pp-finger-cursor",{_myHandedness:this._myHandedness,_myEnableMultipleClicks:!0,_myCollisionGroup:this._myCursorTargetCollisionGroup,_myCursorMesh:this._myShowFingerCursor?this._myCursorMesh:null,_myCursorMaterial:this._myCursorMeshComponent.material}),this._myFingerCursorComponent.setActive(!1)},update:function(e){let t=this._isUsingHand();this._myFingerCursorComponent.setActive(t),this._myCursorComponent.active=!t,this._myCursorComponent.active||this._myCursorComponent._setCursorVisibility(!1)},_isUsingHand:function(){let e=!1;if(WL.xrSession&&WL.xrSession.inputSources)for(let t=0;t<WL.xrSession.inputSources.length;t++){let i=WL.xrSession.inputSources[t];if(i.hand&&i.handedness==this._myHandednessString){e=!0;break}}return e},_pulseOnHover:function(e){let t=e.getComponent("cursor-target");t&&!t.isSurface&&(this._myHandedness==0?PP.myLeftGamepad&&PP.myLeftGamepad.pulse(.4,0):PP.myRightGamepad&&PP.myRightGamepad.pulse(.4,0))}})});var Bi=S(()=>{PP.ConsoleVRWidgetSetup=class{constructor(){this._initializeBuildSetup(),this._initializeRuntimeSetup()}_initializeBuildSetup(){this.myBackgroundColor=[46/255,46/255,46/255,1],this.myCursorTargetCollisionCollider=2,this.myCursorTargetCollisionGroup=7,this.myCursorTargetCollisionThickness=.001,this.myDefaultTextColor=[255/255,255/255,255/255,1],this.myTextAlignment=2,this.myTextJustification=2,this.myTextOutlineRange=[.45,.45],this.myTextColor=this.myDefaultTextColor,this.myTextOutlineColor=this.myDefaultTextColor,this.myMessageTypeColors=[],this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.LOG]=this.myDefaultTextColor,this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.ERROR]=[255/255,40/255,40/255,1],this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.WARN]=[250/255,220/255,40/255,1],this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.INFO]=[60/255,200/255,255/255,1],this.myMessagesPanelPosition=[0,.075,0],this.myMessagesBackgroundScale=[.34,.15,1];{let t=.03,i=t*this.myMessagesBackgroundScale[0]/this.myMessagesBackgroundScale[1]*.8,o=-this.myMessagesBackgroundScale[0]+this.myMessagesBackgroundScale[0]*t,n=this.myMessagesBackgroundScale[1]-this.myMessagesBackgroundScale[1]*i;this.myMessagesTextsPanelPosition=[o,n,.007]}this.myMessagesTextsPanelScale=[.1,.1,.1],this.myMessagesTextStartString=`.
`,this.myMessagesTextAlignment=1,this.myMessagesTextJustification=3,this.myMessagesTextOutlineRange=[.45,.45],this.myMessagesTextPositions=[],this.myMessagesTextPositions[PP.ConsoleVRWidget.MessageType.LOG]=[0,0,1e-5],this.myMessagesTextPositions[PP.ConsoleVRWidget.MessageType.ERROR]=[0,0,0],this.myMessagesTextPositions[PP.ConsoleVRWidget.MessageType.WARN]=[0,0,0],this.myMessagesTextPositions[PP.ConsoleVRWidget.MessageType.INFO]=[0,0,0],this.myMessagesTextColors=[],this.myMessagesTextColors[PP.ConsoleVRWidget.MessageType.LOG]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.LOG],this.myMessagesTextColors[PP.ConsoleVRWidget.MessageType.ERROR]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.ERROR],this.myMessagesTextColors[PP.ConsoleVRWidget.MessageType.WARN]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.WARN],this.myMessagesTextColors[PP.ConsoleVRWidget.MessageType.INFO]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.INFO],this.myMessagesTextOutlineColors=[],this.myMessagesTextOutlineColors[PP.ConsoleVRWidget.MessageType.LOG]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.LOG],this.myMessagesTextOutlineColors[PP.ConsoleVRWidget.MessageType.ERROR]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.ERROR],this.myMessagesTextOutlineColors[PP.ConsoleVRWidget.MessageType.WARN]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.WARN],this.myMessagesTextOutlineColors[PP.ConsoleVRWidget.MessageType.INFO]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.INFO],this.myButtonsPanelPosition=[0,-.11,.015],this.myButtonBackgroundScale=[.04,.02,1],this.myButtonTextPosition=[0,0,.0065],this.myButtonTextScale=[.18,.18,.18],this.myButtonTextAlignment=this.myTextAlignment,this.myButtonTextJustification=this.myTextJustification,this.myButtonTextOutlineRange=this.myTextOutlineRange,this.myButtonTextColor=this.myTextColor,this.myButtonTextOutlineColor=this.myTextOutlineColor,this.myButtonCursorTargetPosition=[0,0,0],this.myButtonCursorTargetPosition[2]=this.myButtonTextPosition[2],this.myButtonsCollisionCollider=this.myCursorTargetCollisionCollider,this.myButtonsCollisionGroup=this.myCursorTargetCollisionGroup,this.myButtonsCollisionExtents=this.myButtonBackgroundScale.slice(0),this.myButtonsCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myClearButtonTextLabel="clear",this.myUpButtonTextLabel="up",this.myDownButtonTextLabel="down",this.myFilterButtonsTextColors=[],this.myFilterButtonsTextColors[PP.ConsoleVRWidget.MessageType.LOG]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.LOG],this.myFilterButtonsTextColors[PP.ConsoleVRWidget.MessageType.ERROR]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.ERROR],this.myFilterButtonsTextColors[PP.ConsoleVRWidget.MessageType.WARN]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.WARN],this.myFilterButtonsTextColors[PP.ConsoleVRWidget.MessageType.INFO]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.INFO],this.myFilterButtonsTextOutlineColors=[],this.myFilterButtonsTextOutlineColors[PP.ConsoleVRWidget.MessageType.LOG]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.LOG],this.myFilterButtonsTextOutlineColors[PP.ConsoleVRWidget.MessageType.ERROR]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.ERROR],this.myFilterButtonsTextOutlineColors[PP.ConsoleVRWidget.MessageType.WARN]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.WARN],this.myFilterButtonsTextOutlineColors[PP.ConsoleVRWidget.MessageType.INFO]=this.myMessageTypeColors[PP.ConsoleVRWidget.MessageType.INFO],this.myFilterButtonsTextLabel=[],this.myFilterButtonsTextLabel[PP.ConsoleVRWidget.MessageType.LOG]="log",this.myFilterButtonsTextLabel[PP.ConsoleVRWidget.MessageType.ERROR]="error",this.myFilterButtonsTextLabel[PP.ConsoleVRWidget.MessageType.WARN]="warn",this.myFilterButtonsTextLabel[PP.ConsoleVRWidget.MessageType.INFO]="info";{let t=7,i=Math.max(.68,this.myButtonBackgroundScale[0]*t),o=2+3+4+4+1+2,n=Math.max((i-t*this.myButtonBackgroundScale[0]*2)/o,0),s=this.myButtonBackgroundScale[0],a=-i/2;this.myFilterButtonsPositions=[],this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.LOG]=[a+n*2+s,0,0],this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.ERROR]=[this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.LOG][0]+s+n+s,0,0],this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.WARN]=[this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.ERROR][0]+s+n+s,0,0],this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.INFO]=[this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.WARN][0]+s+n+s,0,0],this.myClearButtonPosition=[this.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType.INFO][0]+s+n*4+s,0,0],this.myUpButtonPosition=[this.myClearButtonPosition[0]+s+n*4+s,0,0],this.myDownButtonPosition=[this.myUpButtonPosition[0]+s+n+s,0,0]}this.myNotifyIconBackgroundScale=[.01,.01,1],this.myNotifyIconPanelPositions=[],this.myNotifyIconPanelPositions[PP.ToolHandedness.NONE]=[0,0,0],this.myNotifyIconPanelPositions[PP.ToolHandedness.NONE][0]=-this.myMessagesBackgroundScale[0]+this.myNotifyIconBackgroundScale[0]+.01,this.myNotifyIconPanelPositions[PP.ToolHandedness.NONE][1]=-this.myMessagesBackgroundScale[1]+this.myNotifyIconBackgroundScale[1]+.01,this.myNotifyIconPanelPositions[PP.ToolHandedness.NONE][2]=this.myMessagesTextsPanelPosition[2]-1e-5,this.myNotifyIconPanelPositions[PP.ToolHandedness.LEFT]=this.myNotifyIconPanelPositions[PP.ToolHandedness.NONE],this.myNotifyIconPanelPositions[PP.ToolHandedness.RIGHT]=this.myNotifyIconPanelPositions[PP.ToolHandedness.NONE],this.myNotifyIconCursorTargetPosition=[0,0,0],this.myNotifyIconCursorTargetPosition[2]=this.myButtonsPanelPosition[2]+this.myButtonTextPosition[2]-this.myMessagesTextsPanelPosition[2],this.myNotifyIconCollisionExtents=this.myNotifyIconBackgroundScale.slice(0),this.myNotifyIconCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myNotifyIconColor=[210/255,210/255,210/255,1],this.myPointerCollisionCollider=this.myCursorTargetCollisionCollider,this.myPointerCollisionGroup=this.myCursorTargetCollisionGroup;{let t=Math.abs(this.myMessagesPanelPosition[1]-this.myMessagesBackgroundScale[1]-(this.myButtonsPanelPosition[1]+this.myButtonBackgroundScale[1])),i=this.myMessagesBackgroundScale[1]+this.myButtonBackgroundScale[1]+t/2;this.myPointerCollisionExtents=[this.myMessagesBackgroundScale[0],i,this.myCursorTargetCollisionThickness]}this.myPointerCursorTargetPosition=[0,0,0],this.myPointerCursorTargetPosition[1]=this.myMessagesPanelPosition[1]+this.myMessagesBackgroundScale[1]-this.myPointerCollisionExtents[1],this.myPointerCursorTargetPosition[2]=this.myButtonsPanelPosition[2]+this.myButtonTextPosition[2]-1e-4}_initializeRuntimeSetup(){this.myTabString="    ",this.myAssertStartString="Assertion failed:",this.myMaxCharactersPerLine=100,this.myMaxLineSplits=10,this.myMaxLines=22,this.myMaxMessages=2e3,this.myMaxMessagesDeletePad=2e3,this.myLinesBetweenMessages=1,this.myButtonHoverColor=[150/255,150/255,150/255,1],this.myButtonDisabledTextColor=this.myBackgroundColor,this.myButtonDisabledBackgroundColor=[110/255,110/255,110/255,1],this.myFilterButtonDisabledTextColor=this.myButtonDisabledTextColor,this.myFilterButtonDisabledBackgroundColor=this.myButtonDisabledBackgroundColor,this.myScrollDelay=.1,this.myScrollAmount=1,this.myScrollThumbstickHandedness=PP.ToolHandedness.RIGHT,this.myScrollThumbstickDelay=.1,this.myScrollThumbstickMinThreshold=.2,this.myScrollThumbstickAmount=3,this.myPulseDelay=5,this.myPulseIntensity=.3,this.myPulseDuration=.085,this.myClearBrowserConsoleWhenClearPressed=!0,this.myGamepadScrollOnlyOnHover=!0}}});var Mi=S(()=>{PP.ConsoleVRWidgetUI=class{build(t,i,o){this._myParentObject=t,this._mySetup=i,this._myAdditionalSetup=o,this._myPlaneMesh=PP.MeshUtils.createPlaneMesh(),this._createSkeleton(),this._setTransforms(),this._addComponents()}setVisible(t){this.myPivotObject.pp_setActiveHierarchy(t)}_createSkeleton(){this.myPivotObject=WL.scene.addObject(this._myParentObject),this._createMessagesSkeleton(),this._createButtonsSkeleton(),this._createPointerSkeleton()}_createMessagesSkeleton(){this.myMessagesPanel=WL.scene.addObject(this.myPivotObject),this.myMessagesBackground=WL.scene.addObject(this.myMessagesPanel),this.myMessagesTextsPanel=WL.scene.addObject(this.myMessagesPanel),this.myMessagesTexts=[];for(let t in PP.ConsoleVRWidget.MessageType)this.myMessagesTexts[PP.ConsoleVRWidget.MessageType[t]]=WL.scene.addObject(this.myMessagesTextsPanel);this.myNotifyIconPanel=WL.scene.addObject(this.myMessagesPanel),this.myNotifyIconBackground=WL.scene.addObject(this.myNotifyIconPanel),this.myNotifyIconCursorTarget=WL.scene.addObject(this.myNotifyIconPanel)}_createButtonsSkeleton(){this.myButtonsPanel=WL.scene.addObject(this.myPivotObject),this.myFilterButtonsPanels=[],this.myFilterButtonsBackgrounds=[],this.myFilterButtonsTexts=[],this.myFilterButtonsCursorTargets=[];for(let t in PP.ConsoleVRWidget.MessageType)this.myFilterButtonsPanels[PP.ConsoleVRWidget.MessageType[t]]=WL.scene.addObject(this.myButtonsPanel),this.myFilterButtonsBackgrounds[PP.ConsoleVRWidget.MessageType[t]]=WL.scene.addObject(this.myFilterButtonsPanels[PP.ConsoleVRWidget.MessageType[t]]),this.myFilterButtonsTexts[PP.ConsoleVRWidget.MessageType[t]]=WL.scene.addObject(this.myFilterButtonsPanels[PP.ConsoleVRWidget.MessageType[t]]),this.myFilterButtonsCursorTargets[PP.ConsoleVRWidget.MessageType[t]]=WL.scene.addObject(this.myFilterButtonsPanels[PP.ConsoleVRWidget.MessageType[t]]);this.myClearButtonPanel=WL.scene.addObject(this.myButtonsPanel),this.myClearButtonBackground=WL.scene.addObject(this.myClearButtonPanel),this.myClearButtonText=WL.scene.addObject(this.myClearButtonPanel),this.myClearButtonCursorTarget=WL.scene.addObject(this.myClearButtonPanel),this.myUpButtonPanel=WL.scene.addObject(this.myButtonsPanel),this.myUpButtonBackground=WL.scene.addObject(this.myUpButtonPanel),this.myUpButtonText=WL.scene.addObject(this.myUpButtonPanel),this.myUpButtonCursorTarget=WL.scene.addObject(this.myUpButtonPanel),this.myDownButtonPanel=WL.scene.addObject(this.myButtonsPanel),this.myDownButtonBackground=WL.scene.addObject(this.myDownButtonPanel),this.myDownButtonText=WL.scene.addObject(this.myDownButtonPanel),this.myDownButtonCursorTarget=WL.scene.addObject(this.myDownButtonPanel)}_createPointerSkeleton(){this.myPointerCursorTarget=WL.scene.addObject(this.myPivotObject)}_setTransforms(){this.myPivotObject.setDirty(),this._setMessagesTransforms(),this._setButtonsTransforms(),this._setPointerTransform()}_setMessagesTransforms(){this.myMessagesPanel.setTranslationLocal(this._mySetup.myMessagesPanelPosition),this.myMessagesBackground.scale(this._mySetup.myMessagesBackgroundScale),this.myMessagesTextsPanel.setTranslationLocal(this._mySetup.myMessagesTextsPanelPosition),this.myMessagesTextsPanel.scale(this._mySetup.myMessagesTextsPanelScale);for(let t in PP.ConsoleVRWidget.MessageType)this.myMessagesTexts[PP.ConsoleVRWidget.MessageType[t]].setTranslationLocal(this._mySetup.myMessagesTextPositions[PP.ConsoleVRWidget.MessageType[t]]);this.myNotifyIconPanel.setTranslationLocal(this._mySetup.myNotifyIconPanelPositions[this._myAdditionalSetup.myHandedness]),this.myNotifyIconBackground.scale(this._mySetup.myNotifyIconBackgroundScale),this.myNotifyIconCursorTarget.setTranslationLocal(this._mySetup.myNotifyIconCursorTargetPosition)}_setButtonsTransforms(){this.myButtonsPanel.setTranslationLocal(this._mySetup.myButtonsPanelPosition);for(let t in PP.ConsoleVRWidget.MessageType)this.myFilterButtonsPanels[PP.ConsoleVRWidget.MessageType[t]].setTranslationLocal(this._mySetup.myFilterButtonsPositions[PP.ConsoleVRWidget.MessageType[t]]),this.myFilterButtonsBackgrounds[PP.ConsoleVRWidget.MessageType[t]].scale(this._mySetup.myButtonBackgroundScale),this.myFilterButtonsTexts[PP.ConsoleVRWidget.MessageType[t]].setTranslationLocal(this._mySetup.myButtonTextPosition),this.myFilterButtonsTexts[PP.ConsoleVRWidget.MessageType[t]].scale(this._mySetup.myButtonTextScale),this.myFilterButtonsCursorTargets[PP.ConsoleVRWidget.MessageType[t]].setTranslationLocal(this._mySetup.myButtonCursorTargetPosition);this.myClearButtonPanel.setTranslationLocal(this._mySetup.myClearButtonPosition),this.myClearButtonBackground.scale(this._mySetup.myButtonBackgroundScale),this.myClearButtonText.setTranslationLocal(this._mySetup.myButtonTextPosition),this.myClearButtonText.scale(this._mySetup.myButtonTextScale),this.myClearButtonCursorTarget.setTranslationLocal(this._mySetup.myButtonCursorTargetPosition),this.myUpButtonPanel.setTranslationLocal(this._mySetup.myUpButtonPosition),this.myUpButtonBackground.scale(this._mySetup.myButtonBackgroundScale),this.myUpButtonText.setTranslationLocal(this._mySetup.myButtonTextPosition),this.myUpButtonText.scale(this._mySetup.myButtonTextScale),this.myUpButtonCursorTarget.setTranslationLocal(this._mySetup.myButtonCursorTargetPosition),this.myDownButtonPanel.setTranslationLocal(this._mySetup.myDownButtonPosition),this.myDownButtonBackground.scale(this._mySetup.myButtonBackgroundScale),this.myDownButtonText.setTranslationLocal(this._mySetup.myButtonTextPosition),this.myDownButtonText.scale(this._mySetup.myButtonTextScale),this.myDownButtonCursorTarget.setTranslationLocal(this._mySetup.myButtonCursorTargetPosition)}_setPointerTransform(){this.myPointerCursorTarget.setTranslationLocal(this._mySetup.myPointerCursorTargetPosition)}_addComponents(){this._addMessagesComponents(),this._addButtonsComponents(),this._addPointerComponents()}_addMessagesComponents(){let t=this.myMessagesBackground.addComponent("mesh");t.mesh=this._myPlaneMesh,t.material=this._myAdditionalSetup.myPlaneMaterial.clone(),t.material.color=this._mySetup.myBackgroundColor,this.myMessagesTextComponents=[];for(let i in PP.ConsoleVRWidget.MessageType){let o=this.myMessagesTexts[PP.ConsoleVRWidget.MessageType[i]].addComponent("text");o.alignment=this._mySetup.myMessagesTextAlignment,o.justification=this._mySetup.myMessagesTextJustification,o.material=this._myAdditionalSetup.myTextMaterial.clone(),o.material.color=this._mySetup.myMessagesTextColors[PP.ConsoleVRWidget.MessageType[i]],o.material.outlineColor=this._mySetup.myMessagesTextOutlineColors[PP.ConsoleVRWidget.MessageType[i]],o.material.outlineRange=this._mySetup.myMessagesTextOutlineRange,o.text=this._mySetup.myMessagesTextStartString,this.myMessagesTextComponents[PP.ConsoleVRWidget.MessageType[i]]=o}this.myNotifyIconBackgroundComponent=this.myNotifyIconBackground.addComponent("mesh"),this.myNotifyIconBackgroundComponent.mesh=this._myPlaneMesh,this.myNotifyIconBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myNotifyIconBackgroundComponent.material.color=this._mySetup.myNotifyIconColor,this.myNotifyIconCursorTargetComponent=this.myNotifyIconCursorTarget.addComponent("cursor-target"),this.myNotifyIconCollisionComponent=this.myNotifyIconCursorTarget.addComponent("collision"),this.myNotifyIconCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myNotifyIconCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myNotifyIconCollisionComponent.extents=this._mySetup.myNotifyIconCollisionExtents}_addButtonsComponents(){this.myFilterButtonsBackgroundComponents=[],this.myFilterButtonsTextComponents=[],this.myFilterButtonsCursorTargetComponents=[],this.myFilterButtonsCollisionComponents=[];for(let t in PP.ConsoleVRWidget.MessageType){let i=this.myFilterButtonsBackgrounds[PP.ConsoleVRWidget.MessageType[t]].addComponent("mesh");i.mesh=this._myPlaneMesh,i.material=this._myAdditionalSetup.myPlaneMaterial.clone(),i.material.color=this._mySetup.myBackgroundColor;let o=this.myFilterButtonsTexts[PP.ConsoleVRWidget.MessageType[t]].addComponent("text");this._setupButtonTextComponent(o),o.material.color=this._mySetup.myFilterButtonsTextColors[PP.ConsoleVRWidget.MessageType[t]],o.material.outlineColor=this._mySetup.myFilterButtonsTextOutlineColors[PP.ConsoleVRWidget.MessageType[t]],o.text=this._mySetup.myFilterButtonsTextLabel[PP.ConsoleVRWidget.MessageType[t]];let n=this.myFilterButtonsCursorTargets[PP.ConsoleVRWidget.MessageType[t]].addComponent("cursor-target"),s=this.myFilterButtonsCursorTargets[PP.ConsoleVRWidget.MessageType[t]].addComponent("collision");s.collider=this._mySetup.myButtonsCollisionCollider,s.group=1<<this._mySetup.myButtonsCollisionGroup,s.extents=this._mySetup.myButtonsCollisionExtents,this.myFilterButtonsBackgroundComponents[PP.ConsoleVRWidget.MessageType[t]]=i,this.myFilterButtonsTextComponents[PP.ConsoleVRWidget.MessageType[t]]=o,this.myFilterButtonsCursorTargetComponents[PP.ConsoleVRWidget.MessageType[t]]=n,this.myFilterButtonsCollisionComponents[PP.ConsoleVRWidget.MessageType[t]]=s}{let t=this.myClearButtonBackground.addComponent("mesh");t.mesh=this._myPlaneMesh,t.material=this._myAdditionalSetup.myPlaneMaterial.clone(),t.material.color=this._mySetup.myBackgroundColor;let i=this.myClearButtonText.addComponent("text");this._setupButtonTextComponent(i),i.text=this._mySetup.myClearButtonTextLabel;let o=this.myClearButtonCursorTarget.addComponent("cursor-target"),n=this.myClearButtonCursorTarget.addComponent("collision");n.collider=this._mySetup.myButtonsCollisionCollider,n.group=1<<this._mySetup.myButtonsCollisionGroup,n.extents=this._mySetup.myButtonsCollisionExtents,this.myClearButtonBackgroundComponent=t,this.myClearButtonTextComponent=i,this.myClearButtonCursorTargetComponent=o,this.myClearButtonCollisionComponent=n}{let t=this.myUpButtonBackground.addComponent("mesh");t.mesh=this._myPlaneMesh,t.material=this._myAdditionalSetup.myPlaneMaterial.clone(),t.material.color=this._mySetup.myBackgroundColor;let i=this.myUpButtonText.addComponent("text");this._setupButtonTextComponent(i),i.text=this._mySetup.myUpButtonTextLabel;let o=this.myUpButtonCursorTarget.addComponent("cursor-target"),n=this.myUpButtonCursorTarget.addComponent("collision");n.collider=this._mySetup.myButtonsCollisionCollider,n.group=1<<this._mySetup.myButtonsCollisionGroup,n.extents=this._mySetup.myButtonsCollisionExtents,this.myUpButtonBackgroundComponent=t,this.myUpButtonTextComponent=i,this.myUpButtonCursorTargetComponent=o,this.myUpButtonCollisionComponent=n}{let t=this.myDownButtonBackground.addComponent("mesh");t.mesh=this._myPlaneMesh,t.material=this._myAdditionalSetup.myPlaneMaterial.clone(),t.material.color=this._mySetup.myBackgroundColor;let i=this.myDownButtonText.addComponent("text");this._setupButtonTextComponent(i),i.text=this._mySetup.myDownButtonTextLabel;let o=this.myDownButtonCursorTarget.addComponent("cursor-target"),n=this.myDownButtonCursorTarget.addComponent("collision");n.collider=this._mySetup.myButtonsCollisionCollider,n.group=1<<this._mySetup.myButtonsCollisionGroup,n.extents=this._mySetup.myButtonsCollisionExtents,this.myDownButtonBackgroundComponent=t,this.myDownButtonTextComponent=i,this.myDownButtonCursorTargetComponent=o,this.myDownButtonCollisionComponent=n}}_addPointerComponents(){this.myPointerCursorTargetComponent=this.myPointerCursorTarget.addComponent("cursor-target"),this.myPointerCursorTargetComponent.isSurface=!0;let t=this.myPointerCursorTarget.addComponent("collision");t.collider=this._mySetup.myPointerCollisionCollider,t.group=1<<this._mySetup.myPointerCollisionGroup,t.extents=this._mySetup.myPointerCollisionExtents,this.myPointerCollisionComponent=t}_setupButtonTextComponent(t){t.alignment=this._mySetup.myTextAlignment,t.justification=this._mySetup.myTextJustification,t.material=this._myAdditionalSetup.myTextMaterial.clone(),t.material.outlineRange=this._mySetup.myTextOutlineRange,t.material.color=this._mySetup.myTextColor,t.material.outlineColor=this._mySetup.myTextOutlineColor,t.text=""}}});var Ai=S(()=>{PP.ConsoleVRWidget=class{constructor(){this._myWidgetFrame=new PP.WidgetFrame("C",0),this._myWidgetFrame.registerWidgetVisibleChangedEventListener(this,this._widgetVisibleChanged.bind(this)),this._mySetup=new PP.ConsoleVRWidgetSetup,this._myAdditionalSetup=null,this._myUI=new PP.ConsoleVRWidgetUI,this._myMessages=[],this._myOldBrowserConsole=[],this._myOldConsoleVR=[],this._myTypeFilters=[];for(let t in PP.ConsoleVRWidget.MessageType)this._myTypeFilters[PP.ConsoleVRWidget.MessageType[t]]=!1;this._myScrollUp=!1,this._myScrollDown=!1,this._myScrollOffset=0,this._myScrollTimer=0,this._myScrollThumbstickTimer=0,this._myPulseTimer=0,this._myGamepadScrollActive=!0,this._mySetup.myGamepadScrollOnlyOnHover&&(this._myGamepadScrollActive=!1)}start(t,i){this._myLeftGamepad=PP.myLeftGamepad,this._myRightGamepad=PP.myRightGamepad,this._myAdditionalSetup=i,this._myWidgetFrame.start(t,i),this._myUI.build(this._myWidgetFrame.getWidgetObject(),this._mySetup,i),this._myUI.setVisible(this._myWidgetFrame.myIsWidgetVisible),this._setNotifyIconActive(!1),this._addListeners(),this._overrideConsolesFunctions()}_overrideConsolesFunctions(){this._myOldBrowserConsole[PP.ConsoleVRWidget.ConsoleFunction.LOG]=console.log,this._myOldBrowserConsole[PP.ConsoleVRWidget.ConsoleFunction.ERROR]=console.error,this._myOldBrowserConsole[PP.ConsoleVRWidget.ConsoleFunction.WARN]=console.warn,this._myOldBrowserConsole[PP.ConsoleVRWidget.ConsoleFunction.INFO]=console.info,this._myOldBrowserConsole[PP.ConsoleVRWidget.ConsoleFunction.DEBUG]=console.debug,this._myOldBrowserConsole[PP.ConsoleVRWidget.ConsoleFunction.ASSERT]=console.assert,this._myOldBrowserConsoleClear=console.clear,this._myAdditionalSetup.myOverrideBrowserConsole&&(console.log=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.LOG,PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE),console.error=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.ERROR,PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE),console.warn=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.WARN,PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE),console.info=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.INFO,PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE),console.debug=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.DEBUG,PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE),console.assert=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.ASSERT,PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE),console.clear=this._clearConsole.bind(this,!0,PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE),window.addEventListener("error",function(t){this._consolePrint(PP.ConsoleVRWidget.ConsoleFunction.ERROR,PP.ConsoleVRWidget.Sender.WINDOW,"Uncaught",t.error.stack)}.bind(this)),window.addEventListener("unhandledrejection",function(t){this._consolePrint(PP.ConsoleVRWidget.ConsoleFunction.ERROR,PP.ConsoleVRWidget.Sender.WINDOW,"Uncaught (in promise)",t.reason)}.bind(this))),this._myOldConsoleVR[PP.ConsoleVRWidget.ConsoleFunction.LOG]=PP.ConsoleVR.log,this._myOldConsoleVR[PP.ConsoleVRWidget.ConsoleFunction.ERROR]=PP.ConsoleVR.error,this._myOldConsoleVR[PP.ConsoleVRWidget.ConsoleFunction.WARN]=PP.ConsoleVR.warn,this._myOldConsoleVR[PP.ConsoleVRWidget.ConsoleFunction.INFO]=PP.ConsoleVR.info,this._myOldConsoleVR[PP.ConsoleVRWidget.ConsoleFunction.DEBUG]=PP.ConsoleVR.debug,this._myOldConsoleVR[PP.ConsoleVRWidget.ConsoleFunction.ASSERT]=PP.ConsoleVR.assert,this._myOldConsoleVRClear=PP.ConsoleVR.clear,PP.ConsoleVR.log=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.LOG,PP.ConsoleVRWidget.Sender.CONSOLE_VR),PP.ConsoleVR.error=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.ERROR,PP.ConsoleVRWidget.Sender.CONSOLE_VR),PP.ConsoleVR.warn=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.WARN,PP.ConsoleVRWidget.Sender.CONSOLE_VR),PP.ConsoleVR.info=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.INFO,PP.ConsoleVRWidget.Sender.CONSOLE_VR),PP.ConsoleVR.debug=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.DEBUG,PP.ConsoleVRWidget.Sender.CONSOLE_VR),PP.ConsoleVR.assert=this._consolePrint.bind(this,PP.ConsoleVRWidget.ConsoleFunction.ASSERT,PP.ConsoleVRWidget.Sender.CONSOLE_VR),PP.ConsoleVR.clear=this._clearConsole.bind(this,!0,PP.ConsoleVRWidget.Sender.CONSOLE_VR)}update(t){this._myWidgetFrame.update(t),this._myWidgetFrame.myIsWidgetVisible&&this._updateScroll(t),this._updateGamepadsExtraActions(t)}_updateText(t){let i="";if(!this._myTypeFilters[t]){let o=0,n=this._myMessages.length-1,s=Math.round(this._myScrollOffset);for(;n>=0&&o<this._mySetup.myMaxLines;){let a=this._myMessages[n];if(this._myTypeFilters[a.myType]){n-=1;continue}let l=a.myLines.length,m=0;if(s>0){let r=0;n!=this._myMessages.length-1&&(r=this._mySetup.myLinesBetweenMessages),s>=l+r?(s-=l+r,m=l+r):(m=s,s=0)}if(n!=this._myMessages.length-1){let r=this._mySetup.myLinesBetweenMessages-Math.max(this._mySetup.myLinesBetweenMessages-m,0),u=this._mySetup.myLinesBetweenMessages-r;o+u>this._mySetup.myMaxLines&&(u=this._myMaxLines-o);for(let c=0;c<u;c++)i=`
`.concat(i);o+=u,m-=r}let h=l-m;if(o+h>this._mySetup.myMaxLines&&(h=this._mySetup.myMaxLines-o),h>0)if(a.myType==t)i=a.myLines.slice(l-h-m,l-m).join(`
`).concat(`
`).concat(i),o+=h;else{for(let r=0;r<h;r++)i=`
`.concat(i);o+=h}n-=1}}i=this._mySetup.myMessagesTextStartString.concat(i),this._myUI.myMessagesTextComponents[t].text=i}_consolePrint(t,i,...o){if(t!=PP.ConsoleVRWidget.ConsoleFunction.ASSERT||o.length>0&&!o[0]){let n=this._argsToMessage(t,...o);this._addMessage(n),this._myMessages.length>=this._mySetup.myMaxMessages+this._mySetup.myMaxMessagesDeletePad&&(this._myMessages=this._myMessages.slice(this._myMessages.length-this._mySetup.myMaxMessages),this._clampScrollOffset()),this._updateAllTexts(),this._pulseGamepad()}switch(i){case PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE:this._myOldBrowserConsole[t].apply(console,o);break;case PP.ConsoleVRWidget.Sender.CONSOLE_VR:this._myOldConsoleVR[t].apply(PP.ConsoleVR,o);break;default:break}}_argsToMessage(t,...i){t==PP.ConsoleVRWidget.ConsoleFunction.ASSERT&&(i=i.slice(1),i.splice(0,0,this._mySetup.myAssertStartString));let o=this._consoleFunctionToMessageType(t),n=this._formatArgs(...i),s=this._splitLongLines(n);return o==PP.ConsoleVRWidget.MessageType.DEBUG?o=PP.ConsoleVRWidget.MessageType.LOG:(o==PP.ConsoleVRWidget.MessageType.EXCEPTION||o==PP.ConsoleVRWidget.MessageType.ASSERT)&&(o=PP.ConsoleVRWidget.MessageType.ERROR),new PP.ConsoleVRWidget.Message(o,s)}_consoleFunctionToMessageType(t){let i=PP.ConsoleVRWidget.MessageType.LOG;return t<PP.ConsoleVRWidget.ConsoleFunction.DEBUG?i=t:t==PP.ConsoleVRWidget.ConsoleFunction.DEBUG?i=PP.ConsoleVRWidget.MessageType.LOG:i=PP.ConsoleVRWidget.MessageType.ERROR,i}_formatArgs(...t){let i=[];for(let n=0;n<t.length;n++)i.push(this._stringifyItem(t[n]));return i.join(" ")}_stringifyItem(t){if(typeof t=="object"){let i=null,o=this._isArray(t)?0:2;try{if(!this._isFloat32Array(t))i=JSON.stringify(t,null,o);else{let n=[];for(let s=0;s<t.length;s++)n[s]=t[s];i=JSON.stringify(n,null,o)}}catch{let s=new WeakSet;i=JSON.stringify(t,function(a,l){if(typeof l=="object"&&l!==null){if(s.has(l))return"<stringify error: object already stringified>";s.add(l)}return l},o)}return this._isArray(t)&&(i=i.split(",").join(", ")),i}return t}_splitLongLines(t){let i=t.split(`
`),o=[];for(let n=0;n<i.length;n++){let s=i[n];if(s.length>this._mySetup.myMaxCharactersPerLine){let a=this._getSpacesAtStart(s),l=this._mySetup.myTabString.concat(a),m=0;for(;s.length>this._mySetup.myMaxCharactersPerLine&&m<this._mySetup.myMaxLineSplits;){let h=s.substr(0,this._mySetup.myMaxCharactersPerLine-1),r=s.substr(this._mySetup.myMaxCharactersPerLine-1);r=l.concat(r),o.push(h),s=r,m++}o.push(s)}else o.push(s)}return o}_getSpacesAtStart(t){let i="",o=0;for(;o<t.length&&t[o]==" ";)i=i.concat(" "),o++;return i}_addMessage(t){let i=!1;if(this._myMessages.length>0){let o=this._myMessages[this._myMessages.length-1];o.hasSameInfo(t)&&(o.increaseCount(),i=!0)}i||this._myMessages.push(t),this._adjustScrollOffsetAfterMessageAdded(t,i),this._updateNotifyIcon(t)}_adjustScrollOffsetAfterMessageAdded(t,i){!i&&!this._myTypeFilters[t.myType]&&this._myScrollOffset>0&&(this._myScrollOffset+=t.myLines.length+this._mySetup.myLinesBetweenMessages)}_updateAllTexts(){if(this._myWidgetFrame.myIsWidgetVisible)for(let t in PP.ConsoleVRWidget.MessageType)this._updateText(PP.ConsoleVRWidget.MessageType[t])}_updateNotifyIcon(t){!this._myTypeFilters[t.myType]&&this._myScrollOffset>0&&this._setNotifyIconActive(!0)}_updateScroll(t){if(this._myScrollUp)for(this._myScrollTimer+=t;this._myScrollTimer>this._mySetup.myScrollDelay;)this._myScrollTimer-=this._mySetup.myScrollDelay,this._myScrollOffset+=this._mySetup.myScrollAmount;else if(this._myScrollDown)for(this._myScrollTimer+=t;this._myScrollTimer>this._mySetup.myScrollDelay;)this._myScrollTimer-=this._mySetup.myScrollDelay,this._myScrollOffset-=this._mySetup.myScrollAmount;this._clampScrollOffset(),(this._myScrollUp||this._myScrollDown)&&this._updateAllTexts(),this._myScrollOffset==0&&this._setNotifyIconActive(!1)}_clampScrollOffset(){let t=this._getMaxScrollOffset();this._myScrollOffset=Math.min(Math.max(this._myScrollOffset,0),t)}_getMaxScrollOffset(){return Math.max(this._getLinesCount()-this._mySetup.myMaxLines,0)}_getLinesCount(){let t=0;for(let i of this._myMessages)this._myTypeFilters[i.myType]||(t+=i.myLines.length+this._mySetup.myLinesBetweenMessages);return t-=this._mySetup.myLinesBetweenMessages,t=Math.max(t,0),t}_addListeners(){let t=this._myUI;for(let i in PP.ConsoleVRWidget.MessageType){let o=t.myFilterButtonsCursorTargetComponents[PP.ConsoleVRWidget.MessageType[i]],n=t.myFilterButtonsBackgroundComponents[PP.ConsoleVRWidget.MessageType[i]].material,s=t.myFilterButtonsTextComponents[PP.ConsoleVRWidget.MessageType[i]].material;o.addTripleClickFunction(this._resetFilters.bind(this,PP.ConsoleVRWidget.MessageType[i])),o.addDoubleClickFunction(this._filterAllButOne.bind(this,PP.ConsoleVRWidget.MessageType[i],s)),o.addClickFunction(this._toggleFilter.bind(this,PP.ConsoleVRWidget.MessageType[i],s)),o.addHoverFunction(this._filterHover.bind(this,PP.ConsoleVRWidget.MessageType[i],n)),o.addUnHoverFunction(this._filterUnHover.bind(this,PP.ConsoleVRWidget.MessageType[i],n))}{let i=t.myClearButtonCursorTargetComponent,o=t.myClearButtonBackgroundComponent.material;i.addClickFunction(this._clearConsole.bind(this)),i.addHoverFunction(this._genericHover.bind(this,o)),i.addUnHoverFunction(this._genericUnHover.bind(this,o))}{let i=t.myUpButtonCursorTargetComponent,o=t.myUpButtonBackgroundComponent.material;i.addDoubleClickFunction(this._instantScrollUp.bind(this,!0)),i.addDownFunction(this._setScrollUp.bind(this,!0)),i.addUpFunction(this._setScrollUp.bind(this,!1)),i.addUnHoverFunction(this._setScrollUp.bind(this,!1)),i.addHoverFunction(this._genericHover.bind(this,o)),i.addUnHoverFunction(this._genericUnHover.bind(this,o))}{let i=t.myDownButtonCursorTargetComponent,o=t.myDownButtonBackgroundComponent.material;i.addDoubleClickFunction(this._instantScrollDown.bind(this)),i.addDownFunction(this._setScrollDown.bind(this,!0)),i.addUpFunction(this._setScrollDown.bind(this,!1)),i.addUnHoverFunction(this._setScrollDown.bind(this,!1)),i.addHoverFunction(this._genericHover.bind(this,o)),i.addUnHoverFunction(this._genericUnHover.bind(this,o))}{let i=t.myNotifyIconCursorTargetComponent,o=t.myNotifyIconBackgroundComponent.material;i.addClickFunction(this._instantScrollDown.bind(this)),i.addHoverFunction(this._genericHover.bind(this,o)),i.addUnHoverFunction(this._notifyIconUnHover.bind(this))}t.myPointerCursorTargetComponent.addHoverFunction(this._setGamepadScrollActive.bind(this,!0)),t.myPointerCursorTargetComponent.addUnHoverFunction(this._setGamepadScrollActive.bind(this,!1))}_resetFilters(t){if(this._myWidgetFrame.myIsWidgetVisible){for(let i in PP.ConsoleVRWidget.MessageType){let o=this._myUI.myFilterButtonsBackgroundComponents[PP.ConsoleVRWidget.MessageType[i]].material,n=this._myUI.myFilterButtonsTextComponents[PP.ConsoleVRWidget.MessageType[i]].material;this._myTypeFilters[PP.ConsoleVRWidget.MessageType[i]]=!1,n.color=this._mySetup.myMessageTypeColors[PP.ConsoleVRWidget.MessageType[i]],PP.ConsoleVRWidget.MessageType[i]!=t&&(o.color=this._mySetup.myBackgroundColor)}this._clampScrollOffset(),this._updateAllTexts()}}_filterAllButOne(t){if(this._myWidgetFrame.myIsWidgetVisible){for(let i in PP.ConsoleVRWidget.MessageType){let o=this._myUI.myFilterButtonsBackgroundComponents[PP.ConsoleVRWidget.MessageType[i]].material,n=this._myUI.myFilterButtonsTextComponents[PP.ConsoleVRWidget.MessageType[i]].material;PP.ConsoleVRWidget.MessageType[i]!=t?(this._myTypeFilters[PP.ConsoleVRWidget.MessageType[i]]=!0,o.color=this._mySetup.myFilterButtonDisabledBackgroundColor,n.color=this._mySetup.myFilterButtonDisabledTextColor):(this._myTypeFilters[PP.ConsoleVRWidget.MessageType[i]]=!1,n.color=this._mySetup.myMessageTypeColors[t])}this._clampScrollOffset(),this._updateAllTexts()}}_toggleFilter(t,i){this._myWidgetFrame.myIsWidgetVisible&&(this._myTypeFilters[t]=!this._myTypeFilters[t],this._myTypeFilters[t]?i.color=this._mySetup.myFilterButtonDisabledTextColor:i.color=this._mySetup.myMessageTypeColors[t],this._clampScrollOffset(),this._updateAllTexts())}_clearConsole(t=!1,i=null){if(this._myWidgetFrame.myIsWidgetVisible||t)if(this._myMessages=[],this._clampScrollOffset(),this._updateAllTexts(),t)switch(i){case PP.ConsoleVRWidget.Sender.BROWSER_CONSOLE:this._myOldBrowserConsoleClear.apply(console);break;case PP.ConsoleVRWidget.Sender.CONSOLE_VR:this._myOldConsoleVRClear.apply(PP.ConsoleVR);break;default:break}else this._mySetup.myClearBrowserConsoleWhenClearPressed&&PP.ConsoleVR._myRealClear()}_setScrollUp(t){(this._myWidgetFrame.myIsWidgetVisible||!t)&&(t&&(this._myScrollTimer=0),this._myScrollUp=t)}_setScrollDown(t){(this._myWidgetFrame.myIsWidgetVisible||!t)&&(t&&(this._myScrollTimer=0),this._myScrollDown=t)}_instantScrollUp(){this._myWidgetFrame.myIsWidgetVisible&&(this._myScrollOffset=this._getMaxScrollOffset(),this._updateAllTexts())}_instantScrollDown(){this._myWidgetFrame.myIsWidgetVisible&&(this._myScrollOffset=0,this._setNotifyIconActive(!1),this._updateAllTexts())}_setNotifyIconActive(t){this._myUI.myNotifyIconPanel.pp_setActiveHierarchy(t&&this._myWidgetFrame.myIsWidgetVisible)}_notifyIconUnHover(){let t=this._myUI.myNotifyIconBackgroundComponent.material;t.color=this._mySetup.myNotifyIconColor}_filterHover(t,i){this._genericHover(i)}_filterUnHover(t,i){this._myTypeFilters[t]?i.color=this._mySetup.myFilterButtonDisabledBackgroundColor:i.color=this._mySetup.myBackgroundColor}_genericHover(t){t.color=this._mySetup.myButtonHoverColor}_genericUnHover(t){t.color=this._mySetup.myBackgroundColor}_updateGamepadsExtraActions(t){this._myLeftGamepad&&this._myRightGamepad&&((this._myLeftGamepad.getButtonInfo(PP.ButtonType.THUMBSTICK).isPressStart()&&this._myRightGamepad.getButtonInfo(PP.ButtonType.THUMBSTICK).myIsPressed||this._myRightGamepad.getButtonInfo(PP.ButtonType.THUMBSTICK).isPressStart()&&this._myLeftGamepad.getButtonInfo(PP.ButtonType.THUMBSTICK).myIsPressed)&&this._toggleVisibility(),this._myPulseTimer=Math.max(this._myPulseTimer-t,0),this._updateScrollWithThumbstick(t))}_toggleVisibility(){this._myWidgetFrame.toggleVisibility()}_widgetVisibleChanged(t){this._myUI.setVisible(t),t&&this._updateAllTexts()}_updateScrollWithThumbstick(t){if(this._myWidgetFrame.myIsWidgetVisible&&this._myGamepadScrollActive){let i=[0,0];if(this._mySetup.myScrollThumbstickHandedness==PP.ToolHandedness.LEFT?i=this._myLeftGamepad.getAxesInfo().myAxes:this._mySetup.myScrollThumbstickHandedness==PP.ToolHandedness.RIGHT&&(i=this._myRightGamepad.getAxesInfo().myAxes),Math.abs(i[1])>this._mySetup.myScrollThumbstickMinThreshold){for(this._myScrollThumbstickTimer+=t;this._myScrollThumbstickTimer>this._mySetup.myScrollThumbstickDelay;){this._myScrollThumbstickTimer-=this._mySetup.myScrollThumbstickDelay;let o=(Math.abs(i[1])-this._mySetup.myScrollThumbstickMinThreshold)/(1-this._mySetup.myScrollThumbstickMinThreshold);this._myScrollOffset+=Math.sign(i[1])*o*this._mySetup.myScrollThumbstickAmount}this._clampScrollOffset(),this._updateAllTexts()}else this._myScrollThumbstickTimer=0}}_pulseGamepad(){if(this._myLeftGamepad&&this._myRightGamepad){let t=this._myAdditionalSetup.myPulseOnNewMessage;(t==PP.ConsoleVRWidget.PulseOnNewMessage.ALWAYS||!this._myWidgetFrame.myIsWidgetVisible&&t==PP.ConsoleVRWidget.PulseOnNewMessage.WHEN_HIDDEN)&&this._myPulseTimer==0&&(this._myAdditionalSetup.myHandedness==PP.ToolHandedness.RIGHT?this._myRightGamepad.pulse(this._mySetup.myPulseIntensity,this._mySetup.myPulseDuration):this._myLeftGamepad.pulse(this._mySetup.myPulseIntensity,this._mySetup.myPulseDuration),this._myPulseTimer=this._mySetup.myPulseDelay)}}_isArray(t){return Array.isArray(t)||this._isFloat32Array(t)}_isFloat32Array(t){return t&&t.constructor&&t.constructor.name=="Float32Array"}_setGamepadScrollActive(t){this._myGamepadScrollActive=t,this._mySetup.myGamepadScrollOnlyOnHover||(this._myGamepadScrollActive=!0)}};PP.ConsoleVRWidget.ConsoleFunction={INFO:0,WARN:1,ERROR:2,LOG:3,DEBUG:4,ASSERT:5};PP.ConsoleVRWidget.Sender={BROWSER_CONSOLE:0,CONSOLE_VR:1,WINDOW:2};PP.ConsoleVRWidget.PulseOnNewMessage={NEVER:0,ALWAYS:1,WHEN_HIDDEN:2};PP.ConsoleVRWidget.MessageType={INFO:0,WARN:1,ERROR:2,LOG:3};PP.ConsoleVRWidget.Message=class{constructor(t,i){this.myType=t,this.myLines=i,this._myOriginalText=i.join(`
`),this._myMessagesCount=1}hasSameInfo(t){return this._myOriginalText==t._myOriginalText&&this.myType==t.myType}increaseCount(){this._myMessagesCount+=1;let t="(x".concat(this._myMessagesCount).concat(") "),i=this._myOriginalText.slice(0);i=t.concat(i),this.myLines=i.split(`
`)}};PP.ConsoleVR={_myRealLog:console.log,_myRealError:console.error,_myRealWarn:console.warn,_myRealInfo:console.info,_myRealDebug:console.debug,_myRealAssert:console.assert,_myRealClear:console.clear,_myForwardToBrowserConsole:!0,log:function(...e){this._myForwardToBrowserConsole&&this._myRealLog.apply(console,e)},error:function(...e){this._myForwardToBrowserConsole&&this._myRealError.apply(console,e)},warn:function(...e){this._myForwardToBrowserConsole&&this._myRealWarn.apply(console,e)},info:function(...e){this._myForwardToBrowserConsole&&this._myRealInfo.apply(console,e)},debug:function(...e){this._myForwardToBrowserConsole&&this._myRealDebug.apply(console,e)},assert:function(...e){this._myForwardToBrowserConsole&&this._myRealAssert.apply(console,e)},clear:function(){this._myForwardToBrowserConsole&&this._myRealClear.apply(console)},setForwardToBrowserConsole:function(e){this._myForwardToBrowserConsole=e},isForwardToBrowserConsole:function(){return this._myForwardToBrowserConsole}}});var Vi=S(()=>{WL.registerComponent("pp-console-vr",{_myHandedness:{type:WL.Type.Enum,values:["none","left","right"],default:"none"},_myOverrideBrowserConsole:{type:WL.Type.Bool,default:!0},_myShowOnStart:{type:WL.Type.Bool,default:!1},_myShowVisibilityButton:{type:WL.Type.Bool,default:!1},_myPulseOnNewMessage:{type:WL.Type.Enum,values:["never","always","when hidden"],default:"never"},_myPlaneMaterial:{type:WL.Type.Material,default:null},_myTextMaterial:{type:WL.Type.Material,default:null}},{init:function(){this._myWidget=new PP.ConsoleVRWidget},start:function(){let e={};e.myHandedness=[null,"left","right"][this._myHandedness],e.myOverrideBrowserConsole=this._myOverrideBrowserConsole,e.myShowOnStart=this._myShowOnStart,e.myShowVisibilityButton=this._myShowVisibilityButton,e.myPulseOnNewMessage=this._myPulseOnNewMessage,e.myPlaneMaterial=this._myPlaneMaterial,e.myTextMaterial=this._myTextMaterial,this._myWidget.start(this.object,e)},update:function(e){this._myWidget.update(e)}})});var Li=S(()=>{PP.EasyObjectTuner=class{constructor(t,i,o,n){this._myObject=t,this._myUseTuneTarget=n,this._mySetAsDefault=o,this._myEasyObject=this._myObject,this._myUseTuneTarget&&(this._myEasyObject=PP.myEasyTuneTarget),this._myPrevEasyObject=null;let s=this._getVariableNamePrefix();i==""?this._myEasyTuneVariableName=s.concat(this._myObject.objectId):this._myEasyTuneVariableName=s.concat(i)}start(){let t=this._createEasyTuneVariable(this._myEasyTuneVariableName);PP.myEasyTuneVariables.add(t),this._mySetAsDefault&&PP.setEasyTuneWidgetActiveVariable(this._myEasyTuneVariableName)}update(t){if(PP.myEasyTuneVariables.isActive(this._myEasyTuneVariableName)){if(this._myUseTuneTarget&&(this._myEasyObject=PP.myEasyTuneTarget),this._myPrevEasyObject!=this._myEasyObject)if(this._myPrevEasyObject=this._myEasyObject,this._myEasyObject){let i=this._getObjectValue(this._myEasyObject);PP.myEasyTuneVariables.set(this._myEasyTuneVariableName,i,!0)}else{let i=this._getDefaultValue();PP.myEasyTuneVariables.set(this._myEasyTuneVariableName,i,!0)}this._myEasyObject&&this._updateObjectValue(this._myEasyObject,PP.myEasyTuneVariables.get(this._myEasyTuneVariableName))}}updateVariableValue(t){PP.myEasyTuneVariables.set(this._myEasyTuneVariableName,t)}}});var Ri=S(()=>{WL.registerComponent("pp-easy-light-attenuation",{_myVariableName:{type:WL.Type.String,default:""},_mySetAsDefault:{type:WL.Type.Bool,default:!1},_myUseTuneTarget:{type:WL.Type.Bool,default:!1}},{init:function(){this._myEasyObjectTuner=new PP.EasyLightAttenuation(this.object,this._myVariableName,this._mySetAsDefault,this._myUseTuneTarget)},start:function(){this._myEasyObjectTuner.start()},update:function(e){this._myEasyObjectTuner.update(e)}});PP.EasyLightAttenuation=class extends PP.EasyObjectTuner{constructor(t,i,o,n){super(t,i,o,n)}_getVariableNamePrefix(){return"Light Attenuation "}_createEasyTuneVariable(t){return new PP.EasyTuneNumber(t,this._getDefaultValue(),.01,3,0,1)}_getObjectValue(t){return this._getLightAttenuation(t)}_getDefaultValue(){return 0}_updateObjectValue(t,i){let o=i,n=t.pp_getComponent("light");n&&(n.color[3]=o)}_getLightAttenuation(t){let i=this._getDefaultValue(),o=t.pp_getComponent("light");return o&&(i=o.color[3]),i}}});var Di=S(()=>{WL.registerComponent("pp-easy-light-color",{_myVariableName:{type:WL.Type.String,default:""},_mySetAsDefault:{type:WL.Type.Bool,default:!1},_myUseTuneTarget:{type:WL.Type.Bool,default:!1},_myColorModel:{type:WL.Type.Enum,values:["rgb","hsv"]}},{init:function(){this._myEasyObjectTuner=new PP.EasyLightColor(this._myColorModel,this.object,this._myVariableName,this._mySetAsDefault,this._myUseTuneTarget)},start:function(){this._myEasyObjectTuner.start()},update:function(e){this._myEasyObjectTuner.update(e)}});PP.EasyLightColor=class extends PP.EasyObjectTuner{constructor(t,i,o,n,s){super(i,o,n,s),this._myColorModel=t}_getVariableNamePrefix(){let t=null;return this._myColorModel==0?t="Light RGB ":t="Light HSV ",t}_createEasyTuneVariable(t){return new PP.EasyTuneIntArray(t,this._getDefaultValue(),100,0,255)}_getObjectValue(t){let i=null,o=this._getLightColor(t);return o?this._myColorModel==0?i=PP.ColorUtils.rgbCodeToHuman(o):i=PP.ColorUtils.hsvCodeToHuman(PP.ColorUtils.rgbToHsv(o)):i=this._getDefaultValue(),i}_getDefaultValue(){return PP.vec3_create()}_updateObjectValue(t,i){let o=i;this._myColorModel==0?o=PP.ColorUtils.rgbHumanToCode(o):o=PP.ColorUtils.hsvToRgb(PP.ColorUtils.hsvHumanToCode(o));let n=t.pp_getComponent("light");if(n&&(n.color[0]=o[0],n.color[1]=o[1],n.color[2]=o[2],n.color[3]=n.color[3]),PP.myRightGamepad.getButtonInfo(PP.ButtonType.TOP_BUTTON).isPressStart()&&PP.myLeftGamepad.getButtonInfo(PP.ButtonType.TOP_BUTTON).myIsPressed||PP.myLeftGamepad.getButtonInfo(PP.ButtonType.TOP_BUTTON).isPressStart()&&PP.myRightGamepad.getButtonInfo(PP.ButtonType.TOP_BUTTON).myIsPressed){let s=PP.ColorUtils.color1To255(PP.ColorUtils.rgbToHsv(o)),a=PP.ColorUtils.color1To255(o);console.log("RGB:",a.vec_toString(0),"- HSV:",s.vec_toString(0))}}_getLightColor(t){let i=null,o=t.pp_getComponent("light");return o&&(i=o.color.slice(0,3)),i}}});var Ii=S(()=>{WL.registerComponent("pp-easy-mesh-color",{_myVariableName:{type:WL.Type.String,default:""},_myUseTuneTarget:{type:WL.Type.Bool,default:!1},_mySetAsDefault:{type:WL.Type.Bool,default:!1},_myColorModel:{type:WL.Type.Enum,values:["rgb","hsv"],default:"hsv"},_myColorType:{type:WL.Type.Enum,values:["color","diffuse color","ambient color","specular color","emissive color","fog color","ambient factor"],default:"color"}},{init:function(){this._myEasyObjectTuner=new PP.EasyMeshColor(this._myColorModel,this._myColorType,this.object,this._myVariableName,this._mySetAsDefault,this._myUseTuneTarget)},start:function(){this._myEasyObjectTuner.start()},update:function(e){this._myEasyObjectTuner.update(e)}});PP.EasyMeshColor=class extends PP.EasyObjectTuner{constructor(t,i,o,n,s,a){super(o,n,s,a),this._myColorModel=t,this._myColorType=i,this._myColorVariableNames=["color","diffuseColor","ambientColor","specularColor","emissiveColor","fogColor","ambientFactor"]}_getVariableNamePrefix(){let t=null;return this._myColorModel==0?t="Mesh RGB ":t="Mesh HSV ",t}_createEasyTuneVariable(t){return this._myColorType==6?new PP.EasyTuneNumberArray(t,this._getDefaultValue(),.1,3,0,1):new PP.EasyTuneIntArray(t,this._getDefaultValue(),100,0,255)}_getObjectValue(t){let i=null,o=this._getMeshMaterial(t);return o?this._myColorType!=6?(i=o[this._myColorVariableNames[this._myColorType]].pp_clone(),this._myColorModel==0?i=PP.ColorUtils.rgbCodeToHuman(i):i=PP.ColorUtils.hsvCodeToHuman(PP.ColorUtils.rgbToHsv(i))):i=[o[this._myColorVariableNames[this._myColorType]]]:i=this._getDefaultValue(),i}_getDefaultValue(){return this._myColorType==6?[0]:PP.vec4_create()}_updateObjectValue(t,i){let o=i;this._myColorType!=6&&(this._myColorModel==0?o=PP.ColorUtils.rgbHumanToCode(o):o=PP.ColorUtils.hsvToRgb(PP.ColorUtils.hsvHumanToCode(o)));let n=this._getMeshMaterial(t);if(n&&(n[this._myColorVariableNames[this._myColorType]]=o),this._myColorType!=6&&(PP.myRightGamepad.getButtonInfo(PP.ButtonType.TOP_BUTTON).isPressStart()&&PP.myLeftGamepad.getButtonInfo(PP.ButtonType.TOP_BUTTON).myIsPressed||PP.myLeftGamepad.getButtonInfo(PP.ButtonType.TOP_BUTTON).isPressStart()&&PP.myRightGamepad.getButtonInfo(PP.ButtonType.TOP_BUTTON).myIsPressed)){let s=PP.ColorUtils.color1To255(PP.ColorUtils.rgbToHsv(o)),a=PP.ColorUtils.color1To255(o);console.log("RGB:",a.vec_toString(0),"- HSV:",s.vec_toString(0))}}_getMeshMaterial(t){let i=null,o=t.pp_getComponentHierarchy("mesh");return o&&(i=o.material),i}}});var Ei=S(()=>{WL.registerComponent("pp-easy-scale",{_myVariableName:{type:WL.Type.String,default:""},_mySetAsDefault:{type:WL.Type.Bool,default:!1},_myUseTuneTarget:{type:WL.Type.Bool,default:!1},_myIsLocal:{type:WL.Type.Bool,default:!1},_myScaleAsOne:{type:WL.Type.Bool,default:!0}},{init:function(){this._myEasyObjectTuner=new PP.EasyScale(this._myIsLocal,this._myScaleAsOne,this.object,this._myVariableName,this._mySetAsDefault,this._myUseTuneTarget)},start:function(){this._myEasyObjectTuner.start()},update:function(e){this._myEasyObjectTuner.update(e)}});PP.EasyScale=class extends PP.EasyObjectTuner{constructor(t,i,o,n,s,a){super(o,n,s,a),this._myIsLocal=t,this._myScaleAsOne=i}_getVariableNamePrefix(){return"Scale "}_createEasyTuneVariable(t){return new PP.EasyTuneNumberArray(t,this._getDefaultValue(),1,3,.001,null,this._myScaleAsOne)}_getObjectValue(t){return this._myIsLocal?t.pp_getScaleLocal():t.pp_getScaleWorld()}_getDefaultValue(){return PP.vec3_create(1,1,1)}_updateObjectValue(t,i){this._myIsLocal?t.pp_setScaleLocal(i):t.pp_setScaleWorld(i)}}});var Oi=S(()=>{WL.registerComponent("pp-easy-set-tune-target-child-number",{_myVariableName:{type:WL.Type.String,default:""},_mySetAsDefault:{type:WL.Type.Bool,default:!1}},{init:function(){},start:function(){this._myEasyTuneVariableName="Target Child ",this._myVariableName==""?this._myEasyTuneVariableName=this._myEasyTuneVariableName.concat(this.object.objectId):this._myEasyTuneVariableName=this._myEasyTuneVariableName.concat(this._myVariableName);let e=this.object.pp_getChildren().length,t=1,i=e;e==0&&(t=0,i=0),PP.myEasyTuneVariables.add(new PP.EasyTuneInt(this._myEasyTuneVariableName,0,10,t,i)),this._mySetAsDefault&&PP.setEasyTuneWidgetActiveVariable(this._myEasyTuneVariableName),this._myCurrentChildIndex=-1,this._myCurrentChildrenCount=e},update:function(){if(PP.myEasyTuneVariables.isActive(this._myEasyTuneVariableName)){let e=this.object.pp_getChildren().length;if(e!=this._myCurrentChildrenCount){this._myCurrentChildrenCount=e;let i=1,o=e;e==0&&(i=0,o=0);let n=PP.myEasyTuneVariables.getEasyTuneVariable(this._myEasyTuneVariableName);n.setMin(i),n.setMax(o)}let t=PP.myEasyTuneVariables.get(this._myEasyTuneVariableName);t!=this._myCurrentChildIndex&&(t==0&&this._myCurrentChildIndex!=-1?PP.myEasyTuneTarget=null:t>0&&(PP.myEasyTuneTarget=this.object.pp_getChildren()[t-1]),this._myCurrentChildIndex=t)}}})});var Wi=S(()=>{WL.registerComponent("pp-easy-set-tune-target-grab",{},{init:function(){},start:function(){this._myGrabber=this.object.pp_getComponent("pp-grabber-hand")},update:function(){},_onRelease:function(e,t){PP.myEasyTuneTarget=t.object},_onGrab:function(e,t){},onActivate(){this._myGrabber.registerGrabEventListener(this,this._onGrab.bind(this)),this._myGrabber.registerThrowEventListener(this,this._onRelease.bind(this))},onDeactivate(){this._myGrabber.unregisterGrabEventListener(this),this._myGrabber.unregisterThrowEventListener(this)}})});var ki=S(()=>{WL.registerComponent("pp-easy-transform",{_myVariableName:{type:WL.Type.String,default:""},_mySetAsDefault:{type:WL.Type.Bool,default:!1},_myUseTuneTarget:{type:WL.Type.Bool,default:!1},_myIsLocal:{type:WL.Type.Bool,default:!1},_myScaleAsOne:{type:WL.Type.Bool,default:!0}},{init:function(){this._myEasyObjectTuner=new PP.EasyTransform(this._myIsLocal,this._myScaleAsOne,this.object,this._myVariableName,this._mySetAsDefault,this._myUseTuneTarget)},start:function(){this._myEasyObjectTuner.start()},update:function(e){this._myEasyObjectTuner.update(e)}});PP.EasyTransform=class extends PP.EasyObjectTuner{constructor(t,i,o,n,s,a){super(o,n,s,a),this._myIsLocal=t,this._myScaleAsOne=i}_getVariableNamePrefix(){return"Transform "}_createEasyTuneVariable(t){return new PP.EasyTuneTransform(t,this._getDefaultValue(),this._myScaleAsOne)}_getObjectValue(t){return this._myIsLocal?t.pp_getTransformLocal():t.pp_getTransformWorld()}_getDefaultValue(){return PP.mat4_create()}_updateObjectValue(t,i){this._myIsLocal?t.pp_setTransformLocal(i):t.pp_setTransformWorld(i)}}});var Fi=S(()=>{PP.EasyTuneBoolArrayWidget=class{constructor(t,i){this._myGamepad=i,this._mySetup=new PP.EasyTuneBoolArrayWidgetSetup(t),this._myUI=new PP.EasyTuneBoolArrayWidgetUI,this._myVariable=null,this._myIsVisible=!0,this._myScrollVariableRequestCallbacks=new Map,this._myAppendToVariableName="",this._myValueEditIndex=0,this._myValueButtonEditIntensity=0,this._myValueButtonEditIntensityTimer=0,this._myValueEditActive=!1,this._myScrollVariableActive=!1,this._myScrollDirection=0,this._myScrollVariableTimer=0,this._myHasScrolled=!1}setEasyTuneVariable(t,i){this._myVariable=t,typeof i<"u"?this._myAppendToVariableName=i:this._myAppendToVariableName="",this._refreshUI()}isScrollVariableActive(){return this._myScrollVariableActive}getScrollVariableDirection(){return this._myScrollDirection}setScrollVariableActive(t,i){this._myScrollVariableActive=t,this._myScrollDirection=i,this._myScrollVariableTimer=this._mySetup.myScrollVariableDelay,this._myHasScrolled=!1}_refreshUI(){if(this._myVariable){this._myUI.myVariableLabelTextComponent.text=this._myVariable.myName.concat(this._myAppendToVariableName);for(let t=0;t<this._mySetup.myArraySize;t++)this._myUI.myValueTextComponents[t].text=this._myVariable.myValue[t]?"true":"false"}}setVisible(t){t&&this._refreshUI(),this._myUI.setVisible(t),this._myIsVisible=t}registerScrollVariableRequestEventListener(t,i){this._myScrollVariableRequestCallbacks.set(t,i)}unregisterScrollVariableRequestEventListener(t){this._myScrollVariableRequestCallbacks.delete(t)}start(t,i){this._myUI.build(t,this._mySetup,i),this._myUI.setAdditionalButtonsActive(i.myEnableAdditionalButtons),this._addListeners()}update(t){this._isActive()&&(this._updateValue(t),this._updateScrollVariable(t))}_updateValue(t){let i=0;this._myGamepad&&(i=this._myGamepad.getAxesInfo().myAxes[1]);let o=0;this._myValueEditActive?o=i:this._myValueButtonEditIntensity!=0&&(this._myValueButtonEditIntensityTimer<=0?o=this._myValueButtonEditIntensity:this._myValueButtonEditIntensityTimer-=t),Math.abs(o)>this._mySetup.myThumbstickToggleThreshold&&(this._myVariable.myValue[this._myValueEditIndex]=o>0,this._refreshUI())}_updateScrollVariable(t){this._myScrollVariableActive&&(this._myScrollVariableTimer<=0?(this._scrollVariableRequest(this._myScrollDirection),this._myScrollVariableTimer=this._mySetup.myScrollVariableDelay,this._myHasScrolled=!0):this._myScrollVariableTimer-=t)}_isActive(){return this._myIsVisible&&this._myVariable}_addListeners(){let t=this._myUI;t.myVariableLabelCursorTargetComponent.addClickFunction(this._resetAllValues.bind(this)),t.myVariableLabelCursorTargetComponent.addHoverFunction(this._genericTextHover.bind(this,t.myVariableLabelText)),t.myVariableLabelCursorTargetComponent.addUnHoverFunction(this._genericTextUnHover.bind(this,t.myVariableLabelText,this._mySetup.myVariableLabelTextScale)),t.myNextButtonCursorTargetComponent.addDownFunction(this._setScrollVariableActive.bind(this,!0,1,!1)),t.myNextButtonCursorTargetComponent.addDownOnHoverFunction(this._setScrollVariableActive.bind(this,!0,1,!1)),t.myNextButtonCursorTargetComponent.addUpFunction(this._setScrollVariableActive.bind(this,!1,0,!1)),t.myNextButtonCursorTargetComponent.addUpWithNoDownFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myNextButtonCursorTargetComponent.addUnHoverFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myNextButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myNextButtonBackgroundComponent.material)),t.myNextButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myNextButtonBackgroundComponent.material)),t.myPreviousButtonCursorTargetComponent.addDownFunction(this._setScrollVariableActive.bind(this,!0,-1,!1)),t.myPreviousButtonCursorTargetComponent.addDownOnHoverFunction(this._setScrollVariableActive.bind(this,!0,-1,!1)),t.myPreviousButtonCursorTargetComponent.addUpFunction(this._setScrollVariableActive.bind(this,!1,0,!1)),t.myPreviousButtonCursorTargetComponent.addUpWithNoDownFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myPreviousButtonCursorTargetComponent.addUnHoverFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myPreviousButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myPreviousButtonBackgroundComponent.material)),t.myPreviousButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myPreviousButtonBackgroundComponent.material));for(let i=0;i<this._mySetup.myArraySize;i++)for(let o=0;o<this._mySetup.myArraySize;o++)t.myValueIncreaseButtonCursorTargetComponents[o].addDownFunction(this._setValueEditIntensity.bind(this,o,1)),t.myValueIncreaseButtonCursorTargetComponents[o].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,o,1)),t.myValueIncreaseButtonCursorTargetComponents[o].addUpFunction(this._setValueEditIntensity.bind(this,o,0)),t.myValueIncreaseButtonCursorTargetComponents[o].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,o,0)),t.myValueIncreaseButtonCursorTargetComponents[o].addUnHoverFunction(this._setValueEditIntensity.bind(this,o,0)),t.myValueDecreaseButtonCursorTargetComponents[o].addDownFunction(this._setValueEditIntensity.bind(this,o,-1)),t.myValueDecreaseButtonCursorTargetComponents[o].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,o,-1)),t.myValueDecreaseButtonCursorTargetComponents[o].addUpFunction(this._setValueEditIntensity.bind(this,o,0)),t.myValueDecreaseButtonCursorTargetComponents[o].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,o,0)),t.myValueDecreaseButtonCursorTargetComponents[o].addUnHoverFunction(this._setValueEditIntensity.bind(this,o,0)),t.myValueIncreaseButtonCursorTargetComponents[o].addHoverFunction(this._genericHover.bind(this,t.myValueIncreaseButtonBackgroundComponents[o].material)),t.myValueIncreaseButtonCursorTargetComponents[o].addUnHoverFunction(this._genericUnHover.bind(this,t.myValueIncreaseButtonBackgroundComponents[o].material)),t.myValueDecreaseButtonCursorTargetComponents[o].addHoverFunction(this._genericHover.bind(this,t.myValueDecreaseButtonBackgroundComponents[o].material)),t.myValueDecreaseButtonCursorTargetComponents[o].addUnHoverFunction(this._genericUnHover.bind(this,t.myValueDecreaseButtonBackgroundComponents[o].material)),t.myValueCursorTargetComponents[o].addClickFunction(this._resetValue.bind(this,o)),t.myValueCursorTargetComponents[o].addHoverFunction(this._setValueEditActive.bind(this,o,t.myValueTexts[o],!0)),t.myValueCursorTargetComponents[o].addUnHoverFunction(this._setValueEditActive.bind(this,o,t.myValueTexts[o],!1))}_setValueEditIntensity(t,i){(this._isActive()||i==0)&&(i!=0&&(this._myValueButtonEditIntensityTimer=this._mySetup.myButtonEditDelay,this._myValueEditIndex=t),this._myValueButtonEditIntensity=i)}_setValueEditActive(t,i,o){(this._isActive()||!o)&&(o?(this._myValueEditIndex=t,i.scale(this._mySetup.myTextHoverScaleMultiplier)):i.scalingWorld=this._mySetup.myValueTextScale,this._myValueEditActive=o)}_setScrollVariableActive(t,i,o){if(this._isActive()||!t){let n=!t&&!this._myHasScrolled&&!o,s=this._myScrollDirection;this.setScrollVariableActive(t,i),n&&this._scrollVariableRequest(s)}}_scrollVariableRequest(t){if(this._isActive()&&t!=0)for(let i of this._myScrollVariableRequestCallbacks.values())i(t)}_resetValue(t){this._isActive()&&(this._myVariable.myValue[t]=this._myVariable.myInitialValue[t],this._myUI.myValueTextComponents[t].text=this._myVariable.myValue[t]?"true":"false")}_resetAllValues(){for(let t=0;t<this._mySetup.myArraySize;t++)this._resetValue(t)}_genericHover(t){t.color=this._mySetup.myButtonHoverColor}_genericUnHover(t){t.color=this._mySetup.myBackgroundColor}_genericTextHover(t){t.scale(this._mySetup.myTextHoverScaleMultiplier)}_genericTextUnHover(t,i){t.scalingWorld=i}}});var ji=S(()=>{PP.EasyTuneBoolArrayWidgetUI=class{build(t,i,o){this._myParentObject=t,this._mySetup=i,this._myAdditionalSetup=o,this._myAdditionalButtonsActive=!0,this._myPlaneMesh=PP.MeshUtils.createPlaneMesh(),this._createSkeleton(),this._setTransforms(),this._addComponents()}setVisible(t){this.myPivotObject.pp_setActiveHierarchy(t),t&&this.setAdditionalButtonsActive(this._myAdditionalButtonsActive)}setAdditionalButtonsActive(t){this._myAdditionalButtonsActive=t;for(let i=0;i<this._mySetup.myArraySize;i++)this.myValueIncreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myValueDecreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive)}_createSkeleton(){this.myPivotObject=WL.scene.addObject(this._myParentObject),this.myBackPanel=WL.scene.addObject(this.myPivotObject),this.myBackBackground=WL.scene.addObject(this.myBackPanel),this._createDisplaySkeleton(),this._createPointerSkeleton()}_createDisplaySkeleton(){this.myDisplayPanel=WL.scene.addObject(this.myPivotObject),this.myVariableLabelPanel=WL.scene.addObject(this.myDisplayPanel),this.myVariableLabelText=WL.scene.addObject(this.myVariableLabelPanel),this.myVariableLabelCursorTarget=WL.scene.addObject(this.myVariableLabelPanel),this.myNextButtonPanel=WL.scene.addObject(this.myVariableLabelPanel),this.myNextButtonBackground=WL.scene.addObject(this.myNextButtonPanel),this.myNextButtonText=WL.scene.addObject(this.myNextButtonPanel),this.myNextButtonCursorTarget=WL.scene.addObject(this.myNextButtonPanel),this.myPreviousButtonPanel=WL.scene.addObject(this.myVariableLabelPanel),this.myPreviousButtonBackground=WL.scene.addObject(this.myPreviousButtonPanel),this.myPreviousButtonText=WL.scene.addObject(this.myPreviousButtonPanel),this.myPreviousButtonCursorTarget=WL.scene.addObject(this.myPreviousButtonPanel),this.myValuesPanel=WL.scene.addObject(this.myDisplayPanel),this.myValuePanels=[],this.myValueTexts=[],this.myValueCursorTargets=[],this.myValueIncreaseButtonPanels=[],this.myValueIncreaseButtonBackgrounds=[],this.myValueIncreaseButtonTexts=[],this.myValueIncreaseButtonCursorTargets=[],this.myValueDecreaseButtonPanels=[],this.myValueDecreaseButtonBackgrounds=[],this.myValueDecreaseButtonTexts=[],this.myValueDecreaseButtonCursorTargets=[];for(let t=0;t<this._mySetup.myArraySize;t++)this.myValuePanels[t]=WL.scene.addObject(this.myValuesPanel),this.myValueTexts[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueCursorTargets[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueIncreaseButtonPanels[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueIncreaseButtonBackgrounds[t]=WL.scene.addObject(this.myValueIncreaseButtonPanels[t]),this.myValueIncreaseButtonTexts[t]=WL.scene.addObject(this.myValueIncreaseButtonPanels[t]),this.myValueIncreaseButtonCursorTargets[t]=WL.scene.addObject(this.myValueIncreaseButtonPanels[t]),this.myValueDecreaseButtonPanels[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueDecreaseButtonBackgrounds[t]=WL.scene.addObject(this.myValueDecreaseButtonPanels[t]),this.myValueDecreaseButtonTexts[t]=WL.scene.addObject(this.myValueDecreaseButtonPanels[t]),this.myValueDecreaseButtonCursorTargets[t]=WL.scene.addObject(this.myValueDecreaseButtonPanels[t])}_createPointerSkeleton(){this.myPointerCursorTarget=WL.scene.addObject(this.myPivotObject)}_setTransforms(){this.myPivotObject.setTranslationLocal(this._mySetup.myPivotObjectPositions[this._myAdditionalSetup.myHandedness]),this.myBackPanel.setTranslationLocal(this._mySetup.myBackPanelPosition),this.myBackBackground.scale(this._mySetup.myBackBackgroundScale),this._setDisplayTransforms(),this._setPointerTransform()}_setDisplayTransforms(){this.myDisplayPanel.setTranslationLocal(this._mySetup.myDisplayPanelPosition),this.myVariableLabelPanel.setTranslationLocal(this._mySetup.myVariableLabelPanelPosition),this.myVariableLabelText.scale(this._mySetup.myVariableLabelTextScale),this.myVariableLabelCursorTarget.setTranslationLocal(this._mySetup.myVariableLabelCursorTargetPosition),this.myNextButtonPanel.setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myNextButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myNextButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myNextButtonText.scale(this._mySetup.mySideButtonTextScale),this.myNextButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myPreviousButtonPanel.setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myPreviousButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myPreviousButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myPreviousButtonText.scale(this._mySetup.mySideButtonTextScale),this.myPreviousButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myValuesPanel.setTranslationLocal(this._mySetup.myValuesPanelPosition);for(let t=0;t<this._mySetup.myArraySize;t++)this.myValuePanels[t].setTranslationLocal(this._mySetup.myValuePanelsPositions[t]),this.myValueTexts[t].scale(this._mySetup.myValueTextScale),this.myValueCursorTargets[t].setTranslationLocal(this._mySetup.myValueCursorTargetPosition),this.myValueIncreaseButtonPanels[t].setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myValueIncreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myValueIncreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myValueIncreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myValueIncreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myValueDecreaseButtonPanels[t].setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myValueDecreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myValueDecreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myValueDecreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myValueDecreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition)}_setPointerTransform(){this.myPointerCursorTarget.setTranslationLocal(this._mySetup.myPointerCursorTargetPosition)}_addComponents(){this.myBackBackgroundComponent=this.myBackBackground.addComponent("mesh"),this.myBackBackgroundComponent.mesh=this._myPlaneMesh,this.myBackBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myBackBackgroundComponent.material.color=this._mySetup.myBackBackgroundColor,this._addDisplayComponents(),this._addPointerComponents()}_addDisplayComponents(){this.myVariableLabelTextComponent=this.myVariableLabelText.addComponent("text"),this._setupTextComponent(this.myVariableLabelTextComponent),this.myVariableLabelTextComponent.text=" ",this.myVariableLabelCursorTargetComponent=this.myVariableLabelCursorTarget.addComponent("cursor-target"),this.myVariableLabelCollisionComponent=this.myVariableLabelCursorTarget.addComponent("collision"),this.myVariableLabelCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myVariableLabelCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myVariableLabelCollisionComponent.extents=this._mySetup.myVariableLabelCollisionExtents,this.myNextButtonBackgroundComponent=this.myNextButtonBackground.addComponent("mesh"),this.myNextButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myNextButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myNextButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myNextButtonTextComponent=this.myNextButtonText.addComponent("text"),this._setupTextComponent(this.myNextButtonTextComponent),this.myNextButtonTextComponent.text=this._mySetup.myNextButtonText,this.myNextButtonCursorTargetComponent=this.myNextButtonCursorTarget.addComponent("cursor-target"),this.myNextButtonCollisionComponent=this.myNextButtonCursorTarget.addComponent("collision"),this.myNextButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myNextButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myNextButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myPreviousButtonBackgroundComponent=this.myPreviousButtonBackground.addComponent("mesh"),this.myPreviousButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myPreviousButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPreviousButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myPreviousButtonTextComponent=this.myPreviousButtonText.addComponent("text"),this._setupTextComponent(this.myPreviousButtonTextComponent),this.myPreviousButtonTextComponent.text=this._mySetup.myPreviousButtonText,this.myPreviousButtonCursorTargetComponent=this.myPreviousButtonCursorTarget.addComponent("cursor-target"),this.myPreviousButtonCollisionComponent=this.myPreviousButtonCursorTarget.addComponent("collision"),this.myPreviousButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPreviousButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPreviousButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myValueTextComponents=[],this.myValueCursorTargetComponents=[],this.myValueCollisionComponents=[],this.myValueIncreaseButtonBackgroundComponents=[],this.myValueIncreaseButtonTextComponents=[],this.myValueIncreaseButtonCursorTargetComponents=[],this.myValueIncreaseButtonCollisionComponents=[],this.myValueDecreaseButtonBackgroundComponents=[],this.myValueDecreaseButtonTextComponents=[],this.myValueDecreaseButtonCursorTargetComponents=[],this.myValueDecreaseButtonCollisionComponents=[];for(let t=0;t<this._mySetup.myArraySize;t++)this.myValueTextComponents[t]=this.myValueTexts[t].addComponent("text"),this._setupTextComponent(this.myValueTextComponents[t]),this.myValueTextComponents[t].text=" ",this.myValueCursorTargetComponents[t]=this.myValueCursorTargets[t].addComponent("cursor-target"),this.myValueCollisionComponents[t]=this.myValueCursorTargets[t].addComponent("collision"),this.myValueCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myValueCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myValueCollisionComponents[t].extents=this._mySetup.myValueCollisionExtents,this.myValueIncreaseButtonBackgroundComponents[t]=this.myValueIncreaseButtonBackgrounds[t].addComponent("mesh"),this.myValueIncreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myValueIncreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myValueIncreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myValueIncreaseButtonTextComponents[t]=this.myValueIncreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myValueIncreaseButtonTextComponents[t]),this.myValueIncreaseButtonTextComponents[t].text=this._mySetup.myIncreaseButtonText,this.myValueIncreaseButtonCursorTargetComponents[t]=this.myValueIncreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myValueIncreaseButtonCollisionComponents[t]=this.myValueIncreaseButtonCursorTargets[t].addComponent("collision"),this.myValueIncreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myValueIncreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myValueIncreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents,this.myValueDecreaseButtonBackgroundComponents[t]=this.myValueDecreaseButtonBackgrounds[t].addComponent("mesh"),this.myValueDecreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myValueDecreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myValueDecreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myValueDecreaseButtonTextComponents[t]=this.myValueDecreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myValueDecreaseButtonTextComponents[t]),this.myValueDecreaseButtonTextComponents[t].text=this._mySetup.myDecreaseButtonText,this.myValueDecreaseButtonCursorTargetComponents[t]=this.myValueDecreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myValueDecreaseButtonCollisionComponents[t]=this.myValueDecreaseButtonCursorTargets[t].addComponent("collision"),this.myValueDecreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myValueDecreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myValueDecreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents}_addPointerComponents(){this.myPointerCollisionComponent=this.myPointerCursorTarget.addComponent("collision"),this.myPointerCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPointerCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPointerCollisionComponent.extents=this._mySetup.myPointerCollisionExtents}_setupTextComponent(t){t.alignment=this._mySetup.myTextAlignment,t.justification=this._mySetup.myTextJustification,t.material=this._myAdditionalSetup.myTextMaterial.clone(),t.material.outlineRange=this._mySetup.myTextOutlineRange,t.material.color=this._mySetup.myTextColor,t.material.outlineColor=this._mySetup.myTextOutlineColor,t.text=""}}});var wi=S(()=>{PP.EasyTuneBoolArrayWidgetSetup=class{constructor(t){this.myArraySize=t,this._initializeBuildSetup(),this._initializeRuntimeSetup()}_initializeBuildSetup(){this.myBackgroundColor=[46/255,46/255,46/255,1],this.myCursorTargetCollisionCollider=2,this.myCursorTargetCollisionGroup=7,this.myCursorTargetCollisionThickness=.001,this.myDefaultTextColor=[255/255,255/255,255/255,1],this.myTextAlignment=2,this.myTextJustification=2,this.myTextOutlineRange=[.45,.45],this.myTextColor=this.myDefaultTextColor,this.myTextOutlineColor=this.myDefaultTextColor,this.myPivotObjectPositions=[],this.myPivotObjectPositions[PP.ToolHandedness.NONE]=[0,0,0],this.myPivotObjectPositions[PP.ToolHandedness.LEFT]=[-.04,.02,3013e-8],this.myPivotObjectPositions[PP.ToolHandedness.RIGHT]=[-.08,.02,3013e-8];let t=.01,i=.0125,o=.055,n=.017,s=.2;this.mySideButtonBackgroundScale=[.015,.015,1],this.mySideButtonTextScale=[.18,.18,.18],this.mySideButtonTextPosition=[0,0,.007],this.mySideButtonCursorTargetPosition=[0,0,0],this.mySideButtonCursorTargetPosition[2]=n-t,this.mySideButtonCollisionExtents=this.mySideButtonBackgroundScale.slice(0),this.mySideButtonCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myLeftSideButtonPosition=[0,0,-1e-5],this.myLeftSideButtonPosition[0]=-s+this.mySideButtonBackgroundScale[0]+i,this.myRightSideButtonPosition=[0,0,-1e-5],this.myRightSideButtonPosition[0]=s-this.mySideButtonBackgroundScale[0]-i,this.myIncreaseButtonText="+",this.myDecreaseButtonText="-",this.myDisplayPanelPosition=[0,.1,0],this.myVariableLabelPanelPosition=[0,.025,t],this.myVariableLabelTextScale=[.19,.19,.19],this.myVariableLabelCursorTargetPosition=[0,0,0],this.myVariableLabelCursorTargetPosition[2]=n-t,this.myVariableLabelCollisionExtents=[.065,.0175,1],this.myVariableLabelCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myNextButtonText=">",this.myPreviousButtonText="<",this.myValuesPanelPosition=[0,this.myVariableLabelPanelPosition[1]-o,t],this.myValueTextScale=[.4,.4,.4],this.myValueCursorTargetPosition=[0,0,0],this.myValueCursorTargetPosition[2]=n-t,this.myValueCollisionExtents=[.065,.02,1],this.myValueCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myDistanceBetweenValues=this.mySideButtonBackgroundScale[1]*2+.015,this.myValuePanelsPositions=[],this.myValuePanelsPositions[0]=[0,0,0];for(let a=1;a<this.myArraySize;a++)this.myValuePanelsPositions[a]=this.myValuePanelsPositions[a-1].slice(0),this.myValuePanelsPositions[a][1]-=this.myDistanceBetweenValues;{let a=this.myValuePanelsPositions[this.myArraySize-1]?this.myValuePanelsPositions[this.myArraySize-1][1]:0,l=this.myDisplayPanelPosition[1]+this.myVariableLabelPanelPosition[1]+this.mySideButtonBackgroundScale[1]+i*1.25,m=this.myDisplayPanelPosition[1]+this.myValuesPanelPosition[1]+a-i*1.25-this.mySideButtonBackgroundScale[1];this.myBackPanelPosition=[0,(l+m)/2,0],this.myBackBackgroundScale=[s,(l-m)/2,1],this.myBackBackgroundColor=[70/255,70/255,70/255,1]}this.myPointerCollisionExtents=this.myBackBackgroundScale.slice(0),this.myPointerCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myPointerCursorTargetPosition=this.myBackPanelPosition.slice(0),this.myPointerCursorTargetPosition[2]=n-1e-4}_initializeRuntimeSetup(){this.myButtonHoverColor=[150/255,150/255,150/255,1],this.myTextHoverScaleMultiplier=[1.25,1.25,1.25],this.myThumbstickToggleThreshold=.6,this.myButtonEditDelay=0,this.myScrollVariableDelay=.5}}});var qi=S(()=>{PP.EasyTuneBoolWidget=class{constructor(t){this._myGamepad=t,this._myParentObject=null,this._myAdditionalSetup=null,this._myWidgets=new Map,this._myVariable=null,this._myIsVisible=!0,this._myAppendToVariableName=null,this._myScrollVariableRequestCallbacks=new Map,this._myCurrentArraySize=0}setEasyTuneVariable(t,i){this._myVariable=t,this._myCurrentArraySize=this._myVariable.myValue.length,this._myAppendToVariableName=i,this._myWidgets.has(this._myCurrentArraySize)||this._createWidget(this._myCurrentArraySize),this._myWidgets.get(this._myCurrentArraySize).setEasyTuneVariable(t,i),this.setVisible(this._myIsVisible)}setVisible(t){if(this._myVariable){this._sizeChangedCheck();for(let i of this._myWidgets.values())i.setVisible(!1);this._myWidgets.get(this._myCurrentArraySize).setVisible(t)}this._myIsVisible=t}isScrollVariableActive(){let t=this._myWidgets.get(this._myCurrentArraySize);return t?t.isScrollVariableActive():!1}getScrollVariableDirection(){let t=this._myWidgets.get(this._myCurrentArraySize);return t?t.getScrollVariableDirection():0}setScrollVariableActive(t,i){let o=this._myWidgets.get(this._myCurrentArraySize);o&&o.setScrollVariableActive(t,i)}registerScrollVariableRequestEventListener(t,i){this._myScrollVariableRequestCallbacks.set(t,i)}unregisterScrollVariableRequestEventListener(t){this._myScrollVariableRequestCallbacks.delete(t)}start(t,i){this._myParentObject=t,this._myAdditionalSetup=i,this._createWidget(1),this._myVariable&&this.setEasyTuneVariable(this._myVariable,this._myAppendToVariableName)}update(t){this._isActive()&&(this._sizeChangedCheck(),this._myWidgets.get(this._myCurrentArraySize).update(t))}_isActive(){return this._myIsVisible&&this._myVariable}_scrollVariableRequest(t){for(let i of this._myScrollVariableRequestCallbacks.values())i(t)}_createWidget(t){this._myWidgets.set(t,new PP.EasyTuneBoolArrayWidget(t,this._myGamepad)),this._myWidgets.get(t).start(this._myParentObject,this._myAdditionalSetup),this._myWidgets.get(t).setVisible(!1),this._myWidgets.get(t).registerScrollVariableRequestEventListener(this,this._scrollVariableRequest.bind(this))}_sizeChangedCheck(){this._myVariable.myValue.length!=this._myCurrentArraySize&&this.setEasyTuneVariable(this._myVariable,this._myAppendToVariableName)}}});var Ni=S(()=>{PP.EasyTuneNoneWidget=class{constructor(){this._mySetup=new PP.EasyTuneNoneWidgetSetup,this._myUI=new PP.EasyTuneNoneWidgetUI,this._myVariable=null,this._myIsVisible=!0,this._myScrollVariableRequestCallbacks=new Map,this._myAppendToVariableName="",this._myScrollVariableActive=!1,this._myScrollDirection=0,this._myScrollVariableTimer=0,this._myHasScrolled=!1}setEasyTuneVariable(t,i){this._myVariable=t,typeof i<"u"?this._myAppendToVariableName=i:this._myAppendToVariableName="",this._refreshUI()}isScrollVariableActive(){return this._myScrollVariableActive}getScrollVariableDirection(){return this._myScrollDirection}setScrollVariableActive(t,i){this._myScrollVariableActive=t,this._myScrollDirection=i,this._myScrollVariableTimer=this._mySetup.myScrollVariableDelay,this._myHasScrolled=!1}_refreshUI(){if(this._myVariable)if(this._myVariable.myName!=null)this._myUI.myVariableLabelTextComponent.text=this._myVariable.myName.concat(this._myAppendToVariableName);else{let t="Unknown";this._myUI.myVariableLabelTextComponent.text=t.concat(this._myAppendToVariableName)}}setVisible(t){t&&this._refreshUI(),this._myUI.setVisible(t),this._myIsVisible=t}registerScrollVariableRequestEventListener(t,i){this._myScrollVariableRequestCallbacks.set(t,i)}unregisterScrollVariableRequestEventListener(t){this._myScrollVariableRequestCallbacks.delete(t)}start(t,i){this._myUI.build(t,this._mySetup,i),this._addListeners()}update(t){this._isActive()&&this._updateScrollVariable(t)}_updateScrollVariable(t){this._myScrollVariableActive&&(this._myScrollVariableTimer<=0?(this._scrollVariableRequest(this._myScrollDirection),this._myScrollVariableTimer=this._mySetup.myScrollVariableDelay,this._myHasScrolled=!0):this._myScrollVariableTimer-=t)}_isActive(){return this._myIsVisible&&this._myVariable}_addListeners(){let t=this._myUI;t.myNextButtonCursorTargetComponent.addDownFunction(this._setScrollVariableActive.bind(this,!0,1,!1)),t.myNextButtonCursorTargetComponent.addDownOnHoverFunction(this._setScrollVariableActive.bind(this,!0,1,!1)),t.myNextButtonCursorTargetComponent.addUpFunction(this._setScrollVariableActive.bind(this,!1,0,!1)),t.myNextButtonCursorTargetComponent.addUpWithNoDownFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myNextButtonCursorTargetComponent.addUnHoverFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myNextButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myNextButtonBackgroundComponent.material)),t.myNextButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myNextButtonBackgroundComponent.material)),t.myPreviousButtonCursorTargetComponent.addDownFunction(this._setScrollVariableActive.bind(this,!0,-1,!1)),t.myPreviousButtonCursorTargetComponent.addDownOnHoverFunction(this._setScrollVariableActive.bind(this,!0,-1,!1)),t.myPreviousButtonCursorTargetComponent.addUpFunction(this._setScrollVariableActive.bind(this,!1,0,!1)),t.myPreviousButtonCursorTargetComponent.addUpWithNoDownFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myPreviousButtonCursorTargetComponent.addUnHoverFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myPreviousButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myPreviousButtonBackgroundComponent.material)),t.myPreviousButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myPreviousButtonBackgroundComponent.material))}_setScrollVariableActive(t,i,o){if(this._isActive()||!t){let n=!t&&!this._myHasScrolled&&!o,s=this._myScrollDirection;this.setScrollVariableActive(t,i),n&&this._scrollVariableRequest(s)}}_scrollVariableRequest(t){if(this._isActive()&&t!=0)for(let i of this._myScrollVariableRequestCallbacks.values())i(t)}_genericHover(t){t.color=this._mySetup.myButtonHoverColor}_genericUnHover(t){t.color=this._mySetup.myBackgroundColor}}});var Hi=S(()=>{PP.EasyTuneNoneWidgetUI=class{build(t,i,o){this._myParentObject=t,this._mySetup=i,this._myAdditionalSetup=o,this._myPlaneMesh=PP.MeshUtils.createPlaneMesh(),this._createSkeleton(),this._setTransforms(),this._addComponents()}setVisible(t){this.myPivotObject.pp_setActiveHierarchy(t)}_createSkeleton(){this.myPivotObject=WL.scene.addObject(this._myParentObject),this.myBackPanel=WL.scene.addObject(this.myPivotObject),this.myBackBackground=WL.scene.addObject(this.myBackPanel),this._createDisplaySkeleton(),this._createPointerSkeleton()}_createDisplaySkeleton(){this.myDisplayPanel=WL.scene.addObject(this.myPivotObject),this.myVariableLabelPanel=WL.scene.addObject(this.myDisplayPanel),this.myVariableLabelText=WL.scene.addObject(this.myVariableLabelPanel),this.myTypeNotSupportedPanel=WL.scene.addObject(this.myDisplayPanel),this.myTypeNotSupportedText=WL.scene.addObject(this.myTypeNotSupportedPanel),this.myTypeNotSupportedCursorTarget=WL.scene.addObject(this.myTypeNotSupportedPanel),this.myNextButtonPanel=WL.scene.addObject(this.myVariableLabelPanel),this.myNextButtonBackground=WL.scene.addObject(this.myNextButtonPanel),this.myNextButtonText=WL.scene.addObject(this.myNextButtonPanel),this.myNextButtonCursorTarget=WL.scene.addObject(this.myNextButtonPanel),this.myPreviousButtonPanel=WL.scene.addObject(this.myVariableLabelPanel),this.myPreviousButtonBackground=WL.scene.addObject(this.myPreviousButtonPanel),this.myPreviousButtonText=WL.scene.addObject(this.myPreviousButtonPanel),this.myPreviousButtonCursorTarget=WL.scene.addObject(this.myPreviousButtonPanel)}_createPointerSkeleton(){this.myPointerCursorTarget=WL.scene.addObject(this.myPivotObject)}_setTransforms(){this.myPivotObject.setTranslationLocal(this._mySetup.myPivotObjectPositions[this._myAdditionalSetup.myHandedness]),this.myBackPanel.setTranslationLocal(this._mySetup.myBackPanelPosition),this.myBackBackground.scale(this._mySetup.myBackBackgroundScale),this._setDisplayTransforms(),this._setPointerTransform()}_setDisplayTransforms(){this.myDisplayPanel.setTranslationLocal(this._mySetup.myDisplayPanelPosition),this.myVariableLabelPanel.setTranslationLocal(this._mySetup.myVariableLabelPanelPosition),this.myVariableLabelText.scale(this._mySetup.myVariableLabelTextScale),this.myTypeNotSupportedPanel.setTranslationLocal(this._mySetup.myTypeNotSupportedPanelPosition),this.myTypeNotSupportedText.scale(this._mySetup.myTypeNotSupportedTextScale),this.myNextButtonPanel.setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myNextButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myNextButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myNextButtonText.scale(this._mySetup.mySideButtonTextScale),this.myNextButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myPreviousButtonPanel.setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myPreviousButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myPreviousButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myPreviousButtonText.scale(this._mySetup.mySideButtonTextScale),this.myPreviousButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition)}_setPointerTransform(){this.myPointerCursorTarget.setTranslationLocal(this._mySetup.myPointerCursorTargetPosition)}_addComponents(){this.myBackBackgroundComponent=this.myBackBackground.addComponent("mesh"),this.myBackBackgroundComponent.mesh=this._myPlaneMesh,this.myBackBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myBackBackgroundComponent.material.color=this._mySetup.myBackBackgroundColor,this._addDisplayComponents(),this._addPointerComponents()}_addDisplayComponents(){this.myVariableLabelTextComponent=this.myVariableLabelText.addComponent("text"),this._setupTextComponent(this.myVariableLabelTextComponent),this.myVariableLabelTextComponent.text=" ",this.myTypeNotSupportedTextComponent=this.myTypeNotSupportedText.addComponent("text"),this._setupTextComponent(this.myTypeNotSupportedTextComponent),this.myTypeNotSupportedTextComponent.text=this._mySetup.myTypeNotSupportedText,this.myNextButtonBackgroundComponent=this.myNextButtonBackground.addComponent("mesh"),this.myNextButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myNextButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myNextButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myNextButtonTextComponent=this.myNextButtonText.addComponent("text"),this._setupTextComponent(this.myNextButtonTextComponent),this.myNextButtonTextComponent.text=this._mySetup.myNextButtonText,this.myNextButtonCursorTargetComponent=this.myNextButtonCursorTarget.addComponent("cursor-target"),this.myNextButtonCollisionComponent=this.myNextButtonCursorTarget.addComponent("collision"),this.myNextButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myNextButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myNextButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myPreviousButtonBackgroundComponent=this.myPreviousButtonBackground.addComponent("mesh"),this.myPreviousButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myPreviousButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPreviousButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myPreviousButtonTextComponent=this.myPreviousButtonText.addComponent("text"),this._setupTextComponent(this.myPreviousButtonTextComponent),this.myPreviousButtonTextComponent.text=this._mySetup.myPreviousButtonText,this.myPreviousButtonCursorTargetComponent=this.myPreviousButtonCursorTarget.addComponent("cursor-target"),this.myPreviousButtonCollisionComponent=this.myPreviousButtonCursorTarget.addComponent("collision"),this.myPreviousButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPreviousButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPreviousButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents}_addPointerComponents(){this.myPointerCollisionComponent=this.myPointerCursorTarget.addComponent("collision"),this.myPointerCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPointerCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPointerCollisionComponent.extents=this._mySetup.myPointerCollisionExtents}_setupTextComponent(t){t.alignment=this._mySetup.myTextAlignment,t.justification=this._mySetup.myTextJustification,t.material=this._myAdditionalSetup.myTextMaterial.clone(),t.material.outlineRange=this._mySetup.myTextOutlineRange,t.material.color=this._mySetup.myTextColor,t.material.outlineColor=this._mySetup.myTextOutlineColor,t.text=""}}});var Ui=S(()=>{PP.EasyTuneNoneWidgetSetup=class{constructor(){this._initializeBuildSetup(),this._initializeRuntimeSetup()}_initializeBuildSetup(){this.myBackgroundColor=[46/255,46/255,46/255,1],this.myCursorTargetCollisionCollider=2,this.myCursorTargetCollisionGroup=7,this.myCursorTargetCollisionThickness=.001,this.myDefaultTextColor=[255/255,255/255,255/255,1],this.myTextAlignment=2,this.myTextJustification=2,this.myTextOutlineRange=[.45,.45],this.myTextColor=this.myDefaultTextColor,this.myTextOutlineColor=this.myDefaultTextColor,this.myPivotObjectPositions=[],this.myPivotObjectPositions[PP.ToolHandedness.NONE]=[0,0,0],this.myPivotObjectPositions[PP.ToolHandedness.LEFT]=[-.04,.02,4213e-8],this.myPivotObjectPositions[PP.ToolHandedness.RIGHT]=[-.08,.02,4213e-8];let t=.01,i=.0125,o=.017,n=.2;this.mySideButtonBackgroundScale=[.015,.015,1],this.mySideButtonTextScale=[.18,.18,.18],this.mySideButtonTextPosition=[0,0,.007],this.mySideButtonCursorTargetPosition=[0,0,0],this.mySideButtonCursorTargetPosition[2]=o-t,this.mySideButtonCollisionExtents=this.mySideButtonBackgroundScale.slice(0),this.mySideButtonCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myLeftSideButtonPosition=[0,0,-1e-5],this.myLeftSideButtonPosition[0]=-n+this.mySideButtonBackgroundScale[0]+i,this.myRightSideButtonPosition=[0,0,-1e-5],this.myRightSideButtonPosition[0]=n-this.mySideButtonBackgroundScale[0]-i,this.myDisplayPanelPosition=[0,.1,0],this.myVariableLabelPanelPosition=[0,.025,t],this.myVariableLabelTextScale=[.19,.19,.19],this.myTypeNotSupportedPanelPosition=[0,-.03,t],this.myTypeNotSupportedTextScale=[.275,.275,.275],this.myTypeNotSupportedText="Type Not Supported",this.myValueCursorTargetPosition=[0,0,0],this.myValueCursorTargetPosition[2]=o-t,this.myValueCollisionExtents=[.065,.02,1],this.myValueCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myNextButtonText=">",this.myPreviousButtonText="<";{let s=this.myDisplayPanelPosition[1]+this.myVariableLabelPanelPosition[1]+this.mySideButtonBackgroundScale[1]+i*1.25,a=this.myDisplayPanelPosition[1]+this.myTypeNotSupportedPanelPosition[1]-i*1.25-this.mySideButtonBackgroundScale[1];this.myBackPanelPosition=[0,(s+a)/2,0],this.myBackBackgroundScale=[n,(s-a)/2,1],this.myBackBackgroundColor=[70/255,70/255,70/255,1]}this.myPointerCollisionExtents=this.myBackBackgroundScale.slice(0),this.myPointerCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myPointerCursorTargetPosition=this.myBackPanelPosition.slice(0),this.myPointerCursorTargetPosition[2]=o-1e-4}_initializeRuntimeSetup(){this.myButtonHoverColor=[150/255,150/255,150/255,1],this.myScrollVariableDelay=.5}}});var Gi=S(()=>{PP.EasyTuneNumberArrayWidget=class{constructor(t,i){this._myGamepad=i,this._mySetup=new PP.EasyTuneNumberArrayWidgetSetup(t),this._myUI=new PP.EasyTuneNumberArrayWidgetUI,this._myVariable=null,this._myIsVisible=!0,this._myScrollVariableRequestCallbacks=new Map,this._myAppendToVariableName="",this._myValueEditIndex=-1,this._myValueButtonEditIntensity=0,this._myValueButtonEditIntensityTimer=0,this._myStepButtonEditIntensity=0,this._myStepButtonEditIntensityTimer=0,this._myValueEditActive=!1,this._myStepEditActive=!1,this._myValueRealValue=null,this._myStepMultiplierValue=null,this._myStepFastEdit=!1,this._myScrollVariableActive=!1,this._myScrollDirection=0,this._myScrollVariableTimer=0,this._myHasScrolled=!1}setEasyTuneVariable(t,i){this._myVariable=t,typeof i<"u"?this._myAppendToVariableName=i:this._myAppendToVariableName="",this._myValueEditIndex>=0&&(this._myValueRealValue=this._myVariable.myValue[this._myValueEditIndex]),this._refreshUI()}isScrollVariableActive(){return this._myScrollVariableActive}getScrollVariableDirection(){return this._myScrollDirection}setScrollVariableActive(t,i){this._myScrollVariableActive=t,this._myScrollDirection=i,this._myScrollVariableTimer=this._mySetup.myScrollVariableDelay,this._myHasScrolled=!1}_refreshUI(){if(this._myVariable){this._myUI.myVariableLabelTextComponent.text=this._myVariable.myName.concat(this._myAppendToVariableName);for(let t=0;t<this._mySetup.myArraySize;t++)this._myUI.myValueTextComponents[t].text=this._myVariable.myValue[t].toFixed(this._myVariable.myDecimalPlaces);this._myUI.myStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myStepPerSecond)}}setVisible(t){t&&this._refreshUI(),this._myUI.setVisible(t),this._myIsVisible=t}registerScrollVariableRequestEventListener(t,i){this._myScrollVariableRequestCallbacks.set(t,i)}unregisterScrollVariableRequestEventListener(t){this._myScrollVariableRequestCallbacks.delete(t)}start(t,i){this._myUI.build(t,this._mySetup,i),this._myUI.setAdditionalButtonsActive(i.myEnableAdditionalButtons),this._addListeners()}update(t){this._isActive()&&(this._updateValue(t),this._updateScrollVariable(t))}_updateValue(t){let i=0;if(this._myGamepad){let s=this._myGamepad.getAxesInfo().myAxes[1];if(Math.abs(s)>this._mySetup.myEditThumbstickMinThreshold){let a=(Math.abs(s)-this._mySetup.myEditThumbstickMinThreshold)/(1-this._mySetup.myEditThumbstickMinThreshold);i=Math.sign(s)*a}}let o=0;if(this._myValueEditActive?o=i:this._myValueButtonEditIntensity!=0&&(this._myValueButtonEditIntensityTimer<=0?o=this._myValueButtonEditIntensity:this._myValueButtonEditIntensityTimer-=t),o!=0){let s=o*this._myVariable.myStepPerSecond*t;this._myValueRealValue+=s,this._myVariable.myMin!=null&&this._myVariable.myMax!=null?this._myValueRealValue=Math.pp_clamp(this._myValueRealValue,this._myVariable.myMin,this._myVariable.myMax):this._myVariable.myMin!=null?this._myValueRealValue=Math.max(this._myValueRealValue,this._myVariable.myMin):this._myVariable.myMax!=null&&(this._myValueRealValue=Math.min(this._myValueRealValue,this._myVariable.myMax));let a=Math.pow(10,this._myVariable.myDecimalPlaces);if(this._myVariable.myEditAllValuesTogether){let m=Math.round(this._myValueRealValue*a+Number.EPSILON)/a-this._myVariable.myValue[this._myValueEditIndex];for(let h=0;h<this._mySetup.myArraySize;h++)this._myVariable.myValue[h]=Math.round((this._myVariable.myValue[h]+m)*a+Number.EPSILON)/a,this._myVariable.myMin!=null&&this._myVariable.myMax!=null?this._myVariable.myValue[h]=Math.pp_clamp(this._myVariable.myValue[h],this._myVariable.myMin,this._myVariable.myMax):this._myVariable.myMin!=null?this._myVariable.myValue[h]=Math.max(this._myVariable.myValue[h],this._myVariable.myMin):this._myVariable.myMax!=null&&(this._myVariable.myValue[h]=Math.min(this._myVariable.myValue[h],this._myVariable.myMax)),this._myUI.myValueTextComponents[h].text=this._myVariable.myValue[h].toFixed(this._myVariable.myDecimalPlaces)}else this._myVariable.myValue[this._myValueEditIndex]=Math.round(this._myValueRealValue*a+Number.EPSILON)/a,this._myVariable.myMin!=null&&this._myVariable.myMax!=null?this._myVariable.myValue[this._myValueEditIndex]=Math.pp_clamp(this._myVariable.myValue[this._myValueEditIndex],this._myVariable.myMin,this._myVariable.myMax):this._myVariable.myMin!=null?this._myVariable.myValue[this._myValueEditIndex]=Math.max(this._myVariable.myValue[this._myValueEditIndex],this._myVariable.myMin):this._myVariable.myMax!=null&&(this._myVariable.myValue[this._myValueEditIndex]=Math.min(this._myVariable.myValue[this._myValueEditIndex],this._myVariable.myMax)),this._myUI.myValueTextComponents[this._myValueEditIndex].text=this._myVariable.myValue[this._myValueEditIndex].toFixed(this._myVariable.myDecimalPlaces)}else this._myValueRealValue=this._myVariable.myValue[this._myValueEditIndex];let n=0;if(this._myStepEditActive?n=i:this._myStepButtonEditIntensity!=0&&(this._myStepButtonEditIntensityTimer<=0?n=this._myStepButtonEditIntensity:this._myStepButtonEditIntensityTimer-=t),n!=0){let s=0;this._myStepFastEdit?(s=Math.sign(n)*1,this._myStepFastEdit=!1):s=n*this._mySetup.myStepMultiplierStepPerSecond*t,this._myStepMultiplierValue+=s,Math.abs(this._myStepMultiplierValue)>=1&&(Math.sign(this._myStepMultiplierValue)>0?(this._myStepMultiplierValue-=1,this._changeStep(this._myVariable.myStepPerSecond*10)):(this._myStepMultiplierValue+=1,this._changeStep(this._myVariable.myStepPerSecond*.1)))}else this._myStepMultiplierValue=0,this._myStepFastEdit=!0}_updateScrollVariable(t){this._myScrollVariableActive&&(this._myScrollVariableTimer<=0?(this._scrollVariableRequest(this._myScrollDirection),this._myScrollVariableTimer=this._mySetup.myScrollVariableDelay,this._myHasScrolled=!0):this._myScrollVariableTimer-=t)}_isActive(){return this._myIsVisible&&this._myVariable}_addListeners(){let t=this._myUI;t.myVariableLabelCursorTargetComponent.addClickFunction(this._resetAllValues.bind(this)),t.myVariableLabelCursorTargetComponent.addHoverFunction(this._genericTextHover.bind(this,t.myVariableLabelText)),t.myVariableLabelCursorTargetComponent.addUnHoverFunction(this._genericTextUnHover.bind(this,t.myVariableLabelText,this._mySetup.myVariableLabelTextScale)),t.myNextButtonCursorTargetComponent.addDownFunction(this._setScrollVariableActive.bind(this,!0,1,!1)),t.myNextButtonCursorTargetComponent.addDownOnHoverFunction(this._setScrollVariableActive.bind(this,!0,1,!1)),t.myNextButtonCursorTargetComponent.addUpFunction(this._setScrollVariableActive.bind(this,!1,0,!1)),t.myNextButtonCursorTargetComponent.addUpWithNoDownFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myNextButtonCursorTargetComponent.addUnHoverFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myNextButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myNextButtonBackgroundComponent.material)),t.myNextButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myNextButtonBackgroundComponent.material)),t.myPreviousButtonCursorTargetComponent.addDownFunction(this._setScrollVariableActive.bind(this,!0,-1,!1)),t.myPreviousButtonCursorTargetComponent.addDownOnHoverFunction(this._setScrollVariableActive.bind(this,!0,-1,!1)),t.myPreviousButtonCursorTargetComponent.addUpFunction(this._setScrollVariableActive.bind(this,!1,0,!1)),t.myPreviousButtonCursorTargetComponent.addUpWithNoDownFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myPreviousButtonCursorTargetComponent.addUnHoverFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myPreviousButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myPreviousButtonBackgroundComponent.material)),t.myPreviousButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myPreviousButtonBackgroundComponent.material));for(let i=0;i<this._mySetup.myArraySize;i++)t.myValueIncreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,i,1)),t.myValueIncreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,i,1)),t.myValueIncreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueIncreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueDecreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,i,-1)),t.myValueDecreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,i,-1)),t.myValueDecreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueDecreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,i,0)),t.myValueIncreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myValueIncreaseButtonBackgroundComponents[i].material)),t.myValueIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myValueIncreaseButtonBackgroundComponents[i].material)),t.myValueDecreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myValueDecreaseButtonBackgroundComponents[i].material)),t.myValueDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myValueDecreaseButtonBackgroundComponents[i].material)),t.myValueCursorTargetComponents[i].addClickFunction(this._resetValue.bind(this,i)),t.myValueCursorTargetComponents[i].addHoverFunction(this._setValueEditActive.bind(this,i,t.myValueTexts[i],!0)),t.myValueCursorTargetComponents[i].addUnHoverFunction(this._setValueEditActive.bind(this,i,t.myValueTexts[i],!1));t.myStepCursorTargetComponent.addClickFunction(this._resetStep.bind(this)),t.myStepCursorTargetComponent.addHoverFunction(this._setStepEditActive.bind(this,t.myStepText,!0)),t.myStepCursorTargetComponent.addUnHoverFunction(this._setStepEditActive.bind(this,t.myStepText,!1)),t.myStepIncreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,1)),t.myStepIncreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,1)),t.myStepIncreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,0)),t.myStepIncreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,0)),t.myStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,0)),t.myStepDecreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,-1)),t.myStepDecreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,-1)),t.myStepDecreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,0)),t.myStepDecreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,0)),t.myStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,0)),t.myStepIncreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myStepIncreaseButtonBackgroundComponent.material)),t.myStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myStepIncreaseButtonBackgroundComponent.material)),t.myStepDecreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myStepDecreaseButtonBackgroundComponent.material)),t.myStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myStepDecreaseButtonBackgroundComponent.material))}_setValueEditIntensity(t,i){(this._isActive()||i==0)&&(i!=0&&(this._myValueButtonEditIntensityTimer=this._mySetup.myButtonEditDelay,this._myValueRealValue=this._myVariable.myValue[t],this._myValueEditIndex=t),this._myValueButtonEditIntensity=i)}_setStepEditIntensity(t){(this._isActive()||t==0)&&(t!=0&&(this._myStepButtonEditIntensityTimer=this._mySetup.myButtonEditDelay),this._myStepButtonEditIntensity=t)}_setValueEditActive(t,i,o){(this._isActive()||!o)&&(o?(this._myValueRealValue=this._myVariable.myValue[t],this._myValueEditIndex=t,i.scale(this._mySetup.myTextHoverScaleMultiplier)):i.scalingWorld=this._mySetup.myValueTextScale,this._myValueEditActive=o)}_setStepEditActive(t,i){(this._isActive()||!i)&&(i?t.scale(this._mySetup.myTextHoverScaleMultiplier):t.scalingWorld=this._mySetup.myStepTextScale,this._myStepEditActive=i)}_setScrollVariableActive(t,i,o){if(this._isActive()||!t){let n=!t&&!this._myHasScrolled&&!o,s=this._myScrollDirection;this.setScrollVariableActive(t,i),n&&this._scrollVariableRequest(s)}}_scrollVariableRequest(t){if(this._isActive()&&t!=0)for(let i of this._myScrollVariableRequestCallbacks.values())i(t)}_resetValue(t){this._isActive()&&(this._myVariable.myValue[t]=this._myVariable.myInitialValue[t],this._myUI.myValueTextComponents[t].text=this._myVariable.myValue[t].toFixed(this._myVariable.myDecimalPlaces))}_resetAllValues(){for(let t=0;t<this._mySetup.myArraySize;t++)this._resetValue(t)}_resetStep(){this._isActive()&&this._changeStep(this._myVariable.myInitialStepPerSecond)}_changeStep(t){t=Math.pp_roundDecimal(t,10),this._myVariable.myStepPerSecond=t,this._myUI.myStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myStepPerSecond)}_genericHover(t){t.color=this._mySetup.myButtonHoverColor}_genericUnHover(t){t.color=this._mySetup.myBackgroundColor}_genericTextHover(t){t.scale(this._mySetup.myTextHoverScaleMultiplier)}_genericTextUnHover(t,i){t.scalingWorld=i}}});var Qi=S(()=>{PP.EasyTuneNumberArrayWidgetUI=class{build(t,i,o){this._myParentObject=t,this._mySetup=i,this._myAdditionalSetup=o,this._myAdditionalButtonsActive=!0,this._myPlaneMesh=PP.MeshUtils.createPlaneMesh(),this._createSkeleton(),this._setTransforms(),this._addComponents()}setVisible(t){this.myPivotObject.pp_setActiveHierarchy(t),t&&this.setAdditionalButtonsActive(this._myAdditionalButtonsActive)}setAdditionalButtonsActive(t){this._myAdditionalButtonsActive=t;for(let i=0;i<this._mySetup.myArraySize;i++)this.myValueIncreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myValueDecreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive);this.myStepIncreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myStepDecreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive)}_createSkeleton(){this.myPivotObject=WL.scene.addObject(this._myParentObject),this.myBackPanel=WL.scene.addObject(this.myPivotObject),this.myBackBackground=WL.scene.addObject(this.myBackPanel),this._createDisplaySkeleton(),this._createStepSkeleton(),this._createPointerSkeleton()}_createDisplaySkeleton(){this.myDisplayPanel=WL.scene.addObject(this.myPivotObject),this.myVariableLabelPanel=WL.scene.addObject(this.myDisplayPanel),this.myVariableLabelText=WL.scene.addObject(this.myVariableLabelPanel),this.myVariableLabelCursorTarget=WL.scene.addObject(this.myVariableLabelPanel),this.myNextButtonPanel=WL.scene.addObject(this.myVariableLabelPanel),this.myNextButtonBackground=WL.scene.addObject(this.myNextButtonPanel),this.myNextButtonText=WL.scene.addObject(this.myNextButtonPanel),this.myNextButtonCursorTarget=WL.scene.addObject(this.myNextButtonPanel),this.myPreviousButtonPanel=WL.scene.addObject(this.myVariableLabelPanel),this.myPreviousButtonBackground=WL.scene.addObject(this.myPreviousButtonPanel),this.myPreviousButtonText=WL.scene.addObject(this.myPreviousButtonPanel),this.myPreviousButtonCursorTarget=WL.scene.addObject(this.myPreviousButtonPanel),this.myValuesPanel=WL.scene.addObject(this.myDisplayPanel),this.myValuePanels=[],this.myValueTexts=[],this.myValueCursorTargets=[],this.myValueIncreaseButtonPanels=[],this.myValueIncreaseButtonBackgrounds=[],this.myValueIncreaseButtonTexts=[],this.myValueIncreaseButtonCursorTargets=[],this.myValueDecreaseButtonPanels=[],this.myValueDecreaseButtonBackgrounds=[],this.myValueDecreaseButtonTexts=[],this.myValueDecreaseButtonCursorTargets=[];for(let t=0;t<this._mySetup.myArraySize;t++)this.myValuePanels[t]=WL.scene.addObject(this.myValuesPanel),this.myValueTexts[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueCursorTargets[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueIncreaseButtonPanels[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueIncreaseButtonBackgrounds[t]=WL.scene.addObject(this.myValueIncreaseButtonPanels[t]),this.myValueIncreaseButtonTexts[t]=WL.scene.addObject(this.myValueIncreaseButtonPanels[t]),this.myValueIncreaseButtonCursorTargets[t]=WL.scene.addObject(this.myValueIncreaseButtonPanels[t]),this.myValueDecreaseButtonPanels[t]=WL.scene.addObject(this.myValuePanels[t]),this.myValueDecreaseButtonBackgrounds[t]=WL.scene.addObject(this.myValueDecreaseButtonPanels[t]),this.myValueDecreaseButtonTexts[t]=WL.scene.addObject(this.myValueDecreaseButtonPanels[t]),this.myValueDecreaseButtonCursorTargets[t]=WL.scene.addObject(this.myValueDecreaseButtonPanels[t])}_createStepSkeleton(){this.myStepPanel=WL.scene.addObject(this.myPivotObject),this.myStepText=WL.scene.addObject(this.myStepPanel),this.myStepCursorTarget=WL.scene.addObject(this.myStepPanel),this.myStepIncreaseButtonPanel=WL.scene.addObject(this.myStepPanel),this.myStepIncreaseButtonBackground=WL.scene.addObject(this.myStepIncreaseButtonPanel),this.myStepIncreaseButtonText=WL.scene.addObject(this.myStepIncreaseButtonPanel),this.myStepIncreaseButtonCursorTarget=WL.scene.addObject(this.myStepIncreaseButtonPanel),this.myStepDecreaseButtonPanel=WL.scene.addObject(this.myStepPanel),this.myStepDecreaseButtonBackground=WL.scene.addObject(this.myStepDecreaseButtonPanel),this.myStepDecreaseButtonText=WL.scene.addObject(this.myStepDecreaseButtonPanel),this.myStepDecreaseButtonCursorTarget=WL.scene.addObject(this.myStepDecreaseButtonPanel)}_createPointerSkeleton(){this.myPointerCursorTarget=WL.scene.addObject(this.myPivotObject)}_setTransforms(){this.myPivotObject.setTranslationLocal(this._mySetup.myPivotObjectPositions[this._myAdditionalSetup.myHandedness]),this.myBackPanel.setTranslationLocal(this._mySetup.myBackPanelPosition),this.myBackBackground.scale(this._mySetup.myBackBackgroundScale),this._setDisplayTransforms(),this._setStepTransforms(),this._setPointerTransform()}_setDisplayTransforms(){this.myDisplayPanel.setTranslationLocal(this._mySetup.myDisplayPanelPosition),this.myVariableLabelPanel.setTranslationLocal(this._mySetup.myVariableLabelPanelPosition),this.myVariableLabelText.scale(this._mySetup.myVariableLabelTextScale),this.myVariableLabelCursorTarget.setTranslationLocal(this._mySetup.myVariableLabelCursorTargetPosition),this.myNextButtonPanel.setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myNextButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myNextButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myNextButtonText.scale(this._mySetup.mySideButtonTextScale),this.myNextButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myPreviousButtonPanel.setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myPreviousButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myPreviousButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myPreviousButtonText.scale(this._mySetup.mySideButtonTextScale),this.myPreviousButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myValuesPanel.setTranslationLocal(this._mySetup.myValuesPanelPosition);for(let t=0;t<this._mySetup.myArraySize;t++)this.myValuePanels[t].setTranslationLocal(this._mySetup.myValuePanelsPositions[t]),this.myValueTexts[t].scale(this._mySetup.myValueTextScale),this.myValueCursorTargets[t].setTranslationLocal(this._mySetup.myValueCursorTargetPosition),this.myValueIncreaseButtonPanels[t].setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myValueIncreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myValueIncreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myValueIncreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myValueIncreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myValueDecreaseButtonPanels[t].setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myValueDecreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myValueDecreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myValueDecreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myValueDecreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition)}_setStepTransforms(){this.myStepPanel.setTranslationLocal(this._mySetup.myStepPanelPosition),this.myStepText.scale(this._mySetup.myStepTextScale),this.myStepCursorTarget.setTranslationLocal(this._mySetup.myStepCursorTargetPosition),this.myStepIncreaseButtonPanel.setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myStepIncreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myStepIncreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myStepIncreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myStepIncreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myStepDecreaseButtonPanel.setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myStepDecreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myStepDecreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myStepDecreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myStepDecreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition)}_setPointerTransform(){this.myPointerCursorTarget.setTranslationLocal(this._mySetup.myPointerCursorTargetPosition)}_addComponents(){this.myBackBackgroundComponent=this.myBackBackground.addComponent("mesh"),this.myBackBackgroundComponent.mesh=this._myPlaneMesh,this.myBackBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myBackBackgroundComponent.material.color=this._mySetup.myBackBackgroundColor,this._addDisplayComponents(),this._addStepComponents(),this._addPointerComponents()}_addDisplayComponents(){this.myVariableLabelTextComponent=this.myVariableLabelText.addComponent("text"),this._setupTextComponent(this.myVariableLabelTextComponent),this.myVariableLabelTextComponent.text=" ",this.myVariableLabelCursorTargetComponent=this.myVariableLabelCursorTarget.addComponent("cursor-target"),this.myVariableLabelCollisionComponent=this.myVariableLabelCursorTarget.addComponent("collision"),this.myVariableLabelCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myVariableLabelCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myVariableLabelCollisionComponent.extents=this._mySetup.myVariableLabelCollisionExtents,this.myNextButtonBackgroundComponent=this.myNextButtonBackground.addComponent("mesh"),this.myNextButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myNextButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myNextButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myNextButtonTextComponent=this.myNextButtonText.addComponent("text"),this._setupTextComponent(this.myNextButtonTextComponent),this.myNextButtonTextComponent.text=this._mySetup.myNextButtonText,this.myNextButtonCursorTargetComponent=this.myNextButtonCursorTarget.addComponent("cursor-target"),this.myNextButtonCollisionComponent=this.myNextButtonCursorTarget.addComponent("collision"),this.myNextButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myNextButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myNextButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myPreviousButtonBackgroundComponent=this.myPreviousButtonBackground.addComponent("mesh"),this.myPreviousButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myPreviousButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPreviousButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myPreviousButtonTextComponent=this.myPreviousButtonText.addComponent("text"),this._setupTextComponent(this.myPreviousButtonTextComponent),this.myPreviousButtonTextComponent.text=this._mySetup.myPreviousButtonText,this.myPreviousButtonCursorTargetComponent=this.myPreviousButtonCursorTarget.addComponent("cursor-target"),this.myPreviousButtonCollisionComponent=this.myPreviousButtonCursorTarget.addComponent("collision"),this.myPreviousButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPreviousButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPreviousButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myValueTextComponents=[],this.myValueCursorTargetComponents=[],this.myValueCollisionComponents=[],this.myValueIncreaseButtonBackgroundComponents=[],this.myValueIncreaseButtonTextComponents=[],this.myValueIncreaseButtonCursorTargetComponents=[],this.myValueIncreaseButtonCollisionComponents=[],this.myValueDecreaseButtonBackgroundComponents=[],this.myValueDecreaseButtonTextComponents=[],this.myValueDecreaseButtonCursorTargetComponents=[],this.myValueDecreaseButtonCollisionComponents=[];for(let t=0;t<this._mySetup.myArraySize;t++)this.myValueTextComponents[t]=this.myValueTexts[t].addComponent("text"),this._setupTextComponent(this.myValueTextComponents[t]),this.myValueTextComponents[t].text=" ",this.myValueCursorTargetComponents[t]=this.myValueCursorTargets[t].addComponent("cursor-target"),this.myValueCollisionComponents[t]=this.myValueCursorTargets[t].addComponent("collision"),this.myValueCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myValueCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myValueCollisionComponents[t].extents=this._mySetup.myValueCollisionExtents,this.myValueIncreaseButtonBackgroundComponents[t]=this.myValueIncreaseButtonBackgrounds[t].addComponent("mesh"),this.myValueIncreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myValueIncreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myValueIncreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myValueIncreaseButtonTextComponents[t]=this.myValueIncreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myValueIncreaseButtonTextComponents[t]),this.myValueIncreaseButtonTextComponents[t].text=this._mySetup.myIncreaseButtonText,this.myValueIncreaseButtonCursorTargetComponents[t]=this.myValueIncreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myValueIncreaseButtonCollisionComponents[t]=this.myValueIncreaseButtonCursorTargets[t].addComponent("collision"),this.myValueIncreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myValueIncreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myValueIncreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents,this.myValueDecreaseButtonBackgroundComponents[t]=this.myValueDecreaseButtonBackgrounds[t].addComponent("mesh"),this.myValueDecreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myValueDecreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myValueDecreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myValueDecreaseButtonTextComponents[t]=this.myValueDecreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myValueDecreaseButtonTextComponents[t]),this.myValueDecreaseButtonTextComponents[t].text=this._mySetup.myDecreaseButtonText,this.myValueDecreaseButtonCursorTargetComponents[t]=this.myValueDecreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myValueDecreaseButtonCollisionComponents[t]=this.myValueDecreaseButtonCursorTargets[t].addComponent("collision"),this.myValueDecreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myValueDecreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myValueDecreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents}_addStepComponents(){this.myStepTextComponent=this.myStepText.addComponent("text"),this._setupTextComponent(this.myStepTextComponent),this.myStepTextComponent.text=" ",this.myStepCursorTargetComponent=this.myStepCursorTarget.addComponent("cursor-target"),this.myStepCollisionComponent=this.myStepCursorTarget.addComponent("collision"),this.myStepCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myStepCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myStepCollisionComponent.extents=this._mySetup.myStepCollisionExtents,this.myStepIncreaseButtonBackgroundComponent=this.myStepIncreaseButtonBackground.addComponent("mesh"),this.myStepIncreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myStepIncreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myStepIncreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myStepIncreaseButtonTextComponent=this.myStepIncreaseButtonText.addComponent("text"),this._setupTextComponent(this.myStepIncreaseButtonTextComponent),this.myStepIncreaseButtonTextComponent.text=this._mySetup.myIncreaseButtonText,this.myStepIncreaseButtonCursorTargetComponent=this.myStepIncreaseButtonCursorTarget.addComponent("cursor-target"),this.myStepIncreaseButtonCollisionComponent=this.myStepIncreaseButtonCursorTarget.addComponent("collision"),this.myStepIncreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myStepIncreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myStepIncreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myStepDecreaseButtonBackgroundComponent=this.myStepDecreaseButtonBackground.addComponent("mesh"),this.myStepDecreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myStepDecreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myStepDecreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myStepDecreaseButtonTextComponent=this.myStepDecreaseButtonText.addComponent("text"),this._setupTextComponent(this.myStepDecreaseButtonTextComponent),this.myStepDecreaseButtonTextComponent.text=this._mySetup.myDecreaseButtonText,this.myStepDecreaseButtonCursorTargetComponent=this.myStepDecreaseButtonCursorTarget.addComponent("cursor-target"),this.myStepDecreaseButtonCollisionComponent=this.myStepDecreaseButtonCursorTarget.addComponent("collision"),this.myStepDecreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myStepDecreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myStepDecreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents}_addPointerComponents(){this.myPointerCollisionComponent=this.myPointerCursorTarget.addComponent("collision"),this.myPointerCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPointerCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPointerCollisionComponent.extents=this._mySetup.myPointerCollisionExtents}_setupTextComponent(t){t.alignment=this._mySetup.myTextAlignment,t.justification=this._mySetup.myTextJustification,t.material=this._myAdditionalSetup.myTextMaterial.clone(),t.material.outlineRange=this._mySetup.myTextOutlineRange,t.material.color=this._mySetup.myTextColor,t.material.outlineColor=this._mySetup.myTextOutlineColor,t.text=""}}});var zi=S(()=>{PP.EasyTuneNumberArrayWidgetSetup=class{constructor(t){this.myArraySize=t,this._initializeBuildSetup(),this._initializeRuntimeSetup()}_initializeBuildSetup(){this.myBackgroundColor=[46/255,46/255,46/255,1],this.myCursorTargetCollisionCollider=2,this.myCursorTargetCollisionGroup=7,this.myCursorTargetCollisionThickness=.001,this.myDefaultTextColor=[255/255,255/255,255/255,1],this.myTextAlignment=2,this.myTextJustification=2,this.myTextOutlineRange=[.45,.45],this.myTextColor=this.myDefaultTextColor,this.myTextOutlineColor=this.myDefaultTextColor,this.myPivotObjectPositions=[],this.myPivotObjectPositions[PP.ToolHandedness.NONE]=[0,0,0],this.myPivotObjectPositions[PP.ToolHandedness.LEFT]=[-.04,.02,3713e-8],this.myPivotObjectPositions[PP.ToolHandedness.RIGHT]=[-.08,.02,3713e-8];let t=.01,i=.0125,o=.055,n=.017,s=.2;this.mySideButtonBackgroundScale=[.015,.015,1],this.mySideButtonTextScale=[.18,.18,.18],this.mySideButtonTextPosition=[0,0,.007],this.mySideButtonCursorTargetPosition=[0,0,0],this.mySideButtonCursorTargetPosition[2]=n-t,this.mySideButtonCollisionExtents=this.mySideButtonBackgroundScale.slice(0),this.mySideButtonCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myLeftSideButtonPosition=[0,0,-1e-5],this.myLeftSideButtonPosition[0]=-s+this.mySideButtonBackgroundScale[0]+i,this.myRightSideButtonPosition=[0,0,-1e-5],this.myRightSideButtonPosition[0]=s-this.mySideButtonBackgroundScale[0]-i,this.myIncreaseButtonText="+",this.myDecreaseButtonText="-",this.myDisplayPanelPosition=[0,.1,0],this.myVariableLabelPanelPosition=[0,.025,t],this.myVariableLabelTextScale=[.19,.19,.19],this.myVariableLabelCursorTargetPosition=[0,0,0],this.myVariableLabelCursorTargetPosition[2]=n-t,this.myVariableLabelCollisionExtents=[.065,.0175,1],this.myVariableLabelCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myNextButtonText=">",this.myPreviousButtonText="<",this.myValuesPanelPosition=[0,this.myVariableLabelPanelPosition[1]-o,t],this.myValueTextScale=[.4,.4,.4],this.myValueCursorTargetPosition=[0,0,0],this.myValueCursorTargetPosition[2]=n-t,this.myValueCollisionExtents=[.065,.02,1],this.myValueCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myDistanceBetweenValues=this.mySideButtonBackgroundScale[1]*2+.015,this.myValuePanelsPositions=[],this.myValuePanelsPositions[0]=[0,0,0];for(let l=1;l<this.myArraySize;l++)this.myValuePanelsPositions[l]=this.myValuePanelsPositions[l-1].slice(0),this.myValuePanelsPositions[l][1]-=this.myDistanceBetweenValues;let a=this.myValuePanelsPositions[this.myArraySize-1]?this.myValuePanelsPositions[this.myArraySize-1][1]:0;this.myStepPanelPosition=[0,this.myDisplayPanelPosition[1]+this.myValuesPanelPosition[1]+a-o,t],this.myStepTextScale=[.19,.19,.19],this.myStepStartString="Step: ",this.myStepCursorTargetPosition=[0,0,0],this.myStepCursorTargetPosition[2]=n-this.myStepPanelPosition[2],this.myStepCollisionExtents=[.065,.0175,1],this.myStepCollisionExtents[2]=this.myCursorTargetCollisionThickness;{let l=this.myDisplayPanelPosition[1]+this.myVariableLabelPanelPosition[1]+this.mySideButtonBackgroundScale[1]+i*1.25,m=this.myStepPanelPosition[1]-i*1.25-this.mySideButtonBackgroundScale[1];this.myBackPanelPosition=[0,(l+m)/2,0],this.myBackBackgroundScale=[s,(l-m)/2,1],this.myBackBackgroundColor=[70/255,70/255,70/255,1]}this.myPointerCollisionExtents=this.myBackBackgroundScale.slice(0),this.myPointerCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myPointerCursorTargetPosition=this.myBackPanelPosition.slice(0),this.myPointerCursorTargetPosition[2]=n-1e-4}_initializeRuntimeSetup(){this.myButtonHoverColor=[150/255,150/255,150/255,1],this.myTextHoverScaleMultiplier=[1.25,1.25,1.25],this.myEditThumbstickMinThreshold=.35,this.myStepMultiplierStepPerSecond=2.25,this.myButtonEditDelay=0,this.myScrollVariableDelay=.5}}});var Xi=S(()=>{PP.EasyTuneNumberWidget=class{constructor(t){this._myGamepad=t,this._myParentObject=null,this._myAdditionalSetup=null,this._myWidgets=new Map,this._myVariable=null,this._myIsVisible=!0,this._myAppendToVariableName=null,this._myScrollVariableRequestCallbacks=new Map,this._myCurrentArraySize=0}setEasyTuneVariable(t,i){this._myVariable=t,this._myCurrentArraySize=this._myVariable.myValue.length,this._myAppendToVariableName=i,this._myWidgets.has(this._myCurrentArraySize)||this._createWidget(this._myCurrentArraySize),this._myWidgets.get(this._myCurrentArraySize).setEasyTuneVariable(t,i),this.setVisible(this._myIsVisible)}setVisible(t){if(this._myVariable){this._sizeChangedCheck();for(let i of this._myWidgets.values())i.setVisible(!1);this._myWidgets.get(this._myCurrentArraySize).setVisible(t)}this._myIsVisible=t}isScrollVariableActive(){let t=this._myWidgets.get(this._myCurrentArraySize);return t?t.isScrollVariableActive():!1}getScrollVariableDirection(){let t=this._myWidgets.get(this._myCurrentArraySize);return t?t.getScrollVariableDirection():0}setScrollVariableActive(t,i){let o=this._myWidgets.get(this._myCurrentArraySize);o&&o.setScrollVariableActive(t,i)}registerScrollVariableRequestEventListener(t,i){this._myScrollVariableRequestCallbacks.set(t,i)}unregisterScrollVariableRequestEventListener(t){this._myScrollVariableRequestCallbacks.delete(t)}start(t,i){this._myParentObject=t,this._myAdditionalSetup=i,this._createWidget(1),this._myVariable&&this.setEasyTuneVariable(this._myVariable,this._myAppendToVariableName)}update(t){this._isActive()&&(this._sizeChangedCheck(),this._myWidgets.get(this._myCurrentArraySize).update(t))}_isActive(){return this._myIsVisible&&this._myVariable}_scrollVariableRequest(t){for(let i of this._myScrollVariableRequestCallbacks.values())i(t)}_createWidget(t){this._myWidgets.set(t,new PP.EasyTuneNumberArrayWidget(t,this._myGamepad)),this._myWidgets.get(t).start(this._myParentObject,this._myAdditionalSetup),this._myWidgets.get(t).setVisible(!1),this._myWidgets.get(t).registerScrollVariableRequestEventListener(this,this._scrollVariableRequest.bind(this))}_sizeChangedCheck(){this._myVariable.myValue.length!=this._myCurrentArraySize&&this.setEasyTuneVariable(this._myVariable,this._myAppendToVariableName)}}});var Yi=S(()=>{PP.EasyTuneTransformWidget=class{constructor(t){this._myGamepad=t,this._mySetup=new PP.EasyTuneTransformWidgetSetup,this._myUI=new PP.EasyTuneTransformWidgetUI,this._myVariable=null,this._myIsVisible=!0,this._myScrollVariableRequestCallbacks=new Map,this._myAppendToVariableName="",this._myValueButtonEditIntensity=0,this._myValueButtonEditIntensityTimer=0,this._myStepButtonEditIntensity=0,this._myStepButtonEditIntensityTimer=0,this._myValueEditActive=!1,this._myStepEditActive=!1,this._myValueRealValue=null,this._myComponentStepValue=null,this._myStepMultiplierValue=null,this._myStepFastEdit=!1,this._myValueEditIndex=-1,this._myComponentIndex=0,this._myStepIndex=0,this._myScrollVariableActive=!1,this._myScrollDirection=0,this._myScrollVariableTimer=0,this._myHasScrolled=!1}setEasyTuneVariable(t,i){this._myVariable=t,typeof i<"u"?this._myAppendToVariableName=i:this._myAppendToVariableName="",this._refreshUI()}isScrollVariableActive(){return this._myScrollVariableActive}getScrollVariableDirection(){return this._myScrollDirection}setScrollVariableActive(t,i){this._myScrollVariableActive=t,this._myScrollDirection=i,this._myScrollVariableTimer=this._mySetup.myScrollVariableDelay,this._myHasScrolled=!1}_refreshUI(){if(this._myVariable){this._myUI.myVariableLabelTextComponent.text=this._myVariable.myName.concat(this._myAppendToVariableName);for(let t=0;t<3;t++)this._myUI.myPositionTextComponents[t].text=this._myVariable.myPosition[t].toFixed(this._myVariable.myDecimalPlaces);this._myUI.myPositionStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myPositionStepPerSecond);for(let t=0;t<3;t++)this._myUI.myRotationTextComponents[t].text=this._myVariable.myRotation[t].toFixed(this._myVariable.myDecimalPlaces);this._myUI.myRotationStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myRotationStepPerSecond);for(let t=0;t<3;t++)this._myUI.myScaleTextComponents[t].text=this._myVariable.myScale[t].toFixed(this._myVariable.myDecimalPlaces);this._myUI.myScaleStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myScaleStepPerSecond)}}setVisible(t){t&&this._refreshUI(),this._myUI.setVisible(t),this._myIsVisible=t}registerScrollVariableRequestEventListener(t,i){this._myScrollVariableRequestCallbacks.set(t,i)}unregisterScrollVariableRequestEventListener(t){this._myScrollVariableRequestCallbacks.delete(t)}start(t,i){this._myUI.build(t,this._mySetup,i),this._myUI.setAdditionalButtonsActive(i.myEnableAdditionalButtons),this._addListeners()}update(t){this._isActive()&&(this._updateValue(t),this._updateScrollVariable(t))}_updateValue(t){let i=0;if(this._myGamepad){let s=this._myGamepad.getAxesInfo().myAxes[1];if(Math.abs(s)>this._mySetup.myEditThumbstickMinThreshold){let a=(Math.abs(s)-this._mySetup.myEditThumbstickMinThreshold)/(1-this._mySetup.myEditThumbstickMinThreshold);i=Math.sign(s)*a}}let o=0;if(this._myValueEditActive?o=i:this._myValueButtonEditIntensity!=0&&(this._myValueButtonEditIntensityTimer<=0?o=this._myValueButtonEditIntensity:this._myValueButtonEditIntensityTimer-=t),o!=0){let s=o*this._myComponentStepValue*t;this._myValueRealValue+=s;let a=Math.pow(10,this._myVariable.myDecimalPlaces);switch(this._myComponentIndex){case 0:this._myVariable.myPosition[this._myValueEditIndex]=Math.round(this._myValueRealValue*a+Number.EPSILON)/a,this._myUI.myPositionTextComponents[this._myValueEditIndex].text=this._myVariable.myPosition[this._myValueEditIndex].toFixed(this._myVariable.myDecimalPlaces);break;case 1:if(this._myValueRealValue>180){for(;this._myValueRealValue>180;)this._myValueRealValue-=180;this._myValueRealValue=-180+this._myValueRealValue}if(this._myValueRealValue<-180){for(;this._myValueRealValue<-180;)this._myValueRealValue+=180;this._myValueRealValue=180-this._myValueRealValue}this._myVariable.myRotation[this._myValueEditIndex]=Math.round(this._myValueRealValue*a+Number.EPSILON)/a,this._myUI.myRotationTextComponents[this._myValueEditIndex].text=this._myVariable.myRotation[this._myValueEditIndex].toFixed(this._myVariable.myDecimalPlaces);break;case 2:if(this._myValueRealValue<=0&&(this._myValueRealValue=1/a),this._myVariable.myScaleAsOne){let m=Math.round(this._myValueRealValue*a+Number.EPSILON)/a-this._myVariable.myScale[this._myValueEditIndex];for(let h=0;h<3;h++)this._myVariable.myScale[h]=Math.round((this._myVariable.myScale[h]+m)*a+Number.EPSILON)/a,this._myVariable.myScale[h]=Math.max(this._myVariable.myScale[h],1/a),this._myUI.myScaleTextComponents[h].text=this._myVariable.myScale[h].toFixed(this._myVariable.myDecimalPlaces)}else this._myVariable.myScale[this._myValueEditIndex]=Math.round(this._myValueRealValue*a+Number.EPSILON)/a,this._myVariable.myScale[this._myValueEditIndex]=Math.max(this._myVariable.myScale[this._myValueEditIndex],1/a),this._myUI.myScaleTextComponents[this._myValueEditIndex].text=this._myVariable.myScale[this._myValueEditIndex].toFixed(this._myVariable.myDecimalPlaces);break}}else switch(this._myComponentIndex){case 0:this._myValueRealValue=this._myVariable.myPosition[this._myValueEditIndex];break;case 1:this._myValueRealValue=this._myVariable.myRotation[this._myValueEditIndex];break;case 2:this._myValueRealValue=this._myVariable.myScale[this._myValueEditIndex];break}let n=0;if(this._myStepEditActive?n=i:this._myStepButtonEditIntensity!=0&&(this._myStepButtonEditIntensityTimer<=0?n=this._myStepButtonEditIntensity:this._myStepButtonEditIntensityTimer-=t),n!=0){let s=0;if(this._myStepFastEdit?(s=Math.sign(n)*1,this._myStepFastEdit=!1):s=n*this._mySetup.myStepMultiplierStepPerSecond*t,this._myStepMultiplierValue+=s,Math.abs(this._myStepMultiplierValue)>=1){let a=0;switch(this._myStepIndex){case 0:a=this._myVariable.myPositionStepPerSecond;break;case 1:a=this._myVariable.myRotationStepPerSecond;break;case 2:a=this._myVariable.myScaleStepPerSecond;break;default:a=0}Math.sign(this._myStepMultiplierValue)>0?(this._myStepMultiplierValue-=1,this._changeStep(this._myStepIndex,a*10)):(this._myStepMultiplierValue+=1,this._changeStep(this._myStepIndex,a*.1))}}else this._myStepMultiplierValue=0,this._myStepFastEdit=!0}_updateScrollVariable(t){this._myScrollVariableActive&&(this._myScrollVariableTimer<=0?(this._scrollVariableRequest(this._myScrollDirection),this._myScrollVariableTimer=this._mySetup.myScrollVariableDelay,this._myHasScrolled=!0):this._myScrollVariableTimer-=t)}_isActive(){return this._myIsVisible&&this._myVariable}_addListeners(){let t=this._myUI;t.myVariableLabelCursorTargetComponent.addClickFunction(this._resetAllValues.bind(this)),t.myVariableLabelCursorTargetComponent.addHoverFunction(this._genericTextHover.bind(this,t.myVariableLabelText)),t.myVariableLabelCursorTargetComponent.addUnHoverFunction(this._genericTextUnHover.bind(this,t.myVariableLabelText,this._mySetup.myVariableLabelTextScale)),t.myNextButtonCursorTargetComponent.addDownFunction(this._setScrollVariableActive.bind(this,!0,1,!1)),t.myNextButtonCursorTargetComponent.addDownOnHoverFunction(this._setScrollVariableActive.bind(this,!0,1,!1)),t.myNextButtonCursorTargetComponent.addUpFunction(this._setScrollVariableActive.bind(this,!1,0,!1)),t.myNextButtonCursorTargetComponent.addUpWithNoDownFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myNextButtonCursorTargetComponent.addUnHoverFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myNextButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myNextButtonBackgroundComponent.material)),t.myNextButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myNextButtonBackgroundComponent.material)),t.myPreviousButtonCursorTargetComponent.addDownFunction(this._setScrollVariableActive.bind(this,!0,-1,!1)),t.myPreviousButtonCursorTargetComponent.addDownOnHoverFunction(this._setScrollVariableActive.bind(this,!0,-1,!1)),t.myPreviousButtonCursorTargetComponent.addUpFunction(this._setScrollVariableActive.bind(this,!1,0,!1)),t.myPreviousButtonCursorTargetComponent.addUpWithNoDownFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myPreviousButtonCursorTargetComponent.addUnHoverFunction(this._setScrollVariableActive.bind(this,!1,0,!0)),t.myPreviousButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myPreviousButtonBackgroundComponent.material)),t.myPreviousButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myPreviousButtonBackgroundComponent.material)),t.myPositionLabelCursorTargetComponent.addClickFunction(this._resetComponentValues.bind(this,0)),t.myPositionLabelCursorTargetComponent.addHoverFunction(this._genericTextHover.bind(this,t.myPositionLabelText)),t.myPositionLabelCursorTargetComponent.addUnHoverFunction(this._genericTextUnHover.bind(this,t.myPositionLabelText,this._mySetup.myComponentLabelTextScale));for(let i=0;i<3;i++)t.myPositionIncreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,0,i,1)),t.myPositionIncreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,0,i,1)),t.myPositionIncreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,0,i,0)),t.myPositionIncreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,0,i,0)),t.myPositionIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,0,i,0)),t.myPositionDecreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,0,i,-1)),t.myPositionDecreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,0,i,-1)),t.myPositionDecreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,0,i,0)),t.myPositionDecreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,0,i,0)),t.myPositionDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,0,i,0)),t.myPositionIncreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myPositionIncreaseButtonBackgroundComponents[i].material)),t.myPositionIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myPositionIncreaseButtonBackgroundComponents[i].material)),t.myPositionDecreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myPositionDecreaseButtonBackgroundComponents[i].material)),t.myPositionDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myPositionDecreaseButtonBackgroundComponents[i].material)),t.myPositionCursorTargetComponents[i].addClickFunction(this._resetValue.bind(this,0,i)),t.myPositionCursorTargetComponents[i].addHoverFunction(this._setValueEditActive.bind(this,0,i,t.myPositionTexts[i],!0)),t.myPositionCursorTargetComponents[i].addUnHoverFunction(this._setValueEditActive.bind(this,0,i,t.myPositionTexts[i],!1));t.myRotationLabelCursorTargetComponent.addClickFunction(this._resetComponentValues.bind(this,1)),t.myRotationLabelCursorTargetComponent.addHoverFunction(this._genericTextHover.bind(this,t.myRotationLabelText)),t.myRotationLabelCursorTargetComponent.addUnHoverFunction(this._genericTextUnHover.bind(this,t.myRotationLabelText,this._mySetup.myComponentLabelTextScale));for(let i=0;i<3;i++)t.myRotationIncreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,1,i,1)),t.myRotationIncreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,1,i,1)),t.myRotationIncreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,1,i,0)),t.myRotationIncreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,1,i,0)),t.myRotationIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,1,i,0)),t.myRotationDecreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,1,i,-1)),t.myRotationDecreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,1,i,-1)),t.myRotationDecreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,1,i,0)),t.myRotationDecreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,1,i,0)),t.myRotationDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,1,i,0)),t.myRotationIncreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myRotationIncreaseButtonBackgroundComponents[i].material)),t.myRotationIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myRotationIncreaseButtonBackgroundComponents[i].material)),t.myRotationDecreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myRotationDecreaseButtonBackgroundComponents[i].material)),t.myRotationDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myRotationDecreaseButtonBackgroundComponents[i].material)),t.myRotationCursorTargetComponents[i].addClickFunction(this._resetValue.bind(this,1,i)),t.myRotationCursorTargetComponents[i].addHoverFunction(this._setValueEditActive.bind(this,1,i,t.myRotationTexts[i],!0)),t.myRotationCursorTargetComponents[i].addUnHoverFunction(this._setValueEditActive.bind(this,1,i,t.myRotationTexts[i],!1));t.myScaleLabelCursorTargetComponent.addClickFunction(this._resetComponentValues.bind(this,2)),t.myScaleLabelCursorTargetComponent.addHoverFunction(this._genericTextHover.bind(this,t.myScaleLabelText)),t.myScaleLabelCursorTargetComponent.addUnHoverFunction(this._genericTextUnHover.bind(this,t.myScaleLabelText,this._mySetup.myComponentLabelTextScale));for(let i=0;i<3;i++)t.myScaleIncreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,2,i,1)),t.myScaleIncreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,2,i,1)),t.myScaleIncreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,2,i,0)),t.myScaleIncreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,2,i,0)),t.myScaleIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,2,i,0)),t.myScaleDecreaseButtonCursorTargetComponents[i].addDownFunction(this._setValueEditIntensity.bind(this,2,i,-1)),t.myScaleDecreaseButtonCursorTargetComponents[i].addDownOnHoverFunction(this._setValueEditIntensity.bind(this,2,i,-1)),t.myScaleDecreaseButtonCursorTargetComponents[i].addUpFunction(this._setValueEditIntensity.bind(this,2,i,0)),t.myScaleDecreaseButtonCursorTargetComponents[i].addUpWithNoDownFunction(this._setValueEditIntensity.bind(this,2,i,0)),t.myScaleDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._setValueEditIntensity.bind(this,2,i,0)),t.myScaleIncreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myScaleIncreaseButtonBackgroundComponents[i].material)),t.myScaleIncreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myScaleIncreaseButtonBackgroundComponents[i].material)),t.myScaleDecreaseButtonCursorTargetComponents[i].addHoverFunction(this._genericHover.bind(this,t.myScaleDecreaseButtonBackgroundComponents[i].material)),t.myScaleDecreaseButtonCursorTargetComponents[i].addUnHoverFunction(this._genericUnHover.bind(this,t.myScaleDecreaseButtonBackgroundComponents[i].material)),t.myScaleCursorTargetComponents[i].addClickFunction(this._resetValue.bind(this,2,i)),t.myScaleCursorTargetComponents[i].addHoverFunction(this._setValueEditActive.bind(this,2,i,t.myScaleTexts[i],!0)),t.myScaleCursorTargetComponents[i].addUnHoverFunction(this._setValueEditActive.bind(this,2,i,t.myScaleTexts[i],!1));t.myPositionStepCursorTargetComponent.addClickFunction(this._resetStep.bind(this,0)),t.myPositionStepCursorTargetComponent.addHoverFunction(this._setStepEditActive.bind(this,0,t.myPositionStepText,!0)),t.myPositionStepCursorTargetComponent.addUnHoverFunction(this._setStepEditActive.bind(this,0,t.myPositionStepText,!1)),t.myPositionStepIncreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,0,1)),t.myPositionStepIncreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,0,1)),t.myPositionStepIncreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,0,0)),t.myPositionStepIncreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,0,0)),t.myPositionStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,0,0)),t.myPositionStepDecreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,0,-1)),t.myPositionStepDecreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,0,-1)),t.myPositionStepDecreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,0,0)),t.myPositionStepDecreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,0,0)),t.myPositionStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,0,0)),t.myPositionStepIncreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myPositionStepIncreaseButtonBackgroundComponent.material)),t.myPositionStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myPositionStepIncreaseButtonBackgroundComponent.material)),t.myPositionStepDecreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myPositionStepDecreaseButtonBackgroundComponent.material)),t.myPositionStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myPositionStepDecreaseButtonBackgroundComponent.material)),t.myRotationStepCursorTargetComponent.addClickFunction(this._resetStep.bind(this,1)),t.myRotationStepCursorTargetComponent.addHoverFunction(this._setStepEditActive.bind(this,1,t.myRotationStepText,!0)),t.myRotationStepCursorTargetComponent.addUnHoverFunction(this._setStepEditActive.bind(this,1,t.myRotationStepText,!1)),t.myRotationStepIncreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,1,1)),t.myRotationStepIncreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,1,1)),t.myRotationStepIncreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,1,0)),t.myRotationStepIncreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,1,0)),t.myRotationStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,1,0)),t.myRotationStepDecreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,1,-1)),t.myRotationStepDecreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,1,-1)),t.myRotationStepDecreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,1,0)),t.myRotationStepDecreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,1,0)),t.myRotationStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,1,0)),t.myRotationStepIncreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myRotationStepIncreaseButtonBackgroundComponent.material)),t.myRotationStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myRotationStepIncreaseButtonBackgroundComponent.material)),t.myRotationStepDecreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myRotationStepDecreaseButtonBackgroundComponent.material)),t.myRotationStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myRotationStepDecreaseButtonBackgroundComponent.material)),t.myScaleStepCursorTargetComponent.addClickFunction(this._resetStep.bind(this,2)),t.myScaleStepCursorTargetComponent.addHoverFunction(this._setStepEditActive.bind(this,2,t.myScaleStepText,!0)),t.myScaleStepCursorTargetComponent.addUnHoverFunction(this._setStepEditActive.bind(this,2,t.myScaleStepText,!1)),t.myScaleStepIncreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,2,1)),t.myScaleStepIncreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,2,1)),t.myScaleStepIncreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,2,0)),t.myScaleStepIncreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,2,0)),t.myScaleStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,2,0)),t.myScaleStepDecreaseButtonCursorTargetComponent.addDownFunction(this._setStepEditIntensity.bind(this,2,-1)),t.myScaleStepDecreaseButtonCursorTargetComponent.addDownOnHoverFunction(this._setStepEditIntensity.bind(this,2,-1)),t.myScaleStepDecreaseButtonCursorTargetComponent.addUpFunction(this._setStepEditIntensity.bind(this,2,0)),t.myScaleStepDecreaseButtonCursorTargetComponent.addUpWithNoDownFunction(this._setStepEditIntensity.bind(this,2,0)),t.myScaleStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._setStepEditIntensity.bind(this,2,0)),t.myScaleStepIncreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myScaleStepIncreaseButtonBackgroundComponent.material)),t.myScaleStepIncreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myScaleStepIncreaseButtonBackgroundComponent.material)),t.myScaleStepDecreaseButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myScaleStepDecreaseButtonBackgroundComponent.material)),t.myScaleStepDecreaseButtonCursorTargetComponent.addUnHoverFunction(this._genericUnHover.bind(this,t.myScaleStepDecreaseButtonBackgroundComponent.material))}_setValueEditIntensity(t,i,o){if(this._isActive()||o==0){if(o!=0){switch(t){case 0:this._myValueRealValue=this._myVariable.myPosition[i],this._myComponentStepValue=this._myVariable.myPositionStepPerSecond;break;case 1:this._myValueRealValue=this._myVariable.myRotation[i],this._myComponentStepValue=this._myVariable.myRotationStepPerSecond;break;case 2:this._myValueRealValue=this._myVariable.myScale[i],this._myComponentStepValue=this._myVariable.myScaleStepPerSecond;break}this._myValueButtonEditIntensityTimer=this._mySetup.myButtonEditDelay,this._myValueEditIndex=i,this._myComponentIndex=t}this._myValueButtonEditIntensity=o}}_setStepEditIntensity(t,i){(this._isActive()||i==0)&&(i!=0&&(this._myStepButtonEditIntensityTimer=this._mySetup.myButtonEditDelay),this._myStepButtonEditIntensity=i,this._myStepIndex=t)}_setValueEditActive(t,i,o,n){if(this._isActive()||!n){if(n){switch(t){case 0:this._myValueRealValue=this._myVariable.myPosition[i],this._myComponentStepValue=this._myVariable.myPositionStepPerSecond;break;case 1:this._myValueRealValue=this._myVariable.myRotation[i],this._myComponentStepValue=this._myVariable.myRotationStepPerSecond;break;case 2:this._myValueRealValue=this._myVariable.myScale[i],this._myComponentStepValue=this._myVariable.myScaleStepPerSecond;break}this._myValueEditIndex=i,this._myComponentIndex=t,o.scale(this._mySetup.myTextHoverScaleMultiplier)}else o.scalingWorld=this._mySetup.myValueTextScale;this._myValueEditActive=n}}_setStepEditActive(t,i,o){(this._isActive()||!o)&&(o?i.scale(this._mySetup.myTextHoverScaleMultiplier):i.scalingWorld=this._mySetup.myStepTextScale,this._myStepEditActive=o,this._myStepIndex=t)}_setScrollVariableActive(t,i,o){if(this._isActive()||!t){let n=!t&&!this._myHasScrolled&&!o,s=this._myScrollDirection;this.setScrollVariableActive(t,i),n&&this._scrollVariableRequest(s)}}_scrollVariableRequest(t){if(this._isActive()&&t!=0)for(let i of this._myScrollVariableRequestCallbacks.values())i(t)}_resetValue(t,i){if(this._isActive())switch(t){case 0:this._myVariable.myPosition[i]=this._myVariable.myInitialPosition[i],this._myUI.myPositionTextComponents[i].text=this._myVariable.myPosition[i].toFixed(this._myVariable.myDecimalPlaces);break;case 1:this._myVariable.myRotation[i]=this._myVariable.myInitialRotation[i],this._myUI.myRotationTextComponents[i].text=this._myVariable.myRotation[i].toFixed(this._myVariable.myDecimalPlaces);break;case 2:this._myVariable.myScale[i]=this._myVariable.myInitialScale[i],this._myUI.myScaleTextComponents[i].text=this._myVariable.myScale[i].toFixed(this._myVariable.myDecimalPlaces);break;default:initialValue=0}}_resetAllValues(){for(let t=0;t<3;t++)this._resetComponentValues(t)}_resetComponentValues(t){for(let i=0;i<3;i++)this._resetValue(t,i)}_resetStep(t){if(this._isActive()){let i=0;switch(t){case 0:i=this._myVariable.myInitialPositionStepPerSecond;break;case 1:i=this._myVariable.myInitialRotationStepPerSecond;break;case 2:i=this._myVariable.myInitialScaleStepPerSecond;break;default:i=0}this._changeStep(t,i)}}_changeStep(t,i){switch(i=Math.pp_roundDecimal(i,10),t){case 0:this._myVariable.myPositionStepPerSecond=i,this._myUI.myPositionStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myPositionStepPerSecond);break;case 1:this._myVariable.myRotationStepPerSecond=i,this._myUI.myRotationStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myRotationStepPerSecond);break;case 2:this._myVariable.myScaleStepPerSecond=i,this._myUI.myScaleStepTextComponent.text=this._mySetup.myStepStartString.concat(this._myVariable.myScaleStepPerSecond);break}}_genericHover(t){t.color=this._mySetup.myButtonHoverColor}_genericUnHover(t){t.color=this._mySetup.myBackgroundColor}_genericTextHover(t){t.scale(this._mySetup.myTextHoverScaleMultiplier)}_genericTextUnHover(t,i){t.scalingWorld=i}}});var Zi=S(()=>{PP.EasyTuneTransformWidgetUI=class{build(t,i,o){this._myParentObject=t,this._mySetup=i,this._myAdditionalSetup=o,this._myAdditionalButtonsActive=!0,this._myPlaneMesh=PP.MeshUtils.createPlaneMesh(),this._createSkeleton(),this._setTransforms(),this._addComponents()}setVisible(t){this.myPivotObject.pp_setActiveHierarchy(t),t&&this.setAdditionalButtonsActive(this._myAdditionalButtonsActive)}setAdditionalButtonsActive(t){this._myAdditionalButtonsActive=t;for(let i=0;i<3;i++)this.myPositionIncreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myPositionDecreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive);this.myPositionStepIncreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myPositionStepDecreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive);for(let i=0;i<3;i++)this.myRotationIncreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myRotationDecreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive);this.myRotationStepIncreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myRotationStepDecreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive);for(let i=0;i<3;i++)this.myScaleIncreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myScaleDecreaseButtonPanels[i].pp_setActiveHierarchy(this._myAdditionalButtonsActive);this.myScaleStepIncreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive),this.myScaleStepDecreaseButtonPanel.pp_setActiveHierarchy(this._myAdditionalButtonsActive)}_createSkeleton(){this.myPivotObject=WL.scene.addObject(this._myParentObject),this.myBackPanel=WL.scene.addObject(this.myPivotObject),this.myBackBackground=WL.scene.addObject(this.myBackPanel),this._createDisplaySkeleton(),this._createStepSkeleton(),this._createPointerSkeleton()}_createDisplaySkeleton(){this.myDisplayPanel=WL.scene.addObject(this.myPivotObject),this.myVariableLabelPanel=WL.scene.addObject(this.myDisplayPanel),this.myVariableLabelText=WL.scene.addObject(this.myVariableLabelPanel),this.myVariableLabelCursorTarget=WL.scene.addObject(this.myVariableLabelPanel),this.myNextButtonPanel=WL.scene.addObject(this.myVariableLabelPanel),this.myNextButtonBackground=WL.scene.addObject(this.myNextButtonPanel),this.myNextButtonText=WL.scene.addObject(this.myNextButtonPanel),this.myNextButtonCursorTarget=WL.scene.addObject(this.myNextButtonPanel),this.myPreviousButtonPanel=WL.scene.addObject(this.myVariableLabelPanel),this.myPreviousButtonBackground=WL.scene.addObject(this.myPreviousButtonPanel),this.myPreviousButtonText=WL.scene.addObject(this.myPreviousButtonPanel),this.myPreviousButtonCursorTarget=WL.scene.addObject(this.myPreviousButtonPanel),this.myPositionPanel=WL.scene.addObject(this.myDisplayPanel),this.myPositionLabelText=WL.scene.addObject(this.myPositionPanel),this.myPositionLabelCursorTarget=WL.scene.addObject(this.myPositionPanel),this.myPositionPanels=[],this.myPositionTexts=[],this.myPositionCursorTargets=[],this.myPositionIncreaseButtonPanels=[],this.myPositionIncreaseButtonBackgrounds=[],this.myPositionIncreaseButtonTexts=[],this.myPositionIncreaseButtonCursorTargets=[],this.myPositionDecreaseButtonPanels=[],this.myPositionDecreaseButtonBackgrounds=[],this.myPositionDecreaseButtonTexts=[],this.myPositionDecreaseButtonCursorTargets=[];for(let t=0;t<3;t++)this.myPositionPanels[t]=WL.scene.addObject(this.myPositionPanel),this.myPositionTexts[t]=WL.scene.addObject(this.myPositionPanels[t]),this.myPositionCursorTargets[t]=WL.scene.addObject(this.myPositionPanels[t]),this.myPositionIncreaseButtonPanels[t]=WL.scene.addObject(this.myPositionPanels[t]),this.myPositionIncreaseButtonBackgrounds[t]=WL.scene.addObject(this.myPositionIncreaseButtonPanels[t]),this.myPositionIncreaseButtonTexts[t]=WL.scene.addObject(this.myPositionIncreaseButtonPanels[t]),this.myPositionIncreaseButtonCursorTargets[t]=WL.scene.addObject(this.myPositionIncreaseButtonPanels[t]),this.myPositionDecreaseButtonPanels[t]=WL.scene.addObject(this.myPositionPanels[t]),this.myPositionDecreaseButtonBackgrounds[t]=WL.scene.addObject(this.myPositionDecreaseButtonPanels[t]),this.myPositionDecreaseButtonTexts[t]=WL.scene.addObject(this.myPositionDecreaseButtonPanels[t]),this.myPositionDecreaseButtonCursorTargets[t]=WL.scene.addObject(this.myPositionDecreaseButtonPanels[t]);this.myRotationPanel=WL.scene.addObject(this.myDisplayPanel),this.myRotationLabelText=WL.scene.addObject(this.myRotationPanel),this.myRotationLabelCursorTarget=WL.scene.addObject(this.myRotationPanel),this.myRotationPanels=[],this.myRotationTexts=[],this.myRotationCursorTargets=[],this.myRotationIncreaseButtonPanels=[],this.myRotationIncreaseButtonBackgrounds=[],this.myRotationIncreaseButtonTexts=[],this.myRotationIncreaseButtonCursorTargets=[],this.myRotationDecreaseButtonPanels=[],this.myRotationDecreaseButtonBackgrounds=[],this.myRotationDecreaseButtonTexts=[],this.myRotationDecreaseButtonCursorTargets=[];for(let t=0;t<3;t++)this.myRotationPanels[t]=WL.scene.addObject(this.myRotationPanel),this.myRotationTexts[t]=WL.scene.addObject(this.myRotationPanels[t]),this.myRotationCursorTargets[t]=WL.scene.addObject(this.myRotationPanels[t]),this.myRotationIncreaseButtonPanels[t]=WL.scene.addObject(this.myRotationPanels[t]),this.myRotationIncreaseButtonBackgrounds[t]=WL.scene.addObject(this.myRotationIncreaseButtonPanels[t]),this.myRotationIncreaseButtonTexts[t]=WL.scene.addObject(this.myRotationIncreaseButtonPanels[t]),this.myRotationIncreaseButtonCursorTargets[t]=WL.scene.addObject(this.myRotationIncreaseButtonPanels[t]),this.myRotationDecreaseButtonPanels[t]=WL.scene.addObject(this.myRotationPanels[t]),this.myRotationDecreaseButtonBackgrounds[t]=WL.scene.addObject(this.myRotationDecreaseButtonPanels[t]),this.myRotationDecreaseButtonTexts[t]=WL.scene.addObject(this.myRotationDecreaseButtonPanels[t]),this.myRotationDecreaseButtonCursorTargets[t]=WL.scene.addObject(this.myRotationDecreaseButtonPanels[t]);this.myScalePanel=WL.scene.addObject(this.myDisplayPanel),this.myScaleLabelText=WL.scene.addObject(this.myScalePanel),this.myScaleLabelCursorTarget=WL.scene.addObject(this.myScalePanel),this.myScalePanels=[],this.myScaleTexts=[],this.myScaleCursorTargets=[],this.myScaleIncreaseButtonPanels=[],this.myScaleIncreaseButtonBackgrounds=[],this.myScaleIncreaseButtonTexts=[],this.myScaleIncreaseButtonCursorTargets=[],this.myScaleDecreaseButtonPanels=[],this.myScaleDecreaseButtonBackgrounds=[],this.myScaleDecreaseButtonTexts=[],this.myScaleDecreaseButtonCursorTargets=[];for(let t=0;t<3;t++)this.myScalePanels[t]=WL.scene.addObject(this.myScalePanel),this.myScaleTexts[t]=WL.scene.addObject(this.myScalePanels[t]),this.myScaleCursorTargets[t]=WL.scene.addObject(this.myScalePanels[t]),this.myScaleIncreaseButtonPanels[t]=WL.scene.addObject(this.myScalePanels[t]),this.myScaleIncreaseButtonBackgrounds[t]=WL.scene.addObject(this.myScaleIncreaseButtonPanels[t]),this.myScaleIncreaseButtonTexts[t]=WL.scene.addObject(this.myScaleIncreaseButtonPanels[t]),this.myScaleIncreaseButtonCursorTargets[t]=WL.scene.addObject(this.myScaleIncreaseButtonPanels[t]),this.myScaleDecreaseButtonPanels[t]=WL.scene.addObject(this.myScalePanels[t]),this.myScaleDecreaseButtonBackgrounds[t]=WL.scene.addObject(this.myScaleDecreaseButtonPanels[t]),this.myScaleDecreaseButtonTexts[t]=WL.scene.addObject(this.myScaleDecreaseButtonPanels[t]),this.myScaleDecreaseButtonCursorTargets[t]=WL.scene.addObject(this.myScaleDecreaseButtonPanels[t])}_createStepSkeleton(){this.myPositionStepPanel=WL.scene.addObject(this.myPositionPanel),this.myPositionStepText=WL.scene.addObject(this.myPositionStepPanel),this.myPositionStepCursorTarget=WL.scene.addObject(this.myPositionStepPanel),this.myPositionStepIncreaseButtonPanel=WL.scene.addObject(this.myPositionStepPanel),this.myPositionStepIncreaseButtonBackground=WL.scene.addObject(this.myPositionStepIncreaseButtonPanel),this.myPositionStepIncreaseButtonText=WL.scene.addObject(this.myPositionStepIncreaseButtonPanel),this.myPositionStepIncreaseButtonCursorTarget=WL.scene.addObject(this.myPositionStepIncreaseButtonPanel),this.myPositionStepDecreaseButtonPanel=WL.scene.addObject(this.myPositionStepPanel),this.myPositionStepDecreaseButtonBackground=WL.scene.addObject(this.myPositionStepDecreaseButtonPanel),this.myPositionStepDecreaseButtonText=WL.scene.addObject(this.myPositionStepDecreaseButtonPanel),this.myPositionStepDecreaseButtonCursorTarget=WL.scene.addObject(this.myPositionStepDecreaseButtonPanel),this.myRotationStepPanel=WL.scene.addObject(this.myRotationPanel),this.myRotationStepText=WL.scene.addObject(this.myRotationStepPanel),this.myRotationStepCursorTarget=WL.scene.addObject(this.myRotationStepPanel),this.myRotationStepIncreaseButtonPanel=WL.scene.addObject(this.myRotationStepPanel),this.myRotationStepIncreaseButtonBackground=WL.scene.addObject(this.myRotationStepIncreaseButtonPanel),this.myRotationStepIncreaseButtonText=WL.scene.addObject(this.myRotationStepIncreaseButtonPanel),this.myRotationStepIncreaseButtonCursorTarget=WL.scene.addObject(this.myRotationStepIncreaseButtonPanel),this.myRotationStepDecreaseButtonPanel=WL.scene.addObject(this.myRotationStepPanel),this.myRotationStepDecreaseButtonBackground=WL.scene.addObject(this.myRotationStepDecreaseButtonPanel),this.myRotationStepDecreaseButtonText=WL.scene.addObject(this.myRotationStepDecreaseButtonPanel),this.myRotationStepDecreaseButtonCursorTarget=WL.scene.addObject(this.myRotationStepDecreaseButtonPanel),this.myScaleStepPanel=WL.scene.addObject(this.myScalePanel),this.myScaleStepText=WL.scene.addObject(this.myScaleStepPanel),this.myScaleStepCursorTarget=WL.scene.addObject(this.myScaleStepPanel),this.myScaleStepIncreaseButtonPanel=WL.scene.addObject(this.myScaleStepPanel),this.myScaleStepIncreaseButtonBackground=WL.scene.addObject(this.myScaleStepIncreaseButtonPanel),this.myScaleStepIncreaseButtonText=WL.scene.addObject(this.myScaleStepIncreaseButtonPanel),this.myScaleStepIncreaseButtonCursorTarget=WL.scene.addObject(this.myScaleStepIncreaseButtonPanel),this.myScaleStepDecreaseButtonPanel=WL.scene.addObject(this.myScaleStepPanel),this.myScaleStepDecreaseButtonBackground=WL.scene.addObject(this.myScaleStepDecreaseButtonPanel),this.myScaleStepDecreaseButtonText=WL.scene.addObject(this.myScaleStepDecreaseButtonPanel),this.myScaleStepDecreaseButtonCursorTarget=WL.scene.addObject(this.myScaleStepDecreaseButtonPanel)}_createPointerSkeleton(){this.myPointerCursorTarget=WL.scene.addObject(this.myPivotObject)}_setTransforms(){this.myPivotObject.setTranslationLocal(this._mySetup.myPivotObjectPositions[this._myAdditionalSetup.myHandedness]),this.myBackPanel.setTranslationLocal(this._mySetup.myBackPanelPosition),this.myBackBackground.scale(this._mySetup.myBackBackgroundScale),this._setDisplayTransforms(),this._setStepTransforms(),this._setPointerTransform()}_setDisplayTransforms(){this.myDisplayPanel.setTranslationLocal(this._mySetup.myDisplayPanelPosition),this.myVariableLabelPanel.setTranslationLocal(this._mySetup.myVariableLabelPanelPosition),this.myVariableLabelText.scale(this._mySetup.myVariableLabelTextScale),this.myVariableLabelCursorTarget.setTranslationLocal(this._mySetup.myVariableLabelCursorTargetPosition),this.myNextButtonPanel.setTranslationLocal(this._mySetup.myNextButtonPosition),this.myNextButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myNextButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myNextButtonText.scale(this._mySetup.mySideButtonTextScale),this.myNextButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myPreviousButtonPanel.setTranslationLocal(this._mySetup.myPreviousButtonPosition),this.myPreviousButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myPreviousButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myPreviousButtonText.scale(this._mySetup.mySideButtonTextScale),this.myPreviousButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myPositionPanel.setTranslationLocal(this._mySetup.myPositionPanelPosition),this.myPositionLabelText.scale(this._mySetup.myComponentLabelTextScale),this.myPositionLabelCursorTarget.setTranslationLocal(this._mySetup.myComponentLabelCursorTargetPosition);for(let t=0;t<3;t++)this.myPositionPanels[t].setTranslationLocal(this._mySetup.myValuePanelsPositions[t]),this.myPositionTexts[t].scale(this._mySetup.myValueTextScale),this.myPositionCursorTargets[t].setTranslationLocal(this._mySetup.myValueCursorTargetPosition),this.myPositionIncreaseButtonPanels[t].setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myPositionIncreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myPositionIncreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myPositionIncreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myPositionIncreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myPositionDecreaseButtonPanels[t].setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myPositionDecreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myPositionDecreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myPositionDecreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myPositionDecreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition);this.myRotationPanel.setTranslationLocal(this._mySetup.myRotationPanelPosition),this.myRotationLabelText.scale(this._mySetup.myComponentLabelTextScale),this.myRotationLabelCursorTarget.setTranslationLocal(this._mySetup.myComponentLabelCursorTargetPosition);for(let t=0;t<3;t++)this.myRotationPanels[t].setTranslationLocal(this._mySetup.myValuePanelsPositions[t]),this.myRotationTexts[t].scale(this._mySetup.myValueTextScale),this.myRotationCursorTargets[t].setTranslationLocal(this._mySetup.myValueCursorTargetPosition),this.myRotationIncreaseButtonPanels[t].setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myRotationIncreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myRotationIncreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myRotationIncreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myRotationIncreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myRotationDecreaseButtonPanels[t].setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myRotationDecreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myRotationDecreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myRotationDecreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myRotationDecreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition);this.myScalePanel.setTranslationLocal(this._mySetup.myScalePanelPosition),this.myScaleLabelText.scale(this._mySetup.myComponentLabelTextScale),this.myScaleLabelCursorTarget.setTranslationLocal(this._mySetup.myComponentLabelCursorTargetPosition);for(let t=0;t<3;t++)this.myScalePanels[t].setTranslationLocal(this._mySetup.myValuePanelsPositions[t]),this.myScaleTexts[t].scale(this._mySetup.myValueTextScale),this.myScaleCursorTargets[t].setTranslationLocal(this._mySetup.myValueCursorTargetPosition),this.myScaleIncreaseButtonPanels[t].setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myScaleIncreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myScaleIncreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myScaleIncreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myScaleIncreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myScaleDecreaseButtonPanels[t].setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myScaleDecreaseButtonBackgrounds[t].scale(this._mySetup.mySideButtonBackgroundScale),this.myScaleDecreaseButtonTexts[t].setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myScaleDecreaseButtonTexts[t].scale(this._mySetup.mySideButtonTextScale),this.myScaleDecreaseButtonCursorTargets[t].setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition)}_setStepTransforms(){this.myPositionStepPanel.setTranslationLocal(this._mySetup.myStepPanelPosition),this.myPositionStepText.scale(this._mySetup.myStepTextScale),this.myPositionStepCursorTarget.setTranslationLocal(this._mySetup.myStepCursorTargetPosition),this.myPositionStepIncreaseButtonPanel.setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myPositionStepIncreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myPositionStepIncreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myPositionStepIncreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myPositionStepIncreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myPositionStepDecreaseButtonPanel.setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myPositionStepDecreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myPositionStepDecreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myPositionStepDecreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myPositionStepDecreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myRotationStepPanel.setTranslationLocal(this._mySetup.myStepPanelPosition),this.myRotationStepText.scale(this._mySetup.myStepTextScale),this.myRotationStepCursorTarget.setTranslationLocal(this._mySetup.myStepCursorTargetPosition),this.myRotationStepIncreaseButtonPanel.setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myRotationStepIncreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myRotationStepIncreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myRotationStepIncreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myRotationStepIncreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myRotationStepDecreaseButtonPanel.setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myRotationStepDecreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myRotationStepDecreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myRotationStepDecreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myRotationStepDecreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myScaleStepPanel.setTranslationLocal(this._mySetup.myStepPanelPosition),this.myScaleStepText.scale(this._mySetup.myStepTextScale),this.myScaleStepCursorTarget.setTranslationLocal(this._mySetup.myStepCursorTargetPosition),this.myScaleStepIncreaseButtonPanel.setTranslationLocal(this._mySetup.myRightSideButtonPosition),this.myScaleStepIncreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myScaleStepIncreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myScaleStepIncreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myScaleStepIncreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition),this.myScaleStepDecreaseButtonPanel.setTranslationLocal(this._mySetup.myLeftSideButtonPosition),this.myScaleStepDecreaseButtonBackground.scale(this._mySetup.mySideButtonBackgroundScale),this.myScaleStepDecreaseButtonText.setTranslationLocal(this._mySetup.mySideButtonTextPosition),this.myScaleStepDecreaseButtonText.scale(this._mySetup.mySideButtonTextScale),this.myScaleStepDecreaseButtonCursorTarget.setTranslationLocal(this._mySetup.mySideButtonCursorTargetPosition)}_setPointerTransform(){this.myPointerCursorTarget.setTranslationLocal(this._mySetup.myPointerCursorTargetPosition)}_addComponents(){this.myBackBackgroundComponent=this.myBackBackground.addComponent("mesh"),this.myBackBackgroundComponent.mesh=this._myPlaneMesh,this.myBackBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myBackBackgroundComponent.material.color=this._mySetup.myBackBackgroundColor,this._addDisplayComponents(),this._addStepComponents(),this._addPointerComponents()}_addDisplayComponents(){this.myVariableLabelTextComponent=this.myVariableLabelText.addComponent("text"),this._setupTextComponent(this.myVariableLabelTextComponent),this.myVariableLabelTextComponent.text=" ",this.myVariableLabelCursorTargetComponent=this.myVariableLabelCursorTarget.addComponent("cursor-target"),this.myVariableLabelCollisionComponent=this.myVariableLabelCursorTarget.addComponent("collision"),this.myVariableLabelCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myVariableLabelCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myVariableLabelCollisionComponent.extents=this._mySetup.myVariableLabelCollisionExtents,this.myNextButtonBackgroundComponent=this.myNextButtonBackground.addComponent("mesh"),this.myNextButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myNextButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myNextButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myNextButtonTextComponent=this.myNextButtonText.addComponent("text"),this._setupTextComponent(this.myNextButtonTextComponent),this.myNextButtonTextComponent.text=this._mySetup.myNextButtonText,this.myNextButtonCursorTargetComponent=this.myNextButtonCursorTarget.addComponent("cursor-target"),this.myNextButtonCollisionComponent=this.myNextButtonCursorTarget.addComponent("collision"),this.myNextButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myNextButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myNextButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myPreviousButtonBackgroundComponent=this.myPreviousButtonBackground.addComponent("mesh"),this.myPreviousButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myPreviousButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPreviousButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myPreviousButtonTextComponent=this.myPreviousButtonText.addComponent("text"),this._setupTextComponent(this.myPreviousButtonTextComponent),this.myPreviousButtonTextComponent.text=this._mySetup.myPreviousButtonText,this.myPreviousButtonCursorTargetComponent=this.myPreviousButtonCursorTarget.addComponent("cursor-target"),this.myPreviousButtonCollisionComponent=this.myPreviousButtonCursorTarget.addComponent("collision"),this.myPreviousButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPreviousButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPreviousButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myPositionLabelTextComponent=this.myPositionLabelText.addComponent("text"),this._setupTextComponent(this.myPositionLabelTextComponent),this.myPositionLabelTextComponent.text=this._mySetup.myPositionText,this.myPositionLabelCursorTargetComponent=this.myPositionLabelCursorTarget.addComponent("cursor-target"),this.myPositionLabelCollisionComponent=this.myPositionLabelCursorTarget.addComponent("collision"),this.myPositionLabelCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionLabelCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionLabelCollisionComponent.extents=this._mySetup.myComponentLabelCollisionExtents,this.myPositionTextComponents=[],this.myPositionCursorTargetComponents=[],this.myPositionCollisionComponents=[],this.myPositionIncreaseButtonBackgroundComponents=[],this.myPositionIncreaseButtonTextComponents=[],this.myPositionIncreaseButtonCursorTargetComponents=[],this.myPositionIncreaseButtonCollisionComponents=[],this.myPositionDecreaseButtonBackgroundComponents=[],this.myPositionDecreaseButtonTextComponents=[],this.myPositionDecreaseButtonCursorTargetComponents=[],this.myPositionDecreaseButtonCollisionComponents=[];for(let t=0;t<3;t++)this.myPositionTextComponents[t]=this.myPositionTexts[t].addComponent("text"),this._setupTextComponent(this.myPositionTextComponents[t]),this.myPositionTextComponents[t].text=" ",this.myPositionCursorTargetComponents[t]=this.myPositionCursorTargets[t].addComponent("cursor-target"),this.myPositionCollisionComponents[t]=this.myPositionCursorTargets[t].addComponent("collision"),this.myPositionCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionCollisionComponents[t].extents=this._mySetup.myValueCollisionExtents,this.myPositionIncreaseButtonBackgroundComponents[t]=this.myPositionIncreaseButtonBackgrounds[t].addComponent("mesh"),this.myPositionIncreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myPositionIncreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPositionIncreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myPositionIncreaseButtonTextComponents[t]=this.myPositionIncreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myPositionIncreaseButtonTextComponents[t]),this.myPositionIncreaseButtonTextComponents[t].text=this._mySetup.myIncreaseButtonText,this.myPositionIncreaseButtonCursorTargetComponents[t]=this.myPositionIncreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myPositionIncreaseButtonCollisionComponents[t]=this.myPositionIncreaseButtonCursorTargets[t].addComponent("collision"),this.myPositionIncreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionIncreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionIncreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents,this.myPositionDecreaseButtonBackgroundComponents[t]=this.myPositionDecreaseButtonBackgrounds[t].addComponent("mesh"),this.myPositionDecreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myPositionDecreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPositionDecreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myPositionDecreaseButtonTextComponents[t]=this.myPositionDecreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myPositionDecreaseButtonTextComponents[t]),this.myPositionDecreaseButtonTextComponents[t].text=this._mySetup.myDecreaseButtonText,this.myPositionDecreaseButtonCursorTargetComponents[t]=this.myPositionDecreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myPositionDecreaseButtonCollisionComponents[t]=this.myPositionDecreaseButtonCursorTargets[t].addComponent("collision"),this.myPositionDecreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionDecreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionDecreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents;this.myRotationLabelTextComponent=this.myRotationLabelText.addComponent("text"),this._setupTextComponent(this.myRotationLabelTextComponent),this.myRotationLabelTextComponent.text=this._mySetup.myRotationText,this.myRotationLabelCursorTargetComponent=this.myRotationLabelCursorTarget.addComponent("cursor-target"),this.myRotationLabelCollisionComponent=this.myRotationLabelCursorTarget.addComponent("collision"),this.myRotationLabelCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationLabelCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationLabelCollisionComponent.extents=this._mySetup.myComponentLabelCollisionExtents,this.myRotationTextComponents=[],this.myRotationCursorTargetComponents=[],this.myRotationCollisionComponents=[],this.myRotationIncreaseButtonBackgroundComponents=[],this.myRotationIncreaseButtonTextComponents=[],this.myRotationIncreaseButtonCursorTargetComponents=[],this.myRotationIncreaseButtonCollisionComponents=[],this.myRotationDecreaseButtonBackgroundComponents=[],this.myRotationDecreaseButtonTextComponents=[],this.myRotationDecreaseButtonCursorTargetComponents=[],this.myRotationDecreaseButtonCollisionComponents=[];for(let t=0;t<3;t++)this.myRotationTextComponents[t]=this.myRotationTexts[t].addComponent("text"),this._setupTextComponent(this.myRotationTextComponents[t]),this.myRotationTextComponents[t].text=" ",this.myRotationCursorTargetComponents[t]=this.myRotationCursorTargets[t].addComponent("cursor-target"),this.myRotationCollisionComponents[t]=this.myRotationCursorTargets[t].addComponent("collision"),this.myRotationCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationCollisionComponents[t].extents=this._mySetup.myValueCollisionExtents,this.myRotationIncreaseButtonBackgroundComponents[t]=this.myRotationIncreaseButtonBackgrounds[t].addComponent("mesh"),this.myRotationIncreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myRotationIncreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myRotationIncreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myRotationIncreaseButtonTextComponents[t]=this.myRotationIncreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myRotationIncreaseButtonTextComponents[t]),this.myRotationIncreaseButtonTextComponents[t].text=this._mySetup.myIncreaseButtonText,this.myRotationIncreaseButtonCursorTargetComponents[t]=this.myRotationIncreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myRotationIncreaseButtonCollisionComponents[t]=this.myRotationIncreaseButtonCursorTargets[t].addComponent("collision"),this.myRotationIncreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationIncreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationIncreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents,this.myRotationDecreaseButtonBackgroundComponents[t]=this.myRotationDecreaseButtonBackgrounds[t].addComponent("mesh"),this.myRotationDecreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myRotationDecreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myRotationDecreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myRotationDecreaseButtonTextComponents[t]=this.myRotationDecreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myRotationDecreaseButtonTextComponents[t]),this.myRotationDecreaseButtonTextComponents[t].text=this._mySetup.myDecreaseButtonText,this.myRotationDecreaseButtonCursorTargetComponents[t]=this.myRotationDecreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myRotationDecreaseButtonCollisionComponents[t]=this.myRotationDecreaseButtonCursorTargets[t].addComponent("collision"),this.myRotationDecreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationDecreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationDecreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents;this.myScaleLabelTextComponent=this.myScaleLabelText.addComponent("text"),this._setupTextComponent(this.myScaleLabelTextComponent),this.myScaleLabelTextComponent.text=this._mySetup.myScaleText,this.myScaleLabelCursorTargetComponent=this.myScaleLabelCursorTarget.addComponent("cursor-target"),this.myScaleLabelCollisionComponent=this.myScaleLabelCursorTarget.addComponent("collision"),this.myScaleLabelCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleLabelCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleLabelCollisionComponent.extents=this._mySetup.myComponentLabelCollisionExtents,this.myScaleTextComponents=[],this.myScaleCursorTargetComponents=[],this.myScaleCollisionComponents=[],this.myScaleIncreaseButtonBackgroundComponents=[],this.myScaleIncreaseButtonTextComponents=[],this.myScaleIncreaseButtonCursorTargetComponents=[],this.myScaleIncreaseButtonCollisionComponents=[],this.myScaleDecreaseButtonBackgroundComponents=[],this.myScaleDecreaseButtonTextComponents=[],this.myScaleDecreaseButtonCursorTargetComponents=[],this.myScaleDecreaseButtonCollisionComponents=[];for(let t=0;t<3;t++)this.myScaleTextComponents[t]=this.myScaleTexts[t].addComponent("text"),this._setupTextComponent(this.myScaleTextComponents[t]),this.myScaleTextComponents[t].text=" ",this.myScaleCursorTargetComponents[t]=this.myScaleCursorTargets[t].addComponent("cursor-target"),this.myScaleCollisionComponents[t]=this.myScaleCursorTargets[t].addComponent("collision"),this.myScaleCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleCollisionComponents[t].extents=this._mySetup.myValueCollisionExtents,this.myScaleIncreaseButtonBackgroundComponents[t]=this.myScaleIncreaseButtonBackgrounds[t].addComponent("mesh"),this.myScaleIncreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myScaleIncreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myScaleIncreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myScaleIncreaseButtonTextComponents[t]=this.myScaleIncreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myScaleIncreaseButtonTextComponents[t]),this.myScaleIncreaseButtonTextComponents[t].text=this._mySetup.myIncreaseButtonText,this.myScaleIncreaseButtonCursorTargetComponents[t]=this.myScaleIncreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myScaleIncreaseButtonCollisionComponents[t]=this.myScaleIncreaseButtonCursorTargets[t].addComponent("collision"),this.myScaleIncreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleIncreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleIncreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents,this.myScaleDecreaseButtonBackgroundComponents[t]=this.myScaleDecreaseButtonBackgrounds[t].addComponent("mesh"),this.myScaleDecreaseButtonBackgroundComponents[t].mesh=this._myPlaneMesh,this.myScaleDecreaseButtonBackgroundComponents[t].material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myScaleDecreaseButtonBackgroundComponents[t].material.color=this._mySetup.myBackgroundColor,this.myScaleDecreaseButtonTextComponents[t]=this.myScaleDecreaseButtonTexts[t].addComponent("text"),this._setupTextComponent(this.myScaleDecreaseButtonTextComponents[t]),this.myScaleDecreaseButtonTextComponents[t].text=this._mySetup.myDecreaseButtonText,this.myScaleDecreaseButtonCursorTargetComponents[t]=this.myScaleDecreaseButtonCursorTargets[t].addComponent("cursor-target"),this.myScaleDecreaseButtonCollisionComponents[t]=this.myScaleDecreaseButtonCursorTargets[t].addComponent("collision"),this.myScaleDecreaseButtonCollisionComponents[t].collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleDecreaseButtonCollisionComponents[t].group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleDecreaseButtonCollisionComponents[t].extents=this._mySetup.mySideButtonCollisionExtents}_addStepComponents(){this.myPositionStepTextComponent=this.myPositionStepText.addComponent("text"),this._setupTextComponent(this.myPositionStepTextComponent),this.myPositionStepTextComponent.text=" ",this.myPositionStepCursorTargetComponent=this.myPositionStepCursorTarget.addComponent("cursor-target"),this.myPositionStepCollisionComponent=this.myPositionStepCursorTarget.addComponent("collision"),this.myPositionStepCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionStepCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionStepCollisionComponent.extents=this._mySetup.myStepCollisionExtents,this.myPositionStepIncreaseButtonBackgroundComponent=this.myPositionStepIncreaseButtonBackground.addComponent("mesh"),this.myPositionStepIncreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myPositionStepIncreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPositionStepIncreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myPositionStepIncreaseButtonTextComponent=this.myPositionStepIncreaseButtonText.addComponent("text"),this._setupTextComponent(this.myPositionStepIncreaseButtonTextComponent),this.myPositionStepIncreaseButtonTextComponent.text=this._mySetup.myIncreaseButtonText,this.myPositionStepIncreaseButtonCursorTargetComponent=this.myPositionStepIncreaseButtonCursorTarget.addComponent("cursor-target"),this.myPositionStepIncreaseButtonCollisionComponent=this.myPositionStepIncreaseButtonCursorTarget.addComponent("collision"),this.myPositionStepIncreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionStepIncreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionStepIncreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myPositionStepDecreaseButtonBackgroundComponent=this.myPositionStepDecreaseButtonBackground.addComponent("mesh"),this.myPositionStepDecreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myPositionStepDecreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPositionStepDecreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myPositionStepDecreaseButtonTextComponent=this.myPositionStepDecreaseButtonText.addComponent("text"),this._setupTextComponent(this.myPositionStepDecreaseButtonTextComponent),this.myPositionStepDecreaseButtonTextComponent.text=this._mySetup.myDecreaseButtonText,this.myPositionStepDecreaseButtonCursorTargetComponent=this.myPositionStepDecreaseButtonCursorTarget.addComponent("cursor-target"),this.myPositionStepDecreaseButtonCollisionComponent=this.myPositionStepDecreaseButtonCursorTarget.addComponent("collision"),this.myPositionStepDecreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPositionStepDecreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPositionStepDecreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myRotationStepTextComponent=this.myRotationStepText.addComponent("text"),this._setupTextComponent(this.myRotationStepTextComponent),this.myRotationStepTextComponent.text=" ",this.myRotationStepCursorTargetComponent=this.myRotationStepCursorTarget.addComponent("cursor-target"),this.myRotationStepCollisionComponent=this.myRotationStepCursorTarget.addComponent("collision"),this.myRotationStepCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationStepCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationStepCollisionComponent.extents=this._mySetup.myStepCollisionExtents,this.myRotationStepIncreaseButtonBackgroundComponent=this.myRotationStepIncreaseButtonBackground.addComponent("mesh"),this.myRotationStepIncreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myRotationStepIncreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myRotationStepIncreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myRotationStepIncreaseButtonTextComponent=this.myRotationStepIncreaseButtonText.addComponent("text"),this._setupTextComponent(this.myRotationStepIncreaseButtonTextComponent),this.myRotationStepIncreaseButtonTextComponent.text=this._mySetup.myIncreaseButtonText,this.myRotationStepIncreaseButtonCursorTargetComponent=this.myRotationStepIncreaseButtonCursorTarget.addComponent("cursor-target"),this.myRotationStepIncreaseButtonCollisionComponent=this.myRotationStepIncreaseButtonCursorTarget.addComponent("collision"),this.myRotationStepIncreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationStepIncreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationStepIncreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myRotationStepDecreaseButtonBackgroundComponent=this.myRotationStepDecreaseButtonBackground.addComponent("mesh"),this.myRotationStepDecreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myRotationStepDecreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myRotationStepDecreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myRotationStepDecreaseButtonTextComponent=this.myRotationStepDecreaseButtonText.addComponent("text"),this._setupTextComponent(this.myRotationStepDecreaseButtonTextComponent),this.myRotationStepDecreaseButtonTextComponent.text=this._mySetup.myDecreaseButtonText,this.myRotationStepDecreaseButtonCursorTargetComponent=this.myRotationStepDecreaseButtonCursorTarget.addComponent("cursor-target"),this.myRotationStepDecreaseButtonCollisionComponent=this.myRotationStepDecreaseButtonCursorTarget.addComponent("collision"),this.myRotationStepDecreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myRotationStepDecreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myRotationStepDecreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myScaleStepTextComponent=this.myScaleStepText.addComponent("text"),this._setupTextComponent(this.myScaleStepTextComponent),this.myScaleStepTextComponent.text=" ",this.myScaleStepCursorTargetComponent=this.myScaleStepCursorTarget.addComponent("cursor-target"),this.myScaleStepCollisionComponent=this.myScaleStepCursorTarget.addComponent("collision"),this.myScaleStepCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleStepCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleStepCollisionComponent.extents=this._mySetup.myStepCollisionExtents,this.myScaleStepIncreaseButtonBackgroundComponent=this.myScaleStepIncreaseButtonBackground.addComponent("mesh"),this.myScaleStepIncreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myScaleStepIncreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myScaleStepIncreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myScaleStepIncreaseButtonTextComponent=this.myScaleStepIncreaseButtonText.addComponent("text"),this._setupTextComponent(this.myScaleStepIncreaseButtonTextComponent),this.myScaleStepIncreaseButtonTextComponent.text=this._mySetup.myIncreaseButtonText,this.myScaleStepIncreaseButtonCursorTargetComponent=this.myScaleStepIncreaseButtonCursorTarget.addComponent("cursor-target"),this.myScaleStepIncreaseButtonCollisionComponent=this.myScaleStepIncreaseButtonCursorTarget.addComponent("collision"),this.myScaleStepIncreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleStepIncreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleStepIncreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents,this.myScaleStepDecreaseButtonBackgroundComponent=this.myScaleStepDecreaseButtonBackground.addComponent("mesh"),this.myScaleStepDecreaseButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myScaleStepDecreaseButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myScaleStepDecreaseButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myScaleStepDecreaseButtonTextComponent=this.myScaleStepDecreaseButtonText.addComponent("text"),this._setupTextComponent(this.myScaleStepDecreaseButtonTextComponent),this.myScaleStepDecreaseButtonTextComponent.text=this._mySetup.myDecreaseButtonText,this.myScaleStepDecreaseButtonCursorTargetComponent=this.myScaleStepDecreaseButtonCursorTarget.addComponent("cursor-target"),this.myScaleStepDecreaseButtonCollisionComponent=this.myScaleStepDecreaseButtonCursorTarget.addComponent("collision"),this.myScaleStepDecreaseButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myScaleStepDecreaseButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myScaleStepDecreaseButtonCollisionComponent.extents=this._mySetup.mySideButtonCollisionExtents}_addPointerComponents(){this.myPointerCollisionComponent=this.myPointerCursorTarget.addComponent("collision"),this.myPointerCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPointerCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPointerCollisionComponent.extents=this._mySetup.myPointerCollisionExtents}_setupTextComponent(t){t.alignment=this._mySetup.myTextAlignment,t.justification=this._mySetup.myTextJustification,t.material=this._myAdditionalSetup.myTextMaterial.clone(),t.material.outlineRange=this._mySetup.myTextOutlineRange,t.material.color=this._mySetup.myTextColor,t.material.outlineColor=this._mySetup.myTextOutlineColor,t.text=""}}});var Ki=S(()=>{PP.EasyTuneTransformWidgetSetup=class{constructor(){this._initializeBuildSetup(),this._initializeRuntimeSetup()}_initializeBuildSetup(){this.myBackgroundColor=[46/255,46/255,46/255,1],this.myCursorTargetCollisionCollider=2,this.myCursorTargetCollisionGroup=7,this.myCursorTargetCollisionThickness=.001,this.myDefaultTextColor=[255/255,255/255,255/255,1],this.myTextAlignment=2,this.myTextJustification=2,this.myTextOutlineRange=[.45,.45],this.myTextColor=this.myDefaultTextColor,this.myTextOutlineColor=this.myDefaultTextColor,this.myPivotObjectPositions=[],this.myPivotObjectPositions[PP.ToolHandedness.NONE]=[0,0,0],this.myPivotObjectPositions[PP.ToolHandedness.LEFT]=[-.04,.02,3713e-8],this.myPivotObjectPositions[PP.ToolHandedness.RIGHT]=[-.08,.02,3713e-8];let t=.01,i=.0125,o=.055,n=.017,s=.2;this.mySideButtonBackgroundScale=[.015,.015,1],this.mySideButtonTextScale=[.18,.18,.18],this.mySideButtonTextPosition=[0,0,.007],this.mySideButtonCursorTargetPosition=[0,0,0],this.mySideButtonCursorTargetPosition[2]=n-t,this.mySideButtonCollisionExtents=this.mySideButtonBackgroundScale.slice(0),this.mySideButtonCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myLeftSideButtonPosition=[-.13,0,0],this.myRightSideButtonPosition=[-this.myLeftSideButtonPosition[0],0,0],this.myPreviousButtonPosition=[0,0,-1e-5],this.myPreviousButtonPosition[0]=-s+this.mySideButtonBackgroundScale[0]+i,this.myNextButtonPosition=[0,0,-1e-5],this.myNextButtonPosition[0]=s-this.mySideButtonBackgroundScale[0]-i,this.myIncreaseButtonText="+",this.myDecreaseButtonText="-",this.myDisplayPanelPosition=[0,.1,0],this.myVariableLabelPanelPosition=[0,.025,t],this.myVariableLabelTextScale=[.19,.19,.19],this.myVariableLabelCursorTargetPosition=[0,0,0],this.myVariableLabelCursorTargetPosition[2]=n-t,this.myVariableLabelCollisionExtents=[.065,.0175,1],this.myVariableLabelCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myNextButtonText=">",this.myPreviousButtonText="<";let a=Math.abs(this.myNextButtonPosition[0])+Math.abs(this.myRightSideButtonPosition[0]),l=.045;this.myPositionPanelPosition=[0,this.myVariableLabelPanelPosition[1]-l,t],this.myRotationPanelPosition=[this.myPositionPanelPosition[0]+a,this.myVariableLabelPanelPosition[1]-l,t],this.myScalePanelPosition=[this.myPositionPanelPosition[0]-a,this.myVariableLabelPanelPosition[1]-l,t],this.myPositionText="Position",this.myRotationText="Rotation",this.myScaleText="Scale",this.myComponentLabelTextScale=[.19,.19,.19],this.myComponentLabelCursorTargetPosition=[0,0,0],this.myComponentLabelCursorTargetPosition[2]=n-t,this.myComponentLabelCollisionExtents=[.065,.0175,1],this.myComponentLabelCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myValueTextScale=[.4,.4,.4],this.myValueCursorTargetPosition=[0,0,0],this.myValueCursorTargetPosition[2]=n-t,this.myValueCollisionExtents=[.065,.02,1],this.myValueCollisionExtents[2]=this.myCursorTargetCollisionThickness;let m=this.mySideButtonBackgroundScale[1]*2+.015;this.myValuePanelsPositions=[],this.myValuePanelsPositions[0]=[0,-o,0];for(let r=1;r<3;r++)this.myValuePanelsPositions[r]=this.myValuePanelsPositions[r-1].slice(0),this.myValuePanelsPositions[r][1]-=m;let h=this.myValuePanelsPositions[2][1];this.myStepPanelPosition=[0,h-o,0],this.myStepTextScale=[.19,.19,.19],this.myStepStartString="Step: ",this.myStepCursorTargetPosition=[0,0,0],this.myStepCursorTargetPosition[2]=n-this.myStepPanelPosition[2],this.myStepCollisionExtents=[.065,.0175,1],this.myStepCollisionExtents[2]=this.myCursorTargetCollisionThickness;{let r=this.myDisplayPanelPosition[1]+this.myVariableLabelPanelPosition[1]+this.mySideButtonBackgroundScale[1]+i*1.25,u=this.myDisplayPanelPosition[1]+this.myPositionPanelPosition[1]+this.myStepPanelPosition[1]-i*1.25-this.mySideButtonBackgroundScale[1],c=this.myDisplayPanelPosition[0]+this.myRotationPanelPosition[0]+this.myRightSideButtonPosition[0]+this.mySideButtonBackgroundScale[0]+i,p=this.myDisplayPanelPosition[0]+this.myScalePanelPosition[0]+this.myLeftSideButtonPosition[0]-this.mySideButtonBackgroundScale[0]-i;this.myBackPanelPosition=[(c+p)/2,(r+u)/2,0],this.myBackBackgroundScale=[(c-p)/2,(r-u)/2,1],this.myBackBackgroundColor=[70/255,70/255,70/255,1]}this.myPointerCollisionExtents=this.myBackBackgroundScale.slice(0),this.myPointerCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myPointerCursorTargetPosition=this.myBackPanelPosition.slice(0),this.myPointerCursorTargetPosition[2]=n-1e-4}_initializeRuntimeSetup(){this.myButtonHoverColor=[150/255,150/255,150/255,1],this.myTextHoverScaleMultiplier=[1.25,1.25,1.25],this.myEditThumbstickMinThreshold=.35,this.myStepMultiplierStepPerSecond=2.25,this.myButtonEditDelay=0,this.myScrollVariableDelay=.5}}});var Ji=S(()=>{PP.EasyTuneWidget=class{constructor(){this._myIsStarted=!1,this._myStartVariable=null,this._myWidgetFrame=new PP.WidgetFrame("E",1),this._myWidgetFrame.registerWidgetVisibleChangedEventListener(this,this._widgetVisibleChanged.bind(this)),this._mySetup=new PP.EasyTuneWidgetSetup,this._myAdditionalSetup=null,this._myWidgets=[],this._myEasyTuneVariables=null,this._myEasyTuneLastSize=0,this._myVariableNames=null,this._myCurrentWidget=null,this._myCurrentVariable=null,this._myScrollVariableTimer=0,this._myGamepad=null,this._myRefreshVariablesTimer=0,this._myDirty=!1}setActiveVariable(t){this._myIsStarted?this._myEasyTuneVariables.has(t)?(this._myCurrentVariable=this._myEasyTuneVariables.get(t),this._selectCurrentWidget()):console.log("Can't set easy tune active variable"):this._myStartVariable=t}refresh(){this._myWidgetFrame.myIsWidgetVisible&&(this._myDirty=!0)}start(t,i,o){this._myRightGamepad=PP.myRightGamepad,this._myLeftGamepad=PP.myLeftGamepad,this._mySetup.myGamepadHandedness==PP.ToolHandedness.RIGHT?this._myGamepad=this._myRightGamepad:this._mySetup.myGamepadHandedness==PP.ToolHandedness.LEFT&&(this._myGamepad=this._myLeftGamepad),this._myIsStarted=!0,this._myAdditionalSetup=i,this._myWidgetFrame.start(t,i),this._myEasyTuneVariables=o,this._myEasyTuneLastSize=this._myEasyTuneVariables.size,this._myVariableNames=Array.from(this._myEasyTuneVariables.keys()),this._myEasyTuneVariables.size>0&&(this._myCurrentVariable=this._myEasyTuneVariables.get(this._myVariableNames[0])),this._myStartVariable&&(this._myEasyTuneVariables.has(this._myStartVariable)?this._myCurrentVariable=this._myEasyTuneVariables.get(this._myStartVariable):console.log("Can't set easy tune active variable")),this._initializeWidgets()}update(t){this._myWidgetFrame.update(t),(this._myEasyTuneVariables.size!=this._myEasyTuneLastSize||this._myDirty)&&this._refreshEasyTuneVariables(),this._myWidgetFrame.myIsWidgetVisible&&this._myEasyTuneVariables.size>0&&(this._mySetup.myRefreshVariablesDelay!=null&&(this._myRefreshVariablesTimer+=t,this._myRefreshVariablesTimer>this._mySetup.myRefreshVariablesDelay&&(this._myRefreshVariablesTimer=0,this._refreshEasyTuneVariables())),this._myCurrentWidget&&this._myCurrentWidget.update(t),this._myAdditionalSetup.myEnableGamepadScrollVariable&&this._updateGamepadScrollVariable(t)),this._updateGamepadWidgetVisibility(),this._updateActiveVariable()}_initializeWidgets(){this._myWidgets[PP.EasyTuneVariableType.NONE]=new PP.EasyTuneNoneWidget,this._myWidgets[PP.EasyTuneVariableType.NUMBER]=new PP.EasyTuneNumberWidget(this._myGamepad),this._myWidgets[PP.EasyTuneVariableType.BOOL]=new PP.EasyTuneBoolWidget(this._myGamepad),this._myWidgets[PP.EasyTuneVariableType.TRANSFORM]=new PP.EasyTuneTransformWidget(this._myGamepad);for(let t of this._myWidgets)t.start(this._myWidgetFrame.getWidgetObject(),this._myAdditionalSetup),t.setVisible(!1),t.registerScrollVariableRequestEventListener(this,this._scrollVariable.bind(this));this._selectCurrentWidget()}_selectCurrentWidget(){if(this._myEasyTuneVariables.size<=0)return;let t=!1,i=0;this._myCurrentWidget&&(t=this._myCurrentWidget.isScrollVariableActive(),i=this._myCurrentWidget.getScrollVariableDirection(),this._myCurrentWidget.setVisible(!1)),this._myCurrentVariable.myType in this._myWidgets?this._myCurrentWidget=this._myWidgets[this._myCurrentVariable.myType]:this._myCurrentWidget=this._myWidgets[PP.EasyTuneVariableType.NONE],this._myCurrentWidget.setEasyTuneVariable(this._myCurrentVariable,this._createIndexString()),this._myCurrentWidget.setVisible(this._myWidgetFrame.myIsWidgetVisible),this._myCurrentWidget.setScrollVariableActive(t,i)}_refreshEasyTuneVariables(){this._myVariableNames=Array.from(this._myEasyTuneVariables.keys()),this._myEasyTuneLastSize=this._myEasyTuneVariables.size,this._myEasyTuneVariables.size>0?(this._myCurrentVariable&&this._myEasyTuneVariables.has(this._myCurrentVariable.myName)?this._myCurrentVariable=this._myEasyTuneVariables.get(this._myCurrentVariable.myName):this._myCurrentVariable=this._myEasyTuneVariables.get(this._myVariableNames[0]),this._selectCurrentWidget()):(this._myCurrentVariable=null,this._myCurrentWidget&&(this._myCurrentWidget.setVisible(!1),this._myCurrentWidget=null)),this._myDirty=!1}_updateGamepadWidgetVisibility(){this._myGamepad&&(this._myGamepad.getButtonInfo(PP.ButtonType.BOTTOM_BUTTON).isPressStart()&&this._myGamepad.getButtonInfo(PP.ButtonType.TOP_BUTTON).myIsPressed||this._myGamepad.getButtonInfo(PP.ButtonType.TOP_BUTTON).isPressStart()&&this._myGamepad.getButtonInfo(PP.ButtonType.BOTTOM_BUTTON).myIsPressed)&&this._toggleVisibility()}_toggleVisibility(){this._myWidgetFrame.toggleVisibility()}_widgetVisibleChanged(t){this._myCurrentWidget&&(this._myEasyTuneVariables.size>0?this._myCurrentWidget.setVisible(t):this._myCurrentWidget.setVisible(!1)),t&&this._refreshEasyTuneVariables()}_updateGamepadScrollVariable(t){if(this._myGamepad&&(!this._mySetup.myScrollVariableButtonType||this._myGamepad.getButtonInfo(this._mySetup.myScrollVariableButtonType).myIsPressed)){let i=this._myGamepad.getAxesInfo().myAxes[0],o=this._myGamepad.getAxesInfo().myAxes[1];if(Math.abs(i)>this._mySetup.myScrollVariableMinXThreshold&&Math.abs(o)<this._mySetup.myScrollVariableMaxYThreshold)for(this._myScrollVariableTimer+=t;this._myScrollVariableTimer>this._mySetup.myScrollVariableDelay;)this._myScrollVariableTimer-=this._mySetup.myScrollVariableDelay,this._scrollVariable(Math.sign(i));else this._myScrollVariableTimer=this._mySetup.myScrollVariableDelay}else this._myScrollVariableTimer=this._mySetup.myScrollVariableDelay}_scrollVariable(t){if(this._myEasyTuneVariables.size<=0)return;let i=this._getVariableIndex(this._myCurrentVariable);if(i>=0){let o=((i+t)%this._myVariableNames.length+this._myVariableNames.length)%this._myVariableNames.length;this._myEasyTuneVariables.has(this._myVariableNames[o])?(this._myCurrentVariable=this._myEasyTuneVariables.get(this._myVariableNames[o]),this._selectCurrentWidget()):this._refreshEasyTuneVariables()}else this._refreshEasyTuneVariables()}_createIndexString(){let t=" (",i=(this._getVariableIndex(this._myCurrentVariable)+1).toString(),o=this._myEasyTuneVariables.size.toString();for(;i.length<o.length;)i="0".concat(i);return t=t.concat(i).concat(" - ").concat(o).concat(")"),t}_getVariableIndex(t){return this._myVariableNames.indexOf(t.myName)}_updateActiveVariable(){this._myEasyTuneVariables.forEach(function(t){t.myIsActive=!1}),this._myWidgetFrame.myIsWidgetVisible&&this._myCurrentVariable&&(this._myCurrentVariable.myIsActive=!0)}}});var $i=S(()=>{PP.EasyTuneWidgetSetup=class{constructor(){this._initializeRuntimeSetup()}_initializeRuntimeSetup(){this.myGamepadHandedness=PP.ToolHandedness.RIGHT,this.myScrollVariableDelay=.5,this.myScrollVariableMinXThreshold=.6,this.myScrollVariableMaxYThreshold=.25,this.myScrollVariableButtonType=null,this.myRefreshVariablesDelay=null}}});var to=S(()=>{PP.EasyTuneVariables=class{constructor(){this._myMap=new Map}add(t){this._myMap.set(t.myName,t)}remove(t){this._myMap.delete(t)}get(t){let i=this._myMap.get(t);return i?i.getValue():null}set(t,i,o=!1){let n=this._myMap.get(t);n&&n.setValue(i,o)}isActive(t){let i=this._myMap.get(t);return i?i.myIsActive:!1}getEasyTuneVariable(t){return this._myMap.get(t)}_getInternalMap(){return this._myMap}registerValueChangedEventListener(t,i,o){this._myMap.get(t).registerValueChangedEventListener(i,o)}unregisterValueChangedEventListener(t,i,o){this._myMap.get(t).unregisterValueChangedEventListener(i)}};PP.EasyTuneVariableType={NONE:0,NUMBER:1,BOOL:2,TRANSFORM:3};PP.EasyTuneVariable=class{constructor(t,i){this.myName=t.slice(0),this.myType=i,this.myValue=null,this.myInitialValue=null,this.myIsActive=!1,this._myValueChangedCallbacks=new Map}getValue(){return this.myValue}setValue(t,i=!1){let o=this.myValue;this.myValue=t,i&&PP.EasyTuneVariable.prototype.setInitialValue.call(this,t),PP.refreshEasyTuneWidget(),o!=t&&this._triggerValueChangedCallback()}setInitialValue(t){this.myInitialValue=t}registerValueChangedEventListener(t,i){this._myValueChangedCallbacks.set(t,i)}unregisterValueChangedEventListener(t){this._myValueChangedCallbacks.delete(t)}_triggerValueChangedCallback(){this._myValueChangedCallbacks.size>0&&this._myValueChangedCallbacks.forEach(function(t){t(this.myName,this.getValue())}.bind(this))}};PP.EasyTuneVariableArray=class extends PP.EasyTuneVariable{constructor(t,i,o){super(t,i),PP.EasyTuneVariableArray.prototype.setValue.call(this,o,!0)}getValue(){return this.myValue.slice(0)}setValue(t,i=!1){let o=this.myValue;this.myValue=t.slice(0),i&&PP.EasyTuneVariableArray.prototype.setInitialValue.call(this,t),PP.refreshEasyTuneWidget(),(o==null||!o.pp_equals(t))&&this._triggerValueChangedCallback()}setInitialValue(t){this.myInitialValue=t.slice(0)}};PP.EasyTuneNumberArray=class extends PP.EasyTuneVariableArray{constructor(t,i,o,n,s=null,a=null,l=!1){super(t,PP.EasyTuneVariableType.NUMBER,i),this.myDecimalPlaces=n,this.myStepPerSecond=o,this.myInitialStepPerSecond=this.myStepPerSecond,this.myMin=s,this.myMax=a,this.myEditAllValuesTogether=l,this._clampValue(!0)}setMax(t){this.myMax=t,this._clampValue(!1)}setMin(t){this.myMin=t,this._clampValue(!1)}_clampValue(t){let i=this.myValue.vec_clamp(this.myMin,this.myMax);if(!t){let o=this.myInitialValue.vec_clamp(this.myMin,this.myMax);!o.vec_equals(this.myInitialValue)&&PP.EasyTuneVariableArray.prototype.setInitialValue.call(this,o)}PP.EasyTuneVariableArray.prototype.setValue.call(this,i,t)}};PP.EasyTuneNumber=class extends PP.EasyTuneNumberArray{constructor(t,i,o,n,s,a){super(t,[i],o,n,s,a)}getValue(){return this.myValue[0]}setValue(t,i=!1){super.setValue([t],i)}setInitialValue(t){super.setValue([t])}};PP.EasyTuneInt=class extends PP.EasyTuneNumber{constructor(t,i,o,n,s){super(t,i,o,0,n,s)}};PP.EasyTuneIntArray=class extends PP.EasyTuneNumberArray{constructor(t,i,o,n,s){let a=i.slice(0);for(let l=0;l<i.length;l++)a[l]=Math.round(a[l]);super(t,a,o,0,Math.round(n),Math.round(s))}};PP.EasyTuneBoolArray=class extends PP.EasyTuneVariableArray{constructor(t,i){super(t,PP.EasyTuneVariableType.BOOL,i)}};PP.EasyTuneBool=class extends PP.EasyTuneBoolArray{constructor(t,i){super(t,[i])}getValue(){return this.myValue[0]}setValue(t,i=!1){super.setValue([t],i)}setInitialValue(t){super.setValue([t])}};PP.EasyTuneTransform=class extends PP.EasyTuneVariable{constructor(t,i,o=!0,n=1,s=50,a=1){super(t,PP.EasyTuneVariableType.TRANSFORM),this.myDecimalPlaces=3,this.myPosition=i.mat4_getPosition(),this.myRotation=i.mat4_getRotationDegrees(),this.myScale=i.mat4_getScale();let l=Math.pow(10,this.myDecimalPlaces);for(let m=0;m<3;m++)this.myScale[m]=Math.max(this.myScale[m],1/l);this.myScaleAsOne=o,this.myPositionStepPerSecond=n,this.myRotationStepPerSecond=s,this.myScaleStepPerSecond=a,this.myInitialPosition=this.myPosition.vec3_clone(),this.myInitialRotation=this.myRotation.vec3_clone(),this.myInitialScale=this.myScale.vec3_clone(),this.myInitialPositionStepPerSecond=this.myPositionStepPerSecond,this.myInitialRotationStepPerSecond=this.myRotationStepPerSecond,this.myInitialScaleStepPerSecond=this.myScaleStepPerSecond,this.myTransform=PP.mat4_create(),this.myTransform.mat4_setPositionRotationDegreesScale(this.myPosition,this.myRotation,this.myScale),this.myTempTransform=PP.mat4_create()}getValue(){return this.myTransform.mat4_setPositionRotationDegreesScale(this.myPosition,this.myRotation,this.myScale),this.myTransform.slice(0)}setValue(t,i=!1){this.myTempTransform.mat4_setPositionRotationDegreesScale(this.myPosition,this.myRotation,this.myScale),t.mat4_getPosition(this.myPosition),t.mat4_getRotationDegrees(this.myRotation),t.mat4_getScale(this.myScale),this.myTransform.mat4_setPositionRotationDegreesScale(this.myPosition,this.myRotation,this.myScale),i&&PP.EasyTuneTransform.prototype.setInitialValue.call(this,t),PP.refreshEasyTuneWidget(),this.myTempTransform.pp_equals(this.myTransform)||this._triggerValueChangedCallback()}setInitialValue(t){this.myInitialPosition=t.mat4_getPosition(),this.myInitialRotation=t.mat4_getRotationDegrees(),this.myInitialScale=t.mat4_getScale()}}});var eo=S(()=>{WL.registerComponent("pp-easy-tune",{_myHandedness:{type:WL.Type.Enum,values:["none","left","right"],default:"none"},_myShowOnStart:{type:WL.Type.Bool,default:!1},_myShowVisibilityButton:{type:WL.Type.Bool,default:!1},_myEnableGamepadScrollVariable:{type:WL.Type.Bool,default:!0},_myPlaneMaterial:{type:WL.Type.Material,default:null},_myTextMaterial:{type:WL.Type.Material,default:null}},{init:function(){PP.myEasyTuneVariables=new PP.EasyTuneVariables,this._myWidget=new PP.EasyTuneWidget,PP.setEasyTuneWidgetActiveVariable=function(e){this._myWidget.setActiveVariable(e)}.bind(this),PP.refreshEasyTuneWidget=function(){this._myWidget.refresh()}.bind(this)},start:function(){let e={};e.myHandedness=[null,"left","right"][this._myHandedness],e.myShowOnStart=this._myShowOnStart,e.myShowVisibilityButton=this._myShowVisibilityButton,e.myEnableAdditionalButtons=!0,e.myEnableGamepadScrollVariable=this._myEnableGamepadScrollVariable,e.myPlaneMaterial=this._myPlaneMaterial,e.myTextMaterial=this._myTextMaterial,this._myWidget.start(this.object,e,PP.myEasyTuneVariables._getInternalMap())},update:function(e){this._myWidget.update(e)}});PP.myEasyTuneVariables=null;PP.myEasyTuneTarget=null;PP.setEasyTuneWidgetActiveVariable=function(){console.log("setEasyTuneWidgetActiveVariable function not initialized yet")};PP.refreshEasyTuneWidget=function(){console.log("refreshEasyTuneWidget function not initialized yet")}});var io=S(()=>{PP.WidgetFrameSetup=class{constructor(t,i){this._initializeBuildSetup(t,i),this._initializeRuntimeSetup()}_initializeBuildSetup(t,i){this.myBackgroundColor=[46/255,46/255,46/255,1],this.myCursorTargetCollisionCollider=2,this.myCursorTargetCollisionGroup=7,this.myCursorTargetCollisionThickness=.001,this.myDefaultTextColor=[255/255,255/255,255/255,1],this.myTextAlignment=2,this.myTextJustification=2,this.myTextOutlineRange=[.45,.45],this.myTextColor=this.myDefaultTextColor,this.myTextOutlineColor=this.myDefaultTextColor,this.myVisibilityButtonBackgroundScale=[.015,.015,1],this.myVisibilityButtonTextPosition=[0,0,.007],this.myVisibilityButtonTextScale=[.18,.18,.18];let o=.01,n=this.myVisibilityButtonBackgroundScale[0]*(2*i)+o*i;this.myVisibilityButtonPosition=[],this.myVisibilityButtonPosition[PP.ToolHandedness.NONE]={},this.myVisibilityButtonPosition[PP.ToolHandedness.NONE].myPosition=[-.3+n,-.205,.035],this.myVisibilityButtonPosition[PP.ToolHandedness.LEFT]={},this.myVisibilityButtonPosition[PP.ToolHandedness.LEFT].myPosition=[-.2+n,.025,.015],this.myVisibilityButtonPosition[PP.ToolHandedness.RIGHT]={},this.myVisibilityButtonPosition[PP.ToolHandedness.RIGHT].myPosition=[.2-n,.025,.015],this.myVisibilityButtonText=t,this.myVisibilityButtonCursorTargetPosition=[0,0,0],this.myVisibilityButtonCursorTargetPosition[2]=this.myVisibilityButtonTextPosition[2],this.myVisibilityButtonCollisionExtents=this.myVisibilityButtonBackgroundScale.slice(0),this.myVisibilityButtonCollisionExtents[2]=this.myCursorTargetCollisionThickness,this.myFlagButtonBackgroundScale=[.0125,.0125,1],this.myFlagButtonTextPosition=[0,0,.007],this.myFlagButtonTextScale=[.15,.15,.15];let s=.0075,a=0,l=this.myVisibilityButtonBackgroundScale[1]+this.myFlagButtonBackgroundScale[1]+s+this.myFlagButtonBackgroundScale[1]*(2*a)+s*a;this.myPinButtonPosition=[],this.myPinButtonPosition[PP.ToolHandedness.NONE]={},this.myPinButtonPosition[PP.ToolHandedness.NONE].myPosition=this.myVisibilityButtonPosition[PP.ToolHandedness.NONE].myPosition.slice(0),this.myPinButtonPosition[PP.ToolHandedness.NONE].myPosition[1]+=l,this.myPinButtonPosition[PP.ToolHandedness.LEFT]={},this.myPinButtonPosition[PP.ToolHandedness.LEFT].myPosition=this.myVisibilityButtonPosition[PP.ToolHandedness.LEFT].myPosition.slice(0),this.myPinButtonPosition[PP.ToolHandedness.LEFT].myPosition[1]+=l,this.myPinButtonPosition[PP.ToolHandedness.RIGHT]={},this.myPinButtonPosition[PP.ToolHandedness.RIGHT].myPosition=this.myVisibilityButtonPosition[PP.ToolHandedness.RIGHT].myPosition.slice(0),this.myPinButtonPosition[PP.ToolHandedness.RIGHT].myPosition[1]+=l,this.myPinButtonText="P",this.myPinButtonCursorTargetPosition=[0,0,0],this.myPinButtonCursorTargetPosition[2]=this.myFlagButtonTextPosition[2],this.myPinButtonCollisionExtents=this.myFlagButtonBackgroundScale.slice(0),this.myPinButtonCollisionExtents[2]=this.myCursorTargetCollisionThickness}_initializeRuntimeSetup(){this._initializeObjectsTransforms(),this.myButtonHoverColor=[150/255,150/255,150/255,1],this.myButtonDisabledTextColor=this.myBackgroundColor,this.myButtonDisabledBackgroundColor=[110/255,110/255,110/255,1]}_initializeObjectsTransforms(){this.myPivotObjectTransforms=this._createDefaultObjectTransforms(),this.myPivotObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.LEFT].myRotation=[-.645,.425,.25,.584],this.myPivotObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.LEFT].myRotation.quat_normalize(this.myPivotObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.LEFT].myRotation),this.myPivotObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.RIGHT].myRotation=[-.645,-.425,-.25,.584],this.myPivotObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.RIGHT].myRotation.quat_normalize(this.myPivotObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.RIGHT].myRotation),this.myPivotObjectTransforms[PP.ToolInputSourceType.HAND][PP.ToolHandedness.LEFT].myPosition=[-.04,.045,-.055],this.myPivotObjectTransforms[PP.ToolInputSourceType.HAND][PP.ToolHandedness.LEFT].myRotation=[0,.536,-.43,.727],this.myPivotObjectTransforms[PP.ToolInputSourceType.HAND][PP.ToolHandedness.LEFT].myRotation.quat_normalize(this.myPivotObjectTransforms[PP.ToolInputSourceType.HAND][PP.ToolHandedness.LEFT].myRotation),this.myPivotObjectTransforms[PP.ToolInputSourceType.HAND][PP.ToolHandedness.RIGHT].myPosition=[.04,.045,-.055],this.myPivotObjectTransforms[PP.ToolInputSourceType.HAND][PP.ToolHandedness.RIGHT].myRotation=[0,-.536,.43,.727],this.myPivotObjectTransforms[PP.ToolInputSourceType.HAND][PP.ToolHandedness.RIGHT].myRotation.quat_normalize(this.myPivotObjectTransforms[PP.ToolInputSourceType.HAND][PP.ToolHandedness.RIGHT].myRotation),this.myWidgetObjectTransforms=this._createDefaultObjectTransforms(),this.myWidgetObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.LEFT].myPosition=[.1,.23,-.02],this.myWidgetObjectTransforms[PP.ToolInputSourceType.GAMEPAD][PP.ToolHandedness.RIGHT].myPosition=[.07,.23,-.02],this.myWidgetObjectTransforms[PP.ToolInputSourceType.HAND][PP.ToolHandedness.LEFT].myPosition=[.1,.23,-.02],this.myWidgetObjectTransforms[PP.ToolInputSourceType.HAND][PP.ToolHandedness.RIGHT].myPosition=[.07,.23,-.02]}_createDefaultObjectTransforms(){let t=[];for(let i in PP.ToolInputSourceType){let o=PP.ToolInputSourceType[i];t[o]=[];for(let n in PP.ToolHandedness){let s=PP.ToolHandedness[n];t[o][s]={},t[o][s].myPosition=[0,0,0],t[o][s].myRotation=[0,0,0,1]}}return t}}});var oo=S(()=>{PP.WidgetFrameUI=class{constructor(){this._myInputSourceType=null,this._myParentObject=null,this._myIsPinned=!1}build(t,i,o){this._myParentObject=t,this._mySetup=i,this._myAdditionalSetup=o,this._myPlaneMesh=PP.MeshUtils.createPlaneMesh(),this._createSkeleton(),this._setTransforms(),this._addComponents()}setWidgetVisible(t){this.myFlagsButtonPanel.pp_setActiveHierarchy(t),t&&this._updateObjectsTransforms(!0)}setVisibilityButtonVisible(t){this.myVisibilityButtonPanel.pp_setActiveHierarchy(t)}setPinned(t){t!=this._myIsPinned&&(this._myIsPinned=t,this._myIsPinned?this.myPivotObject.pp_setParent(null):(this.myPivotObject.pp_setParent(this.myFixForwardObject),this._updateObjectsTransforms(!0)))}update(t){this._updateObjectsTransforms(!1)}_updateObjectsTransforms(t){let i=PP.InputUtils.getInputSourceType(this._myAdditionalSetup.myHandedness);(i!=this._myInputSourceType||t)&&(this._myInputSourceType=i,this._myIsPinned||(this.myPivotObject.setTranslationLocal(this._mySetup.myPivotObjectTransforms[this._myInputSourceType][this._myAdditionalSetup.myHandedness].myPosition),this.myPivotObject.resetRotation(),this.myPivotObject.rotateObject(this._mySetup.myPivotObjectTransforms[this._myInputSourceType][this._myAdditionalSetup.myHandedness].myRotation),this.myWidgetObject.setTranslationLocal(this._mySetup.myWidgetObjectTransforms[this._myInputSourceType][this._myAdditionalSetup.myHandedness].myPosition),this.myWidgetObject.resetRotation(),this.myWidgetObject.rotateObject(this._mySetup.myWidgetObjectTransforms[this._myInputSourceType][this._myAdditionalSetup.myHandedness].myRotation)))}_createSkeleton(){this.myFixForwardObject=WL.scene.addObject(this._myParentObject),this.myFixForwardObject.pp_rotateObject([0,180,0]),this.myPivotObject=WL.scene.addObject(this.myFixForwardObject),this.myWidgetObject=WL.scene.addObject(this.myPivotObject),this.myVisibilityButtonPanel=WL.scene.addObject(this.myPivotObject),this.myVisibilityButtonBackground=WL.scene.addObject(this.myVisibilityButtonPanel),this.myVisibilityButtonText=WL.scene.addObject(this.myVisibilityButtonPanel),this.myVisibilityButtonCursorTarget=WL.scene.addObject(this.myVisibilityButtonPanel),this.myFlagsButtonPanel=WL.scene.addObject(this.myPivotObject),this.myPinButtonPanel=WL.scene.addObject(this.myFlagsButtonPanel),this.myPinButtonBackground=WL.scene.addObject(this.myPinButtonPanel),this.myPinButtonText=WL.scene.addObject(this.myPinButtonPanel),this.myPinButtonCursorTarget=WL.scene.addObject(this.myPinButtonPanel)}_setTransforms(){this.myPivotObject.setDirty(),this.myVisibilityButtonPanel.setTranslationLocal(this._mySetup.myVisibilityButtonPosition[this._myAdditionalSetup.myHandedness].myPosition),this.myVisibilityButtonBackground.scale(this._mySetup.myVisibilityButtonBackgroundScale),this.myVisibilityButtonText.setTranslationLocal(this._mySetup.myVisibilityButtonTextPosition),this.myVisibilityButtonText.scale(this._mySetup.myVisibilityButtonTextScale),this.myVisibilityButtonCursorTarget.setTranslationLocal(this._mySetup.myVisibilityButtonCursorTargetPosition),this.myPinButtonPanel.setTranslationLocal(this._mySetup.myPinButtonPosition[this._myAdditionalSetup.myHandedness].myPosition),this.myPinButtonBackground.scale(this._mySetup.myFlagButtonBackgroundScale),this.myPinButtonText.setTranslationLocal(this._mySetup.myFlagButtonTextPosition),this.myPinButtonText.scale(this._mySetup.myFlagButtonTextScale),this.myPinButtonCursorTarget.setTranslationLocal(this._mySetup.myPinButtonCursorTargetPosition)}_addComponents(){this.myVisibilityButtonBackgroundComponent=this.myVisibilityButtonBackground.addComponent("mesh"),this.myVisibilityButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myVisibilityButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myVisibilityButtonBackgroundComponent.material.color=this._mySetup.myBackgroundColor,this.myVisibilityButtonTextComponent=this.myVisibilityButtonText.addComponent("text"),this._setupButtonTextComponent(this.myVisibilityButtonTextComponent),this.myVisibilityButtonTextComponent.text=this._mySetup.myVisibilityButtonText,this.myVisibilityButtonCursorTargetComponent=this.myVisibilityButtonCursorTarget.addComponent("cursor-target"),this.myVisibilityButtonCollisionComponent=this.myVisibilityButtonCursorTarget.addComponent("collision"),this.myVisibilityButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myVisibilityButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myVisibilityButtonCollisionComponent.extents=this._mySetup.myVisibilityButtonCollisionExtents,this.myPinButtonBackgroundComponent=this.myPinButtonBackground.addComponent("mesh"),this.myPinButtonBackgroundComponent.mesh=this._myPlaneMesh,this.myPinButtonBackgroundComponent.material=this._myAdditionalSetup.myPlaneMaterial.clone(),this.myPinButtonBackgroundComponent.material.color=this._mySetup.myButtonDisabledBackgroundColor,this.myPinButtonTextComponent=this.myPinButtonText.addComponent("text"),this._setupButtonTextComponent(this.myPinButtonTextComponent),this.myPinButtonTextComponent.material.color=this._mySetup.myButtonDisabledTextColor,this.myPinButtonTextComponent.text=this._mySetup.myPinButtonText,this.myPinButtonCursorTargetComponent=this.myPinButtonCursorTarget.addComponent("cursor-target"),this.myPinButtonCollisionComponent=this.myPinButtonCursorTarget.addComponent("collision"),this.myPinButtonCollisionComponent.collider=this._mySetup.myCursorTargetCollisionCollider,this.myPinButtonCollisionComponent.group=1<<this._mySetup.myCursorTargetCollisionGroup,this.myPinButtonCollisionComponent.extents=this._mySetup.myPinButtonCollisionExtents}_setupButtonTextComponent(t){t.alignment=this._mySetup.myTextAlignment,t.justification=this._mySetup.myTextJustification,t.material=this._myAdditionalSetup.myTextMaterial.clone(),t.material.outlineRange=this._mySetup.myTextOutlineRange,t.material.color=this._mySetup.myTextColor,t.material.outlineColor=this._mySetup.myTextOutlineColor,t.text=""}}});var no=S(()=>{PP.WidgetFrame=class{constructor(t,i){this.myIsWidgetVisible=!0,this.myIsPinned=!1,this._mySetup=new PP.WidgetFrameSetup(t,i),this._myAdditionalSetup=null,this._myUI=new PP.WidgetFrameUI,this._myWidgetVisibleChangedCallbacks=new Map,this._myPinChangedCallbacks=new Map}getWidgetObject(){return this._myUI.myWidgetObject}toggleVisibility(){this._toggleVisibility(!1,!0)}togglePin(){this._togglePin(!1)}registerWidgetVisibleChangedEventListener(t,i){this._myWidgetVisibleChangedCallbacks.set(t,i)}unregisterWidgetVisibleChangedEventListener(t){this._myWidgetVisibleChangedCallbacks.delete(t)}registerPinChangedEventListener(t,i){this._myPinChangedCallbacks.set(t,i)}unregisterPinChangedEventListener(t){this._myPinChangedCallbacks.delete(t)}start(t,i){this._myAdditionalSetup=i,this._myUI.build(t,this._mySetup,i),this._myUI.setVisibilityButtonVisible(i.myShowVisibilityButton),i.myShowOnStart||this._toggleVisibility(!1,!1),this._addListeners()}update(t){this._myUI.update(t)}_addListeners(){let t=this._myUI;t.myPinButtonCursorTargetComponent.addClickFunction(this._togglePin.bind(this,!0)),t.myPinButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myPinButtonBackgroundComponent.material)),t.myPinButtonCursorTargetComponent.addUnHoverFunction(this._pinUnHover.bind(this,t.myPinButtonBackgroundComponent.material)),this._myAdditionalSetup.myShowVisibilityButton&&(t.myVisibilityButtonCursorTargetComponent.addClickFunction(this._toggleVisibility.bind(this,!0,!0)),t.myVisibilityButtonCursorTargetComponent.addHoverFunction(this._genericHover.bind(this,t.myVisibilityButtonBackgroundComponent.material)),t.myVisibilityButtonCursorTargetComponent.addUnHoverFunction(this._visibilityUnHover.bind(this,t.myVisibilityButtonBackgroundComponent.material)))}_toggleVisibility(t,i){this.myIsWidgetVisible=!this.myIsWidgetVisible,this._myUI.setWidgetVisible(this.myIsWidgetVisible);let o=this._myUI.myVisibilityButtonTextComponent.material,n=this._myUI.myVisibilityButtonBackgroundComponent.material;if(this.myIsWidgetVisible?(o.color=this._mySetup.myDefaultTextColor,t||(n.color=this._mySetup.myBackgroundColor)):(o.color=this._mySetup.myButtonDisabledTextColor,t||(n.color=this._mySetup.myButtonDisabledBackgroundColor)),i)for(let s of this._myWidgetVisibleChangedCallbacks.values())s(this.myIsWidgetVisible)}_togglePin(t){if(this.myIsWidgetVisible){this.myIsPinned=!this.myIsPinned,this._myUI.setPinned(this.myIsPinned);let i=this._myUI.myPinButtonTextComponent.material,o=this._myUI.myPinButtonBackgroundComponent.material;this.myIsPinned?(i.color=this._mySetup.myDefaultTextColor,t||(o.color=this._mySetup.myBackgroundColor)):(i.color=this._mySetup.myButtonDisabledTextColor,t||(o.color=this._mySetup.myButtonDisabledBackgroundColor));for(let n of this._myPinChangedCallbacks.values())n(this.myIsPinned)}}_genericHover(t){t.color=this._mySetup.myButtonHoverColor}_visibilityUnHover(t){this.myIsWidgetVisible?t.color=this._mySetup.myBackgroundColor:t.color=this._mySetup.myButtonDisabledBackgroundColor}_pinUnHover(t){this.myIsPinned?t.color=this._mySetup.myBackgroundColor:t.color=this._mySetup.myButtonDisabledBackgroundColor}}});Ut();Gt();Qt();zt();Xt();Yt();Kt();Jt();$t();te();ee();ie();oe();ne();se();re();ae();le();ue();me();ce();ye();he();pe();de();_e();ge();fe();Pe();Ce();Te();Se();be();xe();ve();Be();Me();Ae();Ve();Le();Re();De();We();ke();Fe();je();Ci();Ti();Si();bi();xi();vi();Bi();Mi();Ai();Vi();Li();Ri();Di();Ii();Ei();Oi();Wi();ki();Fi();ji();wi();qi();Ni();Hi();Ui();Gi();Qi();zi();Xi();Yi();Zi();Ki();Ji();$i();to();eo();io();oo();no();})();
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
//# sourceMappingURL=wle_pp_bundler-bundle.js.map
